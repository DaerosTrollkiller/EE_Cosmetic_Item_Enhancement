//EE_Cosmetic Enhancement

BACKUP ~ee_cosmetic_enhancements/backup~
SUPPORT ~https://forums.beamdog.com/discussion/76314/mod-enhanced-edition-cosmetic-enhancement-road-to-v1-0-0/p1~

VERSION ~v1.0.2~

README ~ee_cosmetic_enhancements/readme.html~

ASK_EVERY_COMPONENT

LANGUAGE ~English~ ~english~ ~ee_cosmetic_enhancements/language/english/english.tra~
LANGUAGE ~Russian~ ~russian~ ~ee_cosmetic_enhancements/language/russian/russian.tra~


/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////                                                  \\\\\
///// BG1-BG2-EET Cosmetic Item Enhancements           \\\\\
/////                                                  \\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\

BEGIN @1001
GROUP @1000
REQUIRE_PREDICATE NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @12
PRINT @11

INCLUDE ~ee_cosmetic_enhancements/lib/functions.tpa~		//adding functions

////////////////////
//Adding Resources//
////////////////////

COPY ~ee_cosmetic_enhancements/bam~ ~override~
COPY ~ee_cosmetic_enhancements/vvc~ ~override~
COPY ~ee_cosmetic_enhancements/wav~ ~override~

///////////////////////
// Adding Projectiles//
///////////////////////

ADD_PROJECTILE ~ee_cosmetic_enhancements/pro/dtktham2.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/pro/dtkaciar.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/pro/dtkgesen.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/pro/dtkbiter.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/pro/dtkthamm.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/pro/dtkpyblt.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/pro/dtkfbolt.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/pro/dtkibolt.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/pro/dtkltblt.pro~


/////////////////////////////////////////////////
// Modifying spells to account for item changes//
/////////////////////////////////////////////////

COPY_EXISTING ~spwi119a.spl~ ~override~		//Larloch's minor drain - fixes broken hp drain to caster effect
	LPF ALTER_EFFECT INT_VAR match_opcode = 12 special = 8 END  	
  BUT_ONLY_IF_IT_CHANGES

COPY_EXISTING ~sppr613.spl~ ~override~		//Physical mirror - altering to add new projectiles to bounce
	SET projectile = EVAL "%dtkbiter%"
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
		SET projectile = EVAL "%dtkthamm%"
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
			SET projectile = EVAL "%dtktham2%"
			LPF ADD_SPELL_EFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
				SET projectile = EVAL "%dtkaciar%"
				LPF ADD_SPELL_EFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
					SET projectile = EVAL "%dtkgesen%"
					LPF ADD_SPELL_EFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
						SET projectile = EVAL "%dtkpyblt%"
						LPF ADD_SPELL_EFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
							SET projectile = EVAL "%dtkfbolt%"
							LPF ADD_SPELL_EFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
								SET projectile = EVAL "%dtkibolt%"
								LPF ADD_SPELL_EFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
									SET projectile = EVAL "%dtkltblt%"
									LPF ADD_SPELL_EFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
	BUT_ONLY IF_EXISTS
	
COPY_EXISTING ~shld24a.itm~ ~override~		//reflection shield +1(alternate version) - altering to add new projectiles to bounce
	SET projectile = EVAL "%dtkbiter%"
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
		SET projectile = EVAL "%dtkthamm%"
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
			SET projectile = EVAL "%dtktham2%"
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
				SET projectile = EVAL "%dtkaciar%"
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
					SET projectile = EVAL "%dtkgesen%"
					LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
						SET projectile = EVAL "%dtkpyblt%"
						LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
							SET projectile = EVAL "%dtkfbolt%"
							LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
								SET projectile = EVAL "%dtkibolt%"
								LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
									SET projectile = EVAL "%dtkltblt%"
									LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
	BUT_ONLY IF_EXISTS

COPY_EXISTING ~shld24.itm~ ~override~		//reflection shield +1 - altering to add new projectiles to bounce
	SET projectile = EVAL "%dtkbiter%"
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
		SET projectile = EVAL "%dtkthamm%"
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
			SET projectile = EVAL "%dtktham2%"
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
				SET projectile = EVAL "%dtkaciar%"
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
					SET projectile = EVAL "%dtkgesen%"
					LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
						SET projectile = EVAL "%dtkpyblt%"
						LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
							SET projectile = EVAL "%dtkfbolt%"
							LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
								SET projectile = EVAL "%dtkibolt%"
								LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
									SET projectile = EVAL "%dtkltblt%"
									LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
	BUT_ONLY IF_EXISTS
	
COPY_EXISTING ~dtkshld1.itm~ ~override~		//mirrored buckler of the fist +2 (if present) - altering to add new projectiles to bounce
	SET projectile = EVAL "%dtkbiter%"
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
		SET projectile = EVAL "%dtkthamm%"
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
			SET projectile = EVAL "%dtktham2%"
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
				SET projectile = EVAL "%dtkaciar%"
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
					SET projectile = EVAL "%dtkgesen%"
					LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
						SET projectile = EVAL "%dtkpyblt%"
						LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
							SET projectile = EVAL "%dtkfbolt%"
							LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
								SET projectile = EVAL "%dtkibolt%"
								LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
									SET projectile = EVAL "%dtkltblt%"
									LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
	BUT_ONLY IF_EXISTS


////////////////////////////
// Changing Existing Items//
////////////////////////////
COPY_EXISTING ~bdhamm02.itm~ ~override~		//Voidhammer +3
LPF CLONE_EFFECT INT_VAR match_opcode = 12 match_parameter2 = 4194304 opcode = 215 parameter2 = 0 STR_VAR resource = dtkmaghl dicenumber = 0 dicesize = 0 timing = 0 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~bdsw1h06.itm~ ~override~		//Voidsword +3
LPF CLONE_EFFECT INT_VAR match_opcode = 12 match_parameter2 = 4194304 opcode = 215 parameter2 = 0 STR_VAR resource = dtkmaghl dicenumber = 0 dicesize = 0 timing = 0 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~bdbull02.itm~ ~override~		//Bullet of Darkness +3
LPF CLONE_EFFECT INT_VAR match_opcode = 12 match_parameter2 = 4194304 opcode = 215 parameter2 = 0 STR_VAR resource = dtkmaghl dicenumber = 0 dicesize = 0 timing = 0 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~bdarow02.itm~ ~override~		//Void-Tipped Arrow +3
LPF CLONE_EFFECT INT_VAR match_opcode = 12 match_parameter2 = 4194304 opcode = 215 parameter2 = 0 STR_VAR resource = dtkmaghl dicenumber = 0 dicesize = 0 timing = 0 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~bdbolt02.itm~ ~override~		//Bolt of Ice +1
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkibolt%" END
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~bdbolt01.itm~ ~override~		//Bolt of Fire +1
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkfbolt%" END
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~bolt03.itm~ ~override~		//Bolt of Lightning
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkltblt%" END
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~bolt05.itm~ ~override~		//Bolt of Polymorphing
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkpyblt%" END
		LPF CLONE_EFFECT INT_VAR match_opcode = 111 opcode = 135 parameter2 = 2 STR_VAR resource = squirr parameter2 = 0 END // fixes polymorph visual effect
  BUT_ONLY IF_EXISTS
	BUT_ONLY_IF_IT_CHANGES

COPY_EXISTING ~arow04.itm~ ~override~		//Acid Arrow +1
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkaciar%" END
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~bddart01.itm~ ~override~		//Biter +2
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkbiter%" END
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~hamm06.itm~ ~override~	//Dwarven Thrower +3
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkthamm%" END
		WRITE_ASCII 0x76 ~ihamm06~ #8  //changes melee icon
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~ohnhamm1.itm~ ~override~		//The Brick +2
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtktham2%" END
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 247 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 81 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~npchan.itm~ ~override~	//Corthala Family Armor
    WRITE_ASCII 0x22 ~3A~ #2	//Changes equipped appearance to Chain instead of leather
  BUT_ONLY IF_EXISTS
	
COPY_EXISTING ~leat19.itm~ ~override~	//Shadow Dragon Scale
    WRITE_ASCII 0x22 ~3A~ #2	//Changes equipped appearance to Chain instead of leather
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 254 END  // changing color index - parameter 2 = location parameter 1 = index number
		SET location = 0
		SET cycle_speed = 90   
		SET r = 127
		SET b = 166
		SET g = 60
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~plat18.itm~ ~override~	//Red Dragon Scale		
	SET location = 0
	SET cycle_speed = 90   
	SET r = 219
	SET b = 70
	SET g = 75
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS
	
COPY_EXISTING ~shld24.itm~ ~override~	//Reflection Shield +1
	SET location = 34
	SET cycle_speed = 90   
	SET r = 55
	SET b = 55
	SET g = 55
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		SET location = 32
		SET cycle_speed = 90   
		SET r = 55
		SET b = 55
		SET g = 55
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END
		WRITE_ASCII 0x22 ~D2~ #2	//Changes equipped appearance to BG1 medium shield
		WRITE_ASCII 0x3a ~ishldrf~ #8  //changes inventory icon
		WRITE_ASCII 0x58 ~dtkreflc~ #8  //changes description image
		WRITE_ASCII 0x44 ~gshld01~ #8  //changes ground icon
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 34 parameter1 = 255 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 33 parameter2 = 37  parameter1 = 109 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 32 parameter1 = 254 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 36 parameter1 = 210 END // add color index in speificed location
			SET projectile = EVAL "%dtkbiter%"
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 2 END  //adds a new projectile to be relfected by physical mirror effect
				SET projectile = EVAL "%dtkthamm%"
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 2 END  //adds a new projectile to be relfected by physical mirror effect
					SET projectile = EVAL "%dtktham2%"
					LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 2 END  //adds a new projectile to be relfected by physical mirror effect
						SET projectile = EVAL "%dtkaciar%"
						LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 2 END  //adds a new projectile to be relfected by physical mirror effect
							SET projectile = EVAL "%dtkgesen%"
							LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 2 END  //adds a new projectile to be relfected by physical mirror effect
								SET projectile = EVAL "%dtkfbolt%"
								LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 2 END  //adds a new projectile to be relfected by physical mirror effect
									SET projectile = EVAL "%dtkibolt%"
									LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 2 END  //adds a new projectile to be relfected by physical mirror effect
										SET projectile = EVAL "%dtkltblt%"
										LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 2 END  //adds a new projectile to be relfected by physical mirror effect
	BUT_ONLY IF_EXISTS
					
COPY_EXISTING ~helm21.itm~ ~override~	//Dragon Helm
	SET location = 48
	SET cycle_speed = 255   
	SET r = 50
	SET b = 0
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 52 parameter1 = 86 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 222 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 195 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~ohdmask.itm~ ~override~	//The Visage
	WRITE_SHORT 0x22 16970
	SET location = 52
	SET cycle_speed = 255   
	SET r = 50
	SET b = 0
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 195 parameter2 = 52 timing = 2 probability1 = 100 END
  BUT_ONLY IF_EXISTS
	
COPY_EXISTING ~sw1h63.itm~ ~override~	//Foebane +5
	SET r = 25
	SET b = 25
	SET g = 25
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 21 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 16 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 132 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 79 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 104 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 146 match_parameter1 = 1 parameter2 = 2 STR_VAR resource = EVAL "dtkfbane" END  // changes spell cast on hit to new spell
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~sw1h62.itm~ ~override~	//Foebane +3
	SET r = 25
	SET b = 25
	SET g = 25
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 21 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 16 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 132 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 79 END  // changing color index - parameter 2 = location parameter 1 = color index number
					LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 104 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~ax1h13.itm~ ~override~	//Frostreaver +3
	SET location = 16
	SET cycle_speed = 45
	SET r = 0
	SET b = 0
	SET g = 50
	LPF DELETE_EFFECT INT_VAR match_opcode = 8 match_parameter2 = 16 END
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
					LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 86 END  // changing color index - parameter 2 = location parameter 1 = color index number
						LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 197 END  // changing color index - parameter 2 = location parameter 1 = color index number
							LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 202 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~ax1h12.itm~ ~override~	//Stonefire +3
	SET location = 16
	SET cycle_speed = 255
	SET r = 138
	SET b = 0
	SET g = 73
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 147 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~helm33.itm~ ~override~	//Gold Horned Helm
    WRITE_ASCII 0x22 ~J3~ #2	
  BUT_ONLY IF_EXISTS
	
COPY_EXISTING ~dagg21.itm~ ~override~	//Dagger of the Star +4
	SET location = 21
	SET cycle_speed = 120
	SET r = 173
	SET b = 0
	SET g = 173
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~dagg22.itm~ ~override~	//Dagger of the Star +5
	SET location = 21
	SET cycle_speed = 44
	SET r = 173
	SET b = 0
	SET g = 173
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		SET r = 173
		SET b = 0
		SET g = 173
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 20 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~plat20.itm~ ~override~	//Blue Dragon Plate
	SET location = 2
	SET cycle_speed = 90
	SET r = 0
	SET b = 153
	SET g = 112
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 82 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 80 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~chan20.itm~ ~override~	//White Dragon Scale
	SET location = 5
	SET cycle_speed = 200
	SET r = 0
	SET b = 5
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 222 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 196 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~wa2robe.itm~ ~override~	//Robe of Vecna
	WRITE_ASCII 0x58 ~cclck12~ #8  //changes description image
	WRITE_ASCII 0x3a ~dtkvecna~ #8  //changes inventory icon
		SET location = 0
		SET cycle_speed = 20
		SET r = 65
		SET b = 0
		SET g = 156
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET location = 1
			SET cycle_speed = 200
			SET r = 95
			SET b = 204
			SET g = 0
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 104 parameter2 = 1 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 69 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 81 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 =66  parameter2 = 2 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~ohnrobe1.itm~ ~override~	  //Robe of Goodman Hayes
	WRITE_ASCII 0x3a ~dtkhayes~ #8  //changes inventory icon
  BUT_ONLY IF_EXISTS
	
COPY_EXISTING ~ohdarmor.itm~ ~override~	  //Silver Dragon Scale
	WRITE_ASCII 0x3a ~dtksilds~ #8  //changes inventory icon
		SET location = 4
		SET cycle_speed = 90
		SET r = 20
		SET b = 20
		SET g = 20
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET location = 0
			SET cycle_speed = 90
			SET r = 20
			SET b = 20
			SET g = 20
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~plat16.itm~ ~override~	  //Armor of the Hart +3
	WRITE_ASCII 0x3a ~dtkarhrt~ #8  //changes inventory icon
  BUT_ONLY IF_EXISTS
	
COPY_EXISTING ~palplat.itm~ ~override~	  //Armor of the Hart +3 (NPC version)
	WRITE_ASCII 0x3a ~dtkarhrt~ #8  //changes inventory icon
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~leat24.itm~ ~override~	  //Grandmaster's Armor +6
	WRITE_ASCII 0x58 ~cleat12~ #8  //changes description image
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 207 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 67 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 93 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~plat21.itm~ ~override~	  //Enkidu's Full Plate +3
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 6 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 242 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~plat13.itm~ ~override~	  //Gorgon's Plate +4
	WRITE_ASCII 0x3a ~dtkgorg~ #8  //changes iventory icon
		SET location = 0
		SET cycle_speed = 255
		SET r = 40
		SET b = 0
		SET g = 40
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 252 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 90 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~leat23.itm~ ~override~	  //Studded Leather of Thorns +6
	WRITE_ASCII 0x3a ~dtklthrn~ #8  //changes iventory icon
			SET location = 0
			SET cycle_speed = 255
			SET r = 70
			SET b = 0
			SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 147 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~helm31.itm~ ~override~	  //Helm of the Rock
	WRITE_ASCII 0x3a ~dtkhrck1~ #8  //changes iventory icon
	WRITE_ASCII 0x58 ~1chelm11~ #8  //changes description image
    WRITE_ASCII 0x22 ~J0~ #2	//Changes equipped appearance to Helm15
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 50 parameter1 = 58 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 205 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 49 parameter1 = 27 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 68 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~helm32.itm~ ~override~	  //Helm of the Rock(with horns)
	WRITE_ASCII 0x3a ~dtkhrck2~ #8  //changes iventory icon
	WRITE_ASCII 0x76 ~dtkhrck2~ #8  //changes charge ability icon
	WRITE_ASCII 0x58 ~1chelm21~ #8  //changes description image
    WRITE_ASCII 0x22 ~J1~ #2	//Changes equipped appearance to Helm15
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 52 parameter1 = 58 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 205 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 209 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter2 = 50 parameter1 = 68 timing = 2 probability1 = 100 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~ohhdag01.itm~ ~override~	  //The Jade Fang +3
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 69 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~dagg20.itm~ ~override~	  //Life-Stealer +4
	SET location = 21
	SET cycle_speed = 255
	SET r = 100
	SET b = 0
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 195 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~blun22.itm~ ~override~	  //Blackblood +3
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~xbow16.itm~ ~override~	  //Firetooth +5
	SET location = 21
	SET cycle_speed = 130
	SET r = 100
	SET b = 0
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~hamm10.itm~ ~override~	  //Runehammer +4
	LPF DELETE_EFFECT INT_VAR match_opcode = 9 END
		SET cycle_speed = 255
		SET location = 16
		SET r = 100
		SET b = 100
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET cycle_speed = 155
			SET location = 20
			SET r = 100
			SET b = 100
			SET g = 0
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				SET cycle_speed = 80
				SET location = 21
				SET r = 100
				SET b = 100
				SET g = 0
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~hamm11.itm~ ~override~	  //Runehammer +5
	LPF DELETE_EFFECT INT_VAR match_opcode = 9 END
		SET cycle_speed = 155
		SET location = 16
		SET r = 100
		SET b = 100
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET cycle_speed = 80
			SET location = 20
			SET r = 100
			SET b = 100
			SET g = 0
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				SET cycle_speed = 45
				SET location = 21
				SET r = 100
				SET b = 100
				SET g = 0
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~ohreaver.itm~ ~override~	  //Ir'revrykal +5
	SET r = 100
	SET b = 0
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 21 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~bow21.itm~ ~override~	  //Darkfire Bow +5
	SET r = 50
	SET b = 50
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 20 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~bow13.itm~ ~override~	  //Mana Bow +4
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 82 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~bow19.itm~ ~override~	  //Shortbow of Gesen
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkgesen%" END
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 226 END  // changing color index - parameter 2 = location parameter 1 = color index number
			SET cycle_speed = 155
			SET location = 16
			SET r = 100
			SET b = 0
			SET g = 100
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~ohnslng1.itm~ ~override~	  //Wild Sling +1
	LPF DELETE_EFFECT INT_VAR match_opcode = 9 END
		SET cycle_speed = 50
		SET location = 16
		SET r = 0
		SET b = 0
		SET g = 150
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter2 = 16 parameter1 = 86 timing = 2 probability1 = 100 END  // changing color index - parameter 2 = location parameter 1 = color index number		
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~slng09.itm~ ~override~	  //Erienne Sling +5
	LPF DELETE_EFFECT INT_VAR match_opcode = 9 END
		SET cycle_speed = 122
		SET location = 16
		SET r = 100
		SET b = 100
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter2 = 16 parameter1 =104 timing = 2 probability1 = 100 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~wasling.itm~ ~override~	  //Sling of Everard +5
		SET cycle_speed = 20
		SET location = 20
		SET r = 100
		SET b = 0
		SET g = 100
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~blun27.itm~ ~override~	  //Club of Detonation +5
		SET r = 100
		SET b = 0
		SET g = 50
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 =21  timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~blun35.itm~ ~override~	  //Ice Star +4
		SET r = 0
		SET b = 50
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 =21  timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 82 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 104 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~blun29.itm~ ~override~	  //Storm Star +5
		SET cycle_speed = 35
		SET location = 21
		SET r = 100
		SET b = 0
		SET g = 90
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~halb09.itm~ ~override~	  //Wave +4
		SET r = 0
		SET b = 255
		SET g = 50
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 =20  timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~sw2h17.itm~ ~override~	  //Gram the Sword of Grief +5
	LPF DELETE_EFFECT INT_VAR match_opcode = 8 END
		SET cycle_speed = 90
		SET location = 21
		SET r = 0
		SET b = 0
		SET g = 5
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 219 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~sw2h18.itm~ ~override~	  //Gram the Sword of Grief +5(upgraded)
	LPF DELETE_EFFECT INT_VAR match_opcode = 8 END
		SET cycle_speed = 45
		SET location = 21
		SET r = 0
		SET b = 0
		SET g = 15
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF CLONE_EFFECT INT_VAR match_opcode =216 match_parameter1 = 1 opcode = 215 parameter2 = 0 STR_VAR resource = paralh probability1 = 100 timing = 1 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 219 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~miscbc.itm~ ~override~	  //Blackrazor +3
    WRITE_ASCII 0x22 ~S1~ #2	//Changes equipped appearance to Long Sword
			SET cycle_speed = 90
			SET location = 21
			SET r = 100
			SET b = 100
			SET g = 100
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~shld21.itm~ ~override~	  //Dragon Scale Shield +2
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 37 parameter1 = 222 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 34 parameter1 = 86 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 33 parameter1 = 243 END  // changing color index - parameter 2 = location parameter 1 = color index number
		SET cycle_speed = 20
		SET location = 33
		SET r = 20
		SET b = 0
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET cycle_speed = 90
			SET location = 34
			SET r = 0
			SET b = 0
			SET g = 20
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				SET cycle_speed = 190
				SET location = 37
				SET r = 0
				SET b = 0
				SET g = 0
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~ohbshld1.itm~ ~override~	  //Kazrah's Shield +4
	SET r = 0
	SET b = 100
	SET g = 50
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 37 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~ohnshld1.itm~ ~override~	  //Shield of Fyrus Khal +2
    WRITE_ASCII 0x22 ~D3~ #2	//Changes equipped appearance to Medium Shield (BG1)
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 32 parameter1 = 215 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 37 parameter1 = 31 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 33	parameter2 = 34 parameter1 = 221 END  // changing color index - parameter 2 = location parameter 1 = color index number
			SET r = 50
			SET b = 0
			SET g = 0
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 32 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~sw1h51.itm~ ~override~	  //Celestial Fury +3
	LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkshck duration = 6  END  // changing color index - parameter 2 = location parameter 1 = color index number
		SET cycle_speed = 60
		SET location = 255
		SET r = 125
		SET b = 0
		SET g = 125
			LPF CLONE_EFFECT INT_VAR match_opcode =215 opcode = 50 target = 2 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 0 duration = 6 probability1 = 100 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~sw1h68.itm~ ~override~	  //Spectral Brand +4
	LPF DELETE_EFFECT INT_VAR match_opcode = 8 END
		SET r = 0
		SET b = 60
		SET g = 60
		LPF ALTER_EFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 21 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter2 = 21 parameter1 =27 timing = 2 probability1 = 100 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter2 = 20 parameter1 =66 timing = 2 probability1 = 100 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter2 = 16 parameter1 =67 timing = 2 probability1 = 100 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~sw1h69.itm~ ~override~	  //Spectral Brand +5
	LPF DELETE_EFFECT INT_VAR match_opcode = 8 END
		SET r = 0
		SET b = 120
		SET g = 120
		LPF ALTER_EFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 21 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter2 = 21 parameter1 =27 timing = 2 probability1 = 100 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter2 = 20 parameter1 =66 timing = 2 probability1 = 100 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter2 = 16 parameter1 =67 timing = 2 probability1 = 100 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~sw2h15.itm~ ~override~	  //Silver Sword
	LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
		LPF CLONE_EFFECT INT_VAR match_opcode =13 opcode = 215 parameter2 = 0 STR_VAR resource = dtksilsd probability1 = 25 timing = 1 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 32 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 80 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 79 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~devaevil.itm~ ~override~	  //Silver Sword (Fallen Deva)
	LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
		LPF CLONE_EFFECT INT_VAR match_opcode =13 opcode = 215 parameter2 = 0 STR_VAR resource = dtksilsd probability1 = 25 timing = 1 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~gith.itm~ ~override~	  //Silver Sword (Githyanki)
	LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
		LPF CLONE_EFFECT INT_VAR match_opcode =13 opcode = 215 parameter2 = 0 STR_VAR resource = dtksilsd probability1 = 25 timing = 1 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~planetar.itm~ ~override~	  //Silver Sword (Planetar)
	LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
		LPF CLONE_EFFECT INT_VAR match_opcode =13 opcode = 215 parameter2 = 0 STR_VAR resource = dtksilsd probability1 = 25 timing = 1 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~ohbwing.itm~ ~override~	  //Dark Justice +5
    WRITE_ASCII 0x22 ~S2~ #2	//Changes equipped appearance to two handed sword(default is long sword w/ broken animation)
		WRITE_ASCII 0x3a ~dtkdkjus~ #8  //changes iventory icon
			WRITE_ASCII 0x76 ~dtkdkjus~ #8  //changes melee icon
				LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
					LPF CLONE_EFFECT INT_VAR match_opcode =13 opcode = 215 parameter2 = 0 STR_VAR resource = dtksilsd probability1 = 15 timing = 1 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
						LPF CLONE_EFFECT INT_VAR match_opcode =13 opcode = 215 parameter2 = 0 STR_VAR resource = dtkmaghl probability1 = 100 timing = 1 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
							SET cycle_speed = 45
							SET location = 21
							SET r = 0
							SET b = 150
							SET g = 50
							LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
								SET r = 1
								SET b = 1
								SET g = 1
								LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 16 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
									LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 82 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~helm16.itm~ ~override~	  //Helm of Brilliance
	SET cycle_speed = 144
	SET location = 49
	SET r = 214
	SET b = 0
	SET g = 32
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 52 parameter1 = 229 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~ohnhelm1.itm~ ~override~	  //Thayan Circlet
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter2 = 52 parameter1 =96 timing = 2 probability1 = 100 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~sw1h60.itm~ ~override~	  //Angurvadal +4
		LPF DELETE_EFFECT INT_VAR match_opcode = 9 END
				SET r = 250
				SET b = 0
				SET g = 125
				LPF ALTER_EFFECT INT_VAR match_opcode = 8 match_parameter2 = 21 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) END  // change existing solid glow RGB value
					LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
					LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
					LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~sw1h61.itm~ ~override~	  //Angurvadal +5
		LPF DELETE_EFFECT INT_VAR match_opcode = 9 END
				SET r = 250
				SET b = 0
				SET g = 125
				LPF ALTER_EFFECT INT_VAR match_opcode = 8 match_parameter2 = 21 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) END  // change existing solid glow RGB value
					LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
					LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
					LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS


COPY_EXISTING ~kuobolt.itm~ ~override~	  //Kuo-toan bolt
	SET location = 255
	SET cycle_speed = 180 //cycle speed cant be higher than rgb value on pulse
	SET r = 180
	SET g = 180
	SET b = 0
	LPF CLONE_EFFECT INT_VAR match_opcode = 45 opcode = 50 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location duration = 0 dicenumber = 0 dicesize = 0 timing = 0 probability1 = 100 END // adds character color pulse on successful stun
		LPF CLONE_EFFECT INT_VAR match_opcode = 45 opcode = 215 parameter2 = 0 STR_VAR resource = paralh dicenumber = 0 dicesize = 0 timing = 0 duration = 0 probability1 = 100 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~kuobolt2.itm~ ~override~	  //Kuo-toan bolt
	SET location = 255
	SET cycle_speed = 180  //cycle speed cant be higher than rgb value on pulse
	SET r = 180
	SET g = 180
	SET b = 0
	LPF CLONE_EFFECT INT_VAR match_opcode = 45 opcode = 50 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location duration = 0 dicenumber = 0 dicesize = 0 timing = 0 probability1 = 100 END // adds character color pulse on successful stun
		LPF CLONE_EFFECT INT_VAR match_opcode = 45 opcode = 215 parameter2 = 0 STR_VAR resource = paralh dicenumber = 0 dicesize = 0 timing = 0 duration = 0 probability1 = 100 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~dwbolt02.itm~ ~override~	  //Drow bolt of stunning
	SET location = 255
	SET cycle_speed = 180  //cycle speed cant be higher than rgb value on pulse
	SET r = 180
	SET g = 180
	SET b = 0
	LPF CLONE_EFFECT INT_VAR match_opcode = 45 opcode = 50 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location duration = 0 dicenumber = 0 dicesize = 0 timing = 0 probability1 = 100 END // adds character color pulse on successful stun
		LPF CLONE_EFFECT INT_VAR match_opcode = 45 opcode = 215 parameter2 = 0 STR_VAR resource = paralh dicenumber = 0 dicesize = 0 timing = 0 duration = 0 probability1 = 100 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~sahbolt.itm~ ~override~	  //Paralytic bolt
	SET location = 255
	SET cycle_speed = 180  //cycle speed cant be higher than rgb value on pulse
	SET r = 180
	SET g = 180
	SET b = 0
	LPF CLONE_EFFECT INT_VAR match_opcode = 45 opcode = 50 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location duration = 0 dicenumber = 0 dicesize = 0 timing = 0 probability1 = 100 END // adds character color pulse on successful stun
		LPF CLONE_EFFECT INT_VAR match_opcode = 45 opcode = 215 parameter2 = 0 STR_VAR resource = paralh dicenumber = 0 dicesize = 0 timing = 0 duration = 0 probability1 = 100 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dwbolt01.itm~ ~override~	  //Drow bolt of sleep
	LPF CLONE_EFFECT INT_VAR match_opcode = 39 opcode = 215 parameter2 = 0 STR_VAR resource = cdunhvis dicenumber = 0 dicesize = 0 timing = 0 duration = 0 probability1 = 100 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~bull04.itm~ ~override~	  //sunstone bullet +1
	SET cycle_speed = 90
	SET location = 16
	SET r = 100
	SET b = 0
	SET g = 100
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~dagg13.itm~ ~override~	  //Pixie Prick +3
	LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
		LPF CLONE_EFFECT INT_VAR match_opcode = 39 opcode = 215 parameter2 = 0 STR_VAR resource = cdunhvis dicenumber = 0 dicesize = 0 timing = 0 duration = 0 probability1 = 100 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~dagg17.itm~ ~override~	  //Stiletto of Demarchess +2
		LPF CLONE_EFFECT INT_VAR match_opcode = 109 opcode = 215 parameter2 = 0 STR_VAR resource = paralh dicenumber = 0 dicesize = 0 timing = 0 duration = 0 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~dart03.itm~ ~override~	  //Dart of Stunning
	SET location = 255
	SET cycle_speed = 180  //cycle speed cant be higher than rgb value on pulse
	SET r = 180
	SET g = 180
	SET b = 0
	LPF CLONE_EFFECT INT_VAR match_opcode = 45 opcode = 50 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location duration = 0 dicenumber = 0 dicesize = 0 timing = 0 probability1 = 100 END // adds character color pulse on successful stun
		LPF CLONE_EFFECT INT_VAR match_opcode = 45 opcode = 215 parameter2 = 0 STR_VAR resource = paralh dicenumber = 0 dicesize = 0 timing = 0 duration = 0 probability1 = 100 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~halb11.itm~ ~override~	  //Ravager +6
	LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
		LPF CLONE_EFFECT INT_VAR match_opcode =13 opcode = 215 parameter2 = 0 STR_VAR resource = dtksilsd timing = 1 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~blun16.itm~ ~override~	//The Sleeper +2
    WRITE_ASCII 0x22 ~FL~ #2	//Changes equipped appearance to Flail
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~bdrobe05.itm~ ~override~	  //Robe of Red Flames
	SET cycle_speed = 144
	SET location = 0
	SET r = 150
	SET b = 0
	SET g = 75
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~sw1h06.itm~ ~override~	  //Varscona +2
	SET cycle_speed = 180
	SET location = 21
	SET r = 0
	SET b = 50
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~sw1h24.itm~ ~override~	  //The Burning Earth +1
	SET r = 230
	SET b = 0
	SET g = 125
	LPF ALTER_EFFECT INT_VAR match_opcode = 8 match_parameter2 = 21 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) END  // change existing solid glow RGB value
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~ax1h06.itm~ ~override~	  //Rhyte's Last Arrow +2
	SET cycle_speed = 180
	SET location = 21
	SET r = 50
	SET b = 0
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dwdart01.itm~ ~override~	  //Drow dart of sleep
	LPF CLONE_EFFECT INT_VAR match_opcode = 39 opcode = 215 parameter2 = 0 STR_VAR resource = cdunhvis dicenumber = 0 dicesize = 0 timing = 0 duration = 0 probability1 = 100 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~slng03.itm~ ~override~	  //Arla's Dragonbane +3
	LPF DELETE_EFFECT INT_VAR match_opcode = 9 END
		SET cycle_speed = 50
		SET location = 16
		SET r = 0
		SET b = 0
		SET g = 150
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter2 = 16 parameter1 = 86 timing = 2 probability1 = 100 END  // changing color index - parameter 2 = location parameter 1 = color index number		
  BUT_ONLY IF_EXISTS

COPY_EXISTING ~bdstaf03.itm~ ~override~	  //Echo of the Fiend +3
    WRITE_ASCII 0x22 ~GS~ #2	//Changes equipped appearance to glowing staff
	WRITE_ASCII 0x3a ~dtkefstf~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkefstf~ #8  //changes melee icon
		SET r = 0
		SET b = 0
		SET g = 50
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 21 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 69 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~bdleat05.itm~ ~override~	  //Dragonscale Armor (Green Scales)
	SET cycle_speed = 255
	SET location = 1
	SET r = 0
	SET b = 0
	SET g = 50
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~bdshld05.itm~ ~override~	  //Dragonscale Shield +3 (Green Scales)
	SET cycle_speed = 255
	SET location = 37
	SET r = 0
	SET b = 0
	SET g = 65
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~bdrobe01.itm~ ~override~	  //Robe of Arcane Aptitude
	SET location = 0
	SET cycle_speed = 20
	SET r = 0
	SET b = 70
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		SET location = 1
		SET cycle_speed = 200
		SET r = 0
		SET b = 60
		SET g = 60
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS


COPY_EXISTING ~bdplat04.itm~ ~override~	  //Rhino Beetle Plate
	SET location = 0
	SET r = 0
	SET b = 0
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~helm07.itm~ ~override~	//Helm of Balduran
	SET location = 49
	SET cycle_speed = 255 
	SET r = 0
	SET b = 10
	SET g = 3
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 49 parameter1 = 68 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 25 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~bdhelm04.itm~ ~override~	 //The Guardian Devil
	SET location = 48
	SET cycle_speed = 255   
	SET r = 100
	SET b = 0
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 49 parameter1 = 0 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 0 END  // changing color index - parameter 2 = location parameter 1 = color index number
  BUT_ONLY IF_EXISTS
  
  
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\///////////////////////////////////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\///////////////////////////////////\\\\\
/////                                                  //////////////////////////////\\\\\
///// IWD:EE Cosmetic Item Enhancement			       //////////////////////////////\\\\\
/////                                                  //////////////////////////////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\///////////////////////////////////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\///////////////////////////////////\\\\\
BEGIN @1001
GROUP @1000
REQUIRE_PREDICATE GAME_IS ~iwdee~ @13
PRINT @11

INCLUDE ~ee_cosmetic_enhancements/lib/functions.tpa~		//adding functions

////////////////////
//Adding Resources//
////////////////////

COPY ~ee_cosmetic_enhancements/bam/iwd~ ~override~
//COPY ~ee_cosmetic_enhancements/eff~ ~override~
COPY ~ee_cosmetic_enhancements/vvc/iwd~ ~override~
//COPY ~ee_cosmetic_enhancements/wav~ ~override~
//COPY ~ee_cosmetic_enhancements/itm~ ~override~

///////////////////////
// Adding Projectiles//
///////////////////////

ADD_PROJECTILE ~ee_cosmetic_enhancements/pro/dtkaciar.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/pro/dtkfbolt.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/pro/dtkltblt.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/pro/dtkpyblt.pro~

/////////////////////////////////////////////////////////
//Modifying existing spells to account for item changes//
/////////////////////////////////////////////////////////

COPY_EXISTING ~vorpal.spl~ ~override~		//Vorpal Hit from Solemn Duty
	LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
		LPF CLONE_EFFECT INT_VAR match_opcode =13 opcode = 215 parameter2 = 0 STR_VAR resource = slivinh probability1 = 100 timing = 1 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
BUT_ONLY IF_EXISTS

COPY_EXISTING ~sppr613.spl~ ~override~		//Physical mirror - altering to add new projectiles to bounce
	SET projectile = EVAL "%dtkaciar%"
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
		SET projectile = EVAL "%dtkfbolt%"
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
			SET projectile = EVAL "%dtkltblt%"
			LPF ADD_SPELL_EFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
				SET projectile = EVAL "%dtkpyblt%"
				LPF ADD_SPELL_EFFECT INT_VAR opcode = 197 target = 1 parameter2 = (projectile - 1) probability1 = 100 timing = 0 duration = 54 resist_dispel = 3 END  //adds a new projectile to be relfected by physical mirror effect
BUT_ONLY IF_EXISTS
////////////////////////////
//Modifying Existing Items//
////////////////////////////
COPY_EXISTING ~nymshld.itm~ ~override~		//Nym's Rhino Beetle Shield +2
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 34 parameter1 = 206 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~mystery.itm~ ~override~		//Mystery of the Dead +3
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 34 parameter1 = 254 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~cdmyst.itm~ ~override~		//Mystery of the Dead +3 (upgraded)
	SET location = 34
	SET cycle_speed = 90
	SET r = 30
	SET b = 30
	SET g = 30
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 34 parameter1 = 254 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~dntshd1.itm~ ~override~		//Sundered Shield of Tiernon +1
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 37 parameter1 = 243 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~dntshd2.itm~ ~override~		//Sundered Shield of Tiernon +2
	SET location = 37
	SET cycle_speed = 200
	SET r = 30
	SET b = 0
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 37 parameter1 = 243 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~stout.itm~ ~override~		//Stoutward +1
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 32 parameter1 = 90 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~cdstout.itm~ ~override~		//Stoutward +1 (upgraded)
	SET location = 32
	SET cycle_speed = 200
	SET r = 0
	SET b = 150
	SET g = 90
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 32 parameter1 = 90 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~waukeen.itm~ ~override~		//Waukeen's Defender +2
	SET location = 34
	SET cycle_speed = 144
	SET r = 1
	SET b = 1
	SET g = 1
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 34 parameter1 = 80 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~shldbch.itm~ ~override~		//The Bitch-Queen's Envoy +2
	SET location = 32
	SET r = 0
	SET b = 60
	SET g = 60
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~revenan.itm~ ~override~		//Shield of the Revenant +2
	SET location = 34
	SET cycle_speed = 180
	SET r = 1
	SET b = 1
	SET g = 1
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~helmla.itm~ ~override~		//Blessed Helm of Lathander
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 24 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 79 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~helmded.itm~ ~override~		//Dead Man's Face
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 91 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 226 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 43  parameter2 = 52 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~helmct.itm~ ~override~		//Chautog's Thinker
    WRITE_ASCII 0x22 ~J9~ #2	  //Changes equipped appearance  
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 0 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 171 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 52 parameter1 = 0 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 255  parameter2 = 50 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~cdrelm.itm~ ~override~		//Remorhaz Shell Helm
	WRITE_ASCII 0x22 ~J3~ #2	  //Changes equipped appearance (mask with horns)
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 60 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~helmpat.itm~ ~override~		//Patriot's Helm
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 109 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~helmsh.itm~ ~override~		//Helm of Shouting
    WRITE_ASCII 0x22 ~H1~ #2	//Changes equipped appearance
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 53 parameter1 = 27 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 48 parameter1 = 85 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~helmsun.itm~ ~override~		//Sune's Laurel of Favor
	LPF DELETE_EFFECT INT_VAR match_opcode = 7 END
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 34  parameter2 = 52 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~shrobe.itm~ ~override~		//Shadowed Robe
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 206  parameter2 = 2 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 209  parameter2 = 1 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~vexed.itm~ ~override~		//Vexed Armor
	SET location = 0
	SET cycle_speed = 90
	SET r = 0
	SET b = 0
	SET g = 100
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 32 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 211 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 205 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 136  parameter2 = 2 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 220  parameter2 = 1 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~vexed2.itm~ ~override~		//Vexed Armor (first upgrade)
	SET location = 0
	SET cycle_speed = 90
	SET r = 0
	SET b = 0
	SET g = 100
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 32 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 211 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 205 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 136  parameter2 = 2 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 220  parameter2 = 1 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~vexed3.itm~ ~override~		//Vexed Armor (second upgrade)
	SET location = 0
	SET cycle_speed = 90
	SET r = 0
	SET b = 0
	SET g = 100
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 32 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 211 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 205 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 136  parameter2 = 2 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 220  parameter2 = 1 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~umhulk.itm~ ~override~		//Umber Hulk Plate
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 101 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 1 parameter1 = 94 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~king.itm~ ~override~		//Winter King's Plate
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 31 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 18 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 105  parameter2 = 2 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 105  parameter2 = 1 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~usltr4a.itm~ ~override~		//Studded Leather of Resistance +3
	WRITE_ASCII 0x3a ~dtkarm4~ #8  //changes inventory icon
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 29 parameter2 = 1 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 27 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 238 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 136  parameter2 = 2 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~usltr5a.itm~ ~override~		//Shadowed Studded Leather +4
	WRITE_ASCII 0x3a ~dtkarm1~ #8  //changes inventory icon
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 136  parameter2 = 2 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 27 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 183 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 94  parameter2 = 1 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~shplate.itm~ ~override~		//Shadowed Plate +3
	WRITE_ASCII 0x3a ~dtkarm7~ #8  //changes inventory icon
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 29 parameter2 = 1 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 41 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 41 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ogi.itm~ ~override~		//Ogi-Luc's Great Robe
    WRITE_ASCII 0x22 ~2W~ #2	//Changes equipped appearance
		SET location = 0
		SET cycle_speed = 30
		SET r = 10
		SET b = 10
		SET g = 10
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET location = 1
			SET cycle_speed = 200
			SET r = 0
			SET b = 180
			SET g = 60
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 82 parameter2 = 1 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 80 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 79 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 =58  parameter2 = 2 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~presrob.itm~ ~override~		//Necromancer's Robe
	WRITE_ASCII 0x3a ~iclck17~ #8  //changes inventory icon
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 255 parameter2 = 1 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 67 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 255 END  // changing color index - parameter 2 = location parameter 1 = color index number
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 =66  parameter2 = 2 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~watcher.itm~ ~override~		//Robes of the Watcher
	WRITE_ASCII 0x3a ~dtkvecna~ #8  //changes inventory icon
		SET location = 0
		SET cycle_speed = 20
		SET r = 65
		SET b = 0
		SET g = 156
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET location = 1
			SET cycle_speed = 200
			SET r = 95
			SET b = 204
			SET g = 0
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 104 parameter2 = 1 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 69 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 4 parameter1 = 81 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 =66  parameter2 = 2 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS


COPY_EXISTING ~ogien.itm~ ~override~		//Ogien's Scale +4
	SET cycle_speed = 120
	SET location = 0
	SET r = 90
	SET b = 0
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 6 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 0 parameter1 = 247 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~dragarm.itm~ ~override~		//Black Dragon Scale
	LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 254 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~iswarm.itm~ ~override~		//Black Swan Armor +2(NPC)
		SET cycle_speed = 90
		SET location = 0
		SET r = 0
		SET b = 170
		SET g = 60
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 190 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~swanarm.itm~ ~override~		//Black Swan Armor +2
		SET cycle_speed = 90
		SET location = 0
		SET r = 0
		SET b = 170
		SET g = 60
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 5 parameter1 = 190 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~blood.itm~ ~override~		//Bathed-in-Blood +4
		SET cycle_speed = 90
		SET location = 0
		SET r = 150
		SET b = 0
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~cdyoung.itm~ ~override~		//Young Rage +5(soothed)
		SET cycle_speed = 45
		SET location = 16
		SET r = 90
		SET b = 0
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 70 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~young.itm~ ~override~		//Young Rage +5
		SET cycle_speed = 45
		SET location = 16
		SET r = 90
		SET b = 0
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 70 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~u2hax5a.itm~ ~override~		//Foe's Fate +4
		SET cycle_speed = 45
		SET location = 16
		SET r = 0
		SET b = 90
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 90 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 255 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 31 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~u1hax4b.itm~ ~override~		//Benorg's Truth
	WRITE_ASCII 0x3a ~dtkaxe8~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkaxe8~ #8  //changes melee icon
		SET cycle_speed = 45
		SET location = 16
		SET r = 90
		SET b = 0
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 90 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 255 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 70 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~u1hax4a.itm~ ~override~		//Battle Axe +3: Fatigue
	WRITE_ASCII 0x3a ~dtkaxe3~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkaxe3~ #8  //changes melee icon
		SET cycle_speed = 45
		SET location = 16
		SET r = 0
		SET b = 0
		SET g = 90
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 0 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~axemino.itm~ ~override~		//Axe of the Minotaur Lord +4
		SET cycle_speed = 45
		SET location = 21
		SET r = 90
		SET b = 0
		SET g = 90
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 99 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 24 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~sw1h51.itm~ ~override~		//Solemn Duty +3
		SET cycle_speed = 255
		SET location = 21
		SET r = 150
		SET b = 0
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~zzd5woh.itm~ ~override~		//Wind of Heaven +4
		SET cycle_speed = 45
		SET location = 21
		SET r = 0
		SET b = 0
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET cycle_speed = 45
			SET location = 20
			SET r = 0
			SET b = 0
			SET g = 0
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				SET cycle_speed = 45
				SET location = 16
				SET r = 0
				SET b = 0
				SET g = 0
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~utswd5b.itm~ ~override~		//Two-Handed Sword +4: Life Giver
	WRITE_ASCII 0x3a ~dtk2swd6~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtk2swd6~ #8  //changes melee icon
		SET cycle_speed = 255
		SET location = 21
		SET r = 0
		SET b = 0
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 102 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 243 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 172 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~utswd4b.itm~ ~override~		//Two-Handed Sword +3: Bane
	WRITE_ASCII 0x3a ~dtk2swd9~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtk2swd9~ #8  //changes melee icon
		SET cycle_speed = 255
		SET location = 21
		SET r = 0
		SET b = 0
		SET g = 150
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET cycle_speed = 1
			SET location = 16
			SET r = 0
			SET b = 0
			SET g = 90
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 104 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 37 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~utswd5a.itm~ ~override~		//Static Two-Handed Sword +4
	WRITE_ASCII 0x3a ~dtk2swd3~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtk2swd3~ #8  //changes melee icon
		SET cycle_speed = 45
		SET location = 21
		SET r = 90
		SET b = 0
		SET g = 90
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET cycle_speed = 1
			SET location = 16
			SET r = 0
			SET b = 60
			SET g = 0
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 225 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 250 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 220 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ulswd5a.itm~ ~override~		//Long Sword of Action +4
	WRITE_ASCII 0x3a ~dtkswd9~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkswd9~ #8  //changes melee icon
		SET cycle_speed = 45
		SET location = 21
		SET r = 90
		SET b = 0
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET cycle_speed = 1
			SET location = 16
			SET r = 90
			SET b = 0
			SET g = 0
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 27 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 93 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 96 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~jhoswd2.itm~ ~override~		//Restored Blade of Aihonen +5
	WRITE_ASCII 0x3a ~ijhoswd3~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~ijhoswd3~ #8  //changes melee icon
		SET cycle_speed = 45
		SET location = 21
		SET r = 60
		SET b = 60
		SET g = 60
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET cycle_speed = 45
			SET location = 16
			SET r = 60
			SET b = 60
			SET g = 60
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 79 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 80 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 222 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~jhoswd3.itm~ ~override~		//Singing Blade of Aihonen +5
    WRITE_ASCII 0x22 ~FS~ #2	//Changes equipped appearance to flaming sword
		SET cycle_speed = 1
		SET location = 21
		SET r = 60
		SET b = 60
		SET g = 60
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET cycle_speed = 1
			SET location = 16
			SET r = 60
			SET b = 60
			SET g = 60
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 79 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 80 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 222 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ulswd4a.itm~ ~override~		//Hold Fast +3
	WRITE_ASCII 0x3a ~dtkswd6~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkswd6~ #8  //changes melee icon
		SET cycle_speed = 120
		SET location = 21
		SET r = 30
		SET b = 30
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET cycle_speed = 120
			SET location = 16
			SET r = 0
			SET b = 10
			SET g = 10
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 222 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 99 END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 96 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ulswd4b.itm~ ~override~		//Long Sword +3: Enforcer
	WRITE_ASCII 0x3a ~dtksswd1~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtksswd1~ #8  //changes melee icon
		SET cycle_speed = 180
		SET location = 21
		SET r = 100
		SET b = 0
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 108 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 33 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 109 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~talongf.itm~ ~override~		//Talon of the Gloomfrost +4
	SET cycle_speed = 1
	SET location = 21
	SET r = 0
	SET b = 150
	SET g = 50
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		SET r = 1
		SET b = 1
		SET g = 1
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 16 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 82 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 222 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 82 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~kissgf.itm~ ~override~		//Kiss of the Gloomfrost +4
	SET cycle_speed = 1
	SET location = 21
	SET r = 0
	SET b = 150
	SET g = 50
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		SET r = 1
		SET b = 1
		SET g = 1
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 16 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 82 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 222 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 82 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~handgf.itm~ ~override~		//Hand of the Gloomfrost +4
	SET cycle_speed = 1
	SET location = 21
	SET r = 0
	SET b = 150
	SET g = 50
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location  timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		SET r = 1
		SET b = 1
		SET g = 1
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 16 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 82 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 222 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 82 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ulswd3a.itm~ ~override~		//Flaming Long Sword +2
	WRITE_ASCII 0x3a ~dtkswd10~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkswd10~ #8  //changes melee icon
		LPF DELETE_EFFECT INT_VAR match_opcode = 9 END
			SET location = 21
			SET r = 180
			SET b = 0
			SET g = 100
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				SET location = 16
				SET r = 232
				SET b = 0
				SET g = 177
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
					SET location = 20
					SET r = 232
					SET b = 0
					SET g = 177
					LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~amaunat.itm~ ~override~		//Amaunator's Legacy +3
	SET location = 21
	SET cycle_speed = 1
	SET r = 60
	SET b = 0
	SET g = 60
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 225 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 47 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 67 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ubswd2b.itm~ ~override~		//Flaming Bastard Sword +1
	WRITE_ASCII 0x3a ~dtkswd2~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkswd2~ #8  //changes melee icon
		LPF DELETE_EFFECT INT_VAR match_opcode = 9 END
			SET location = 21
			SET r = 180
			SET b = 0
			SET g = 100
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				SET location = 16
				SET r = 232
				SET b = 0
				SET g = 177
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
					SET location = 20
					SET r = 232
					SET b = 0
					SET g = 177
					LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ubswd4b.itm~ ~override~		//Bastard Sword of Greater Phasing +3
	WRITE_ASCII 0x3a ~dtkswd8~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkswd8~ #8  //changes melee icon
		SET location = 21
		SET cycle_speed = 1
		SET r = 10
		SET b = 10
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 105 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 199 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 199 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ubswd5a.itm~ ~override~		//Cancerous Bastard Sword +4
	WRITE_ASCII 0x3a ~dtkswd3~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkswd3~ #8  //changes melee icon
		SET location = 21
		SET cycle_speed = 60
		SET r = 15
		SET b = 0
		SET g = 90
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 222 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 69 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 69 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ubswd4a.itm~ ~override~		//Bastard Sword +3: Defender
	WRITE_ASCII 0x3a ~dtkswd5~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkswd5~ #8  //changes melee icon
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 105 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 100 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 100 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ubswd5b.itm~ ~override~		//Bastard Sword +3: Incinerator
	WRITE_ASCII 0x3a ~dtkswd7~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkswd7~ #8  //changes melee icon
		LPF DELETE_EFFECT INT_VAR match_opcode = 9 END
			SET location = 21
			SET r = 232
			SET b = 0
			SET g = 125
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				SET location = 16
				SET r = 232
				SET b = 0
				SET g = 177
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
					SET location = 20
					SET r = 232
					SET b = 0
					SET g = 177
					LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
						LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
						LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
						LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~reaver.itm~ ~override~		//The Snow Maiden's Reaver +2
	SET r = 50
	SET b = 60
	SET g = 60
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 21 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
		SET r = 0
		SET b = 60
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 20 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
			SET r = 0
			SET b = 60
			SET g = 0
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 16 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 82  END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 82  END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 222  END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~quost.itm~ ~override~		//Quost's Staff of The Elements +4
	WRITE_ASCII 0x22 ~GS~ #2	//Changes equipped appearance to glowing staff
		SET r = 0
		SET b = 60
		SET g = 10
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 21 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 21 parameter1 = 68 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~bdsumst.itm~ ~override~		//The Summoner's Staff +3
    WRITE_ASCII 0x22 ~GS~ #2	//Changes equipped appearance to glowing staff
	WRITE_ASCII 0x3a ~dtkefstf~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkefstf~ #8  //changes melee icon
		SET r = 0
		SET b = 0
		SET g = 50
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 21 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 21 parameter1 = 69 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~bdsumstx.itm~ ~override~		//The Summoner's Staff +3(expended)
    WRITE_ASCII 0x22 ~GS~ #2	//Changes equipped appearance to glowing staff
	WRITE_ASCII 0x3a ~dtkefstf~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkefstf~ #8  //changes melee icon
		SET r = 0
		SET b = 0
		SET g = 50
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 21 timing = 2 probability1 = 100 END // This adds a solid glow effect in the desired location with desired RBG values, probability, etc..
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 parameter2 = 21 parameter1 = 69 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~usswd5a.itm~ ~override~		//Short Sword of Health +4
	WRITE_ASCII 0x3a ~dtksswd4~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtksswd4~ #8  //changes melee icon
		SET location = 21
		SET r = 0
		SET b = 0
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 222  END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 224  END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 224  END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~usswd5b.itm~ ~override~		//Short Sword +4: Hammer
	WRITE_ASCII 0x3a ~dtksswd8~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtksswd8~ #8  //changes melee icon
		SET location = 21
		SET r = 0
		SET b = 0
		SET g = 30
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 86  END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 218  END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 218  END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~usswd4b.itm~ ~override~		//Static Short Sword +3
	WRITE_ASCII 0x3a ~dtksswd2~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtksswd2~ #8  //changes melee icon
		SET location = 21
		SET cycle_speed = 60
		SET r = 60
		SET b = 0
		SET g = 60
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET location = 16
			SET cycle_speed = 60
			SET r = 60
			SET b = 0
			SET g = 60
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 79  END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 207  END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 207  END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~usswd4a.itm~ ~override~		//Short Sword of Shadows +3
	WRITE_ASCII 0x3a ~dtksswd3~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtksswd3~ #8  //changes melee icon
		SET location = 21
		SET cycle_speed = 60
		SET r = 60
		SET b = 60
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET location = 16
			SET cycle_speed = 60
			SET r = 60
			SET b = 60
			SET g = 0
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 6  END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 76  END  // changing color index - parameter 2 = location parameter 1 = color index number
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 29  END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~usswd2a.itm~ ~override~		//Flaming Short Sword +1
	WRITE_ASCII 0x3a ~dtksswd6~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtksswd6~ #8  //changes melee icon
		SET location = 21
		SET r = 30
		SET b = 0
		SET g = 15
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET location = 16
			SET r = 30
			SET b = 0
			SET g = 15
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				SET location = 20
				SET r = 30
				SET b = 0
				SET g = 15
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
					LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 80  END  // changing color index - parameter 2 = location parameter 1 = color index number
					LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 80  END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~umstr5a.itm~ ~override~		//Morning Star of Action +4
	WRITE_ASCII 0x3a ~dtkmstr1~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkmstr1~ #8  //changes melee icon
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 215  END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 2  END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~umstr5b.itm~ ~override~		//Morning Star +4:Defender
	WRITE_ASCII 0x3a ~dtkmstr2~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkmstr2~ #8  //changes melee icon
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 255  END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 101  END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~giving.itm~ ~override~		//The Giving Star +3
	SET location = 21
	SET cycle_speed = 45
	SET r = 60
	SET b = 0
	SET g = 60
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~pest.itm~ ~override~		//Pestilent Dawn +4
	SET location = 21
	SET r = 5
	SET b = 0
	SET g = 30
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 252 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~debian.itm~ ~override~		//Debian's Rod of Smiting +3
	SET location = 21
	SET cycle_speed = 45
	SET r = 20
	SET b = 0
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~fistgf.itm~ ~override~		//Fist of the Gloomfrost +4
	SET location = 21
	SET r = 0
	SET b = 0
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~bloodgf.itm~ ~override~		//Blood of the Gloomfrost +4
	SET location = 21
	SET r = 0
	SET b = 0
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~u2ham5a.itm~ ~override~		//Demon's Breath +3
	WRITE_ASCII 0x3a ~dtkhamm1~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkhamm1~ #8  //changes melee icon
		SET location = 21
		SET r = 50
		SET b = 0
		SET g = 25
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~uhalb5a.itm~ ~override~		//Great Halberd +4
	WRITE_ASCII 0x3a ~dtkhalb2~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkhalb2~ #8  //changes melee icon
		SET location = 16
		SET cycle_speed = 90
		SET r = 20
		SET b = 0
		SET g = 84
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			SET location = 20
			SET r = 0
			SET b = 20
			SET g = 12
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 254 END  // changing color index - parameter 2 = location parameter 1 = color index number
					LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 206 END  // changing color index - parameter 2 = location parameter 1 = color index number
						LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 86 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~uhalb4b.itm~ ~override~		//Star-Forged Halberd +3
	WRITE_ASCII 0x3a ~dtkhalb6~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkhalb6~ #8  //changes melee icon
BUT_ONLY IF_EXISTS

COPY_EXISTING ~uhalb4a.itm~ ~override~		//Doom Halberd +3
	WRITE_ASCII 0x3a ~dtkhalb4~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkhalb4~ #8  //changes melee icon
BUT_ONLY IF_EXISTS

COPY_EXISTING ~uflal4a.itm~ ~override~		//Fire Flail +3
	WRITE_ASCII 0x3a ~dtkflai1~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkflai1~ #8  //changes melee icon
    WRITE_ASCII 0x22 ~F0~ #2	//Changes equipped appearance
		SET location = 21
		SET cycle_speed = 120
		SET r = 50
		SET b = 0
		SET g = 10
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 147 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~uflal5a.itm~ ~override~		//Shocking Flail +4
	WRITE_ASCII 0x3a ~dtkflai2~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkflai2~ #8  //changes melee icon
    WRITE_ASCII 0x22 ~F0~ #2	//Changes equipped appearance
		SET location = 21
		SET cycle_speed = 120
		SET r = 0
		SET b = 50
		SET g = 35
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 218 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~flailsk.itm~ ~override~		//Skullflail +4
    WRITE_ASCII 0x22 ~F3~ #2	//Changes equipped appearance
		SET location = 21
		SET r = 0
		SET b = 0
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 24 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 222 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~fanggf.itm~ ~override~		//Fang of the Gloomfrost +4
		SET location = 21
		SET r = 0
		SET b = 0
		SET g = 60
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 147 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~firekis.itm~ ~override~		//Fire Kiss +3
		SET location = 21
		SET cycle_speed = 90   
		SET r = 100
		SET b = 0
		SET g = 50
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 212 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 186 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~udagg5a.itm~ ~override~		//Mage Dagger +4
	WRITE_ASCII 0x3a ~dtkdagg2~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkdagg2~ #8  //changes melee icon
		SET location = 21
		SET cycle_speed = 90   
		SET r = 20
		SET b = 0
		SET g = 50
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 68 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 96 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~udagg4a.itm~ ~override~		//Chaos Dagger +3
	WRITE_ASCII 0x3a ~dtkdagg1~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkdagg1~ #8  //changes melee icon
		SET location = 21
		SET cycle_speed = 90   
		SET r = 20
		SET b = 0
		SET g = 50
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 69 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 66 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~presdag.itm~ ~override~		//Presio's Dagger +2
	WRITE_ASCII 0x3a ~dtkdagg1~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkdagg1~ #8  //changes melee icon
		SET location = 21
		SET cycle_speed = 90   
		SET r = 20
		SET b = 0
		SET g = 50
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 69 END  // changing color index - parameter 2 = location parameter 1 = color index number
			LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 66 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~cdxbowbm.itm~ ~override~		//Bren Muller's Crossbow (upgraded)
		SET location = 20
		SET cycle_speed = 255   
		SET r = 25
		SET b = 25
		SET g = 0
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 31 parameter2 = 16 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~daisy.itm~ ~override~		//Daisy +3
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 221 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 80 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 217 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ulxbw3a.itm~ ~override~		//Light Crossbow of Defense +2
	WRITE_ASCII 0x3a ~dtkxbow7~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkxbow7~ #8  //changes melee icon
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 252 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 252 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 148 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~uhxbw3a.itm~ ~override~		//Heavy Crossbow of Defense +2
	WRITE_ASCII 0x3a ~dtkxbow3~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkxbow3~ #8  //changes melee icon
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 70 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 66 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 70 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~uhxbw3b.itm~ ~override~		//Heavy Crossbow of Speed +2
	WRITE_ASCII 0x3a ~dtkxbow6~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkxbow6~ #8  //changes melee icon
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 99 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 19 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 97 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ulxbw3b.itm~ ~override~		//Light Crossbow of Speed +2
	WRITE_ASCII 0x3a ~dtkxbow2~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkxbow2~ #8  //changes melee icon
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 49 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 186 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 5 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ulxbw5a.itm~ ~override~		//Repeating Light Crossbow +3
	WRITE_ASCII 0x3a ~dtkxbow5~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkxbow5~ #8  //changes melee icon
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 41 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 61 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 5 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~uhxbw5a.itm~ ~override~		//Repeating Heavy Crossbow +3
	WRITE_ASCII 0x3a ~dtkxbow4~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkxbow4~ #8  //changes melee icon
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 201 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 112 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 222 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS
	
COPY_EXISTING ~uhxbw4a.itm~ ~override~		//Reinforced Heavy Crossbow +4
	WRITE_ASCII 0x3a ~dtkxbow1~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkxbow1~ #8  //changes melee icon
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 222 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 186 END  // changing color index - parameter 2 = location parameter 1 = color index number
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 5 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~trnbolt.itm~ ~override~		//Tranquil Bolt +1
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkpyblt%" END
BUT_ONLY IF_EXISTS

COPY_EXISTING ~bolt03.itm~ ~override~		//Bolt of Lightning +1
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkltblt%" END
		SET location = 16
		SET cycle_speed = 45   
		SET r = 0
		SET b = 50
		SET g = 25
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 31 parameter2 = 16 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS
	
COPY_EXISTING ~sekolah.itm~ ~override~		//Bolt of Sekolah's Fire
	WRITE_ASCII 0x3a ~dtkbltsk~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkbltsk~ #8  //changes melee icon
		LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkfbolt%" END
			SET location = 16
			SET cycle_speed = 45   
			SET r = 70
			SET b = 0
			SET g = 30
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 214 parameter2 = 16 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ubull4a.itm~ ~override~	 //Bullets of Fire +2
	SAY DESC @2001
		SET location = 16
		SET cycle_speed = 45   
		SET r = 70
		SET b = 0
		SET g = 30
		LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
			LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 7 target = 1 parameter1 = 214 parameter2 = 16 timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~force.itm~ ~override~	 //Force Bullet +2
	SET location = 16
	SET r = 50
	SET b = 50
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~arow04.itm~ ~override~		//Acid Arrow +1
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkaciar%" END
		LPF CLONE_EFFECT INT_VAR match_opcode = 12 match_parameter2 = 65536 opcode = 215 parameter2 = 1 STR_VAR resource = shacid dicenumber = 0 dicesize = 0 timing = 0 END // adds hit visual effect in proper location by cloning existing hit effect and changing it
BUT_ONLY IF_EXISTS

COPY_EXISTING ~blckbow.itm~ ~override~	 //The Black Bow +3
	WRITE_ASCII 0x3a ~dtkbkbow~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkbkbow~ #8  //changes melee icon
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 136 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ulbow5a.itm~ ~override~	 //Longbow +4: Hammer
	WRITE_ASCII 0x3a ~dtkbwham~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkbwham~ #8  //changes melee icon
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 94 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ulbow4a.itm~ ~override~	 //Longbow +3: Repeater
	WRITE_ASCII 0x3a ~dtkrpbow~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkrpbow~ #8  //changes melee icon
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 81 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~storm.itm~ ~override~	 //Storm Bow +2
	SET location = 20
	SET r = 50
	SET b = 50
	SET g = 0
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
BUT_ONLY IF_EXISTS

COPY_EXISTING ~sbowebu.itm~ ~override~	 //Shortbow of Ebullience
	SET location = 20
	SET cycle_speed = 255   
	SET r = 100
	SET b = 0
	SET g = 30
	LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 9 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
		LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 216 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS

COPY_EXISTING ~ulswd5b.itm~ ~override~	 //Bhaal's Fire +3
	WRITE_ASCII 0x3a ~dtkbhaal~ #8  //changes inventory icon
	WRITE_ASCII 0x76 ~dtkbhaal~ #8  //changes melee icon
		SAY DESC @2000
			SET location = 21
			SET r = 232
			SET b = 0
			SET g = 177
			LPF ALTER_EFFECT INT_VAR match_opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
				SET location = 16
				SET r = 232
				SET b = 0
				SET g = 177
				LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
					SET location = 20
					SET r = 232
					SET b = 0
					SET g = 177
					LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 8 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = location timing = 2 probability1 = 100 END // This adds a pulse glow effect in the desired location with desired RBG values, probability, etc..
						LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 21 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
						LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 20 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
						LPF ALTER_EFFECT INT_VAR match_opcode = 7 match_parameter2 = 16 parameter1 = 214 END  // changing color index - parameter 2 = location parameter 1 = color index number
BUT_ONLY IF_EXISTS



/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\////////////
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\////////////
/////                                                  			   \\\\\
///// IWD:EE add Bhaal's Fire and Benorg's Truth to loot tables	   \\\\\
/////                                                              /////
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\////////////
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\////////////
BEGIN @1002
GROUP @1000
REQUIRE_PREDICATE GAME_IS ~iwdee~ @13
PRINT @11

INCLUDE ~ee_cosmetic_enhancements/lib/functions.tpa~		//adding functions

COPY_EXISTING ~rndtres.2da~ ~override~
	SET_2DA_ENTRY 71 4 21 ~U1HAX4B~
	SET_2DA_ENTRY 56 4 21 ~ULSWD5B~
BUT_ONLY IF_EXISTS


/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////                                                  \\\\\
///// Remove Annoying Item Effects				       \\\\\
/////                                                  \\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
BEGIN @1003
GROUP @1000
REQUIRE_PREDICATE NOT GAME_IS ~iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @14
PRINT @11


 
COPY_EXISTING_REGEXP GLOB ~^.+\.itm$~ ~override~		//remove blur, shadowed, physical mirror, spell trap visual effects from items only ie: claw of kazgoroth, relfection shield, cloak of mirroring
	READ_BYTE 0x18 flags
		PATCH_IF ((flags & BIT2) = BIT2) BEGIN // don't care if not droppable
			LPF DELETE_EFFECT INT_VAR silent = 1 check_headers = 0 match_opcode = 65 match_timing = 2 END // only delete equipping blur effects
				LPF DELETE_EFFECT INT_VAR silent = 1 check_headers = 0 match_opcode = 66 match_timing = 2 END // only delete equipping blur effects
					LPF CLONE_EFFECT INT_VAR silent = 1 check_headers = 0 match_opcode = 197 match_timing = 2 opcode = 291 END  // prevent visual effect for phsyical mirror from playing on character if item has them only while equipped (reflection shield)
						LPF CLONE_EFFECT INT_VAR silent = 1 check_headers = 0 match_opcode = 205 match_timing = 2 opcode = 291 END  // prevent visual effect for spell trap from playing on character if item has them only while equipped (cloak of mirroring)
			END
			BUT_ONLY

/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////                                                  \\\\\
///// Remove Pulse Glows from armor, helms, shields    \\\\\
/////                                                  \\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
BEGIN @1004
GROUP @1000
REQUIRE_PREDICATE NOT GAME_IS ~iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @14
PRINT @11


 
COPY_EXISTING_REGEXP GLOB ~^.+\.itm$~ ~override~		//remove blur, shadowed, physical mirror, spell trap visual effects from items only ie: claw of kazgoroth, relfection shield, cloak of mirroring
	READ_BYTE 0x1c category
		PATCH_IF ((category = 2) OR (category = 7) OR (category = 12) OR (category = 41) OR (category = 47) OR (category = 49) OR (category = 53) OR (category = 60) OR (category = 61) OR (category = 62) OR (category = 63) OR (category = 64) OR (category = 65) OR (category = 66) OR (category = 67) OR (category = 68)) BEGIN // select only armors that are droppable
			LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 9 END 
			END
			BUT_ONLY		
  
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\///////////////////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\///////////////////\\\\\
/////                                                                \\\\\
///// Enhanced visual on-hit effects (fire, cold, acid, electricity) \\\\\
/////                                                                \\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\///////////////////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\//////////////\\\\

///////////////////////////////////////////////////
//IWD-style hit effects						 //////
///////////////////////////////////////////////////


BEGIN @1101
GROUP @1100
REQUIRE_PREDICATE NOT GAME_IS ~iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @14
SUBCOMPONENT @1100
PRINT @11

COPY ~ee_cosmetic_enhancements/hiteff/bam~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/vvc~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/wav~ ~override~

COPY_EXISTING ~dmgtypes.2da~ ~override~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 2 2 2  ~dtkfirhh~
	SET_2DA_ENTRY 2 3 2  ~dtkfirhl~
		SET_2DA_ENTRY 7 1 2  ~*~
		SET_2DA_ENTRY 7 2 2  ~dtkelchh~
		SET_2DA_ENTRY 7 3 2  ~dtkelchl~
			SET_2DA_ENTRY 8 1 2  ~*~
			SET_2DA_ENTRY 8 2 2  ~dtkcldhh~
			SET_2DA_ENTRY 8 3 2  ~dtkcldhl~
				SET_2DA_ENTRY 10 1 2  ~*~
				SET_2DA_ENTRY 10 2 2  ~dtkacihh~
 PRETTY_PRINT_2DA
 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Modifying items/spells to account for hit visual effect changes (includes SoD2BG2EE IU mod items/spells if they are present)      //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

COPY_EXISTING ~dtkswd01.itm~ ~override~		//Tongue of Burning Acid +4
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkswd1a.itm~ ~override~		//Tongue of Burning Acid +5
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkbol1.itm~ ~override~		//Bolt of Frostfire +2
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (low) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS
	
	COPY_EXISTING ~dtkstaf1.itm~ ~override~		//Uncursed Staff of Antipode
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (high) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS

	
COPY_EXISTING_REGEXP GLOB ~^.+\.itm$~ ~override~		//remove old hit visual effects to prevent conflicts
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~ITM ~ = 1) BEGIN
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
			LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do instant poison damage
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do poison over time damage
				END
				BUT_ONLY 
				
COPY_EXISTING_REGEXP GLOB ~^.+\.spl$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~SPL ~ = 1) BEGIN
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do instant poison damage
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do poison over time damage
		END
		BUT_ONLY 
		
///////////////////////////////////////////////////
//Enhanced BG-style hit effects              //////
///////////////////////////////////////////////////

BEGIN @1102
REQUIRE_PREDICATE NOT GAME_IS ~iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @14
SUBCOMPONENT @1100
PRINT @11

COPY ~ee_cosmetic_enhancements/hiteff/bam~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/vvc~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/wav~ ~override~

COPY_EXISTING ~dmgtypes.2da~ ~override~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 2 2 2  ~dtkfirh2~
	SET_2DA_ENTRY 2 3 2  ~spburn~
		SET_2DA_ENTRY 7 1 2  ~*~
		SET_2DA_ENTRY 7 2 2  ~dtkelch2~
		SET_2DA_ENTRY 7 3 2  ~spsparks~
			SET_2DA_ENTRY 8 1 2  ~*~
			SET_2DA_ENTRY 8 2 2  ~dtkcldh2~
			SET_2DA_ENTRY 8 3 2  ~dtkcldl2~
				SET_2DA_ENTRY 10 1 2  ~*~
				SET_2DA_ENTRY 10 2 2  ~dtkacih2~
 PRETTY_PRINT_2DA
 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Modifying items/spells to account for hit visual effect changes (includes SoD2BG2EE IU mod items/spells if they are present)      //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

COPY_EXISTING ~dtkswd01.itm~ ~override~		//Tongue of Burning Acid +4
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkswd1a.itm~ ~override~		//Tongue of Burning Acid +5
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkbol1.itm~ ~override~		//Bolt of Frostfire +2
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (low) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS
	
	COPY_EXISTING ~dtkstaf1.itm~ ~override~		//Uncursed Staff of Antipode
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (high) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS

COPY_EXISTING_REGEXP GLOB ~^.+\.itm$~ ~override~		//remove old hit visual effects to prevent conflicts
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~ITM ~ = 1) BEGIN
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
			LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do instant poison damage
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do poison over time damage
				END
				BUT_ONLY 
				
COPY_EXISTING_REGEXP GLOB ~^.+\.spl$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~SPL ~ = 1) BEGIN
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do instant poison damage
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do poison over time damage
		END
		BUT_ONLY	
	
///////////////////////////////////////////////////
//IWD-style visual, BG-style sounds          //////
///////////////////////////////////////////////////

BEGIN @1103
REQUIRE_PREDICATE NOT GAME_IS ~iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @14
SUBCOMPONENT @1100
PRINT @11

COPY ~ee_cosmetic_enhancements/hiteff/bam~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/vvc~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/wav~ ~override~

COPY_EXISTING ~dmgtypes.2da~ ~override~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 2 2 2  ~dtkfirh3~
	SET_2DA_ENTRY 2 3 2  ~dtkfirhl~
		SET_2DA_ENTRY 7 1 2  ~*~
		SET_2DA_ENTRY 7 2 2  ~dtkelch3~
		SET_2DA_ENTRY 7 3 2  ~dtkelchl~
			SET_2DA_ENTRY 8 1 2  ~*~
			SET_2DA_ENTRY 8 2 2  ~dtkcldh3~
			SET_2DA_ENTRY 8 3 2  ~dtkcldhl~
				SET_2DA_ENTRY 10 1 2  ~*~
				SET_2DA_ENTRY 10 2 2  ~dtkacih3~
 PRETTY_PRINT_2DA
 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Modifying items/spells to account for hit visual effect changes (includes SoD2BG2EE IU mod items/spells if they are present)      //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

COPY_EXISTING ~dtkswd01.itm~ ~override~		//Tongue of Burning Acid +4
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkswd1a.itm~ ~override~		//Tongue of Burning Acid +5
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkbol1.itm~ ~override~		//Bolt of Frostfire +2
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (low) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS
	
	COPY_EXISTING ~dtkstaf1.itm~ ~override~		//Uncursed Staff of Antipode
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (high) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS	

COPY_EXISTING_REGEXP GLOB ~^.+\.itm$~ ~override~		//remove old hit visual effects to prevent conflicts
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~ITM ~ = 1) BEGIN
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
			LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do instant poison damage
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do poison over time damage
				END
				BUT_ONLY 
				
COPY_EXISTING_REGEXP GLOB ~^.+\.spl$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~SPL ~ = 1) BEGIN
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do instant poison damage
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do poison over time damage
		END
		BUT_ONLY

///////////////////////////////////////////////////
//BG-style visuals, IWD-style sounds         //////
///////////////////////////////////////////////////

BEGIN @1104
REQUIRE_PREDICATE NOT GAME_IS ~iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @14
SUBCOMPONENT @1100
PRINT @11

COPY ~ee_cosmetic_enhancements/hiteff/bam~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/vvc~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/wav~ ~override~

COPY_EXISTING ~dmgtypes.2da~ ~override~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 2 2 2  ~dtkfirh4~
	SET_2DA_ENTRY 2 3 2  ~spburn~
		SET_2DA_ENTRY 7 1 2  ~*~
		SET_2DA_ENTRY 7 2 2  ~dtkelch4~
		SET_2DA_ENTRY 7 3 2  ~spsparks~
			SET_2DA_ENTRY 8 1 2  ~*~
			SET_2DA_ENTRY 8 2 2  ~dtkcldh4~
			SET_2DA_ENTRY 8 3 2  ~dtkcldl2~
				SET_2DA_ENTRY 10 1 2  ~*~
				SET_2DA_ENTRY 10 2 2  ~dtkacih4~
 PRETTY_PRINT_2DA
 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Modifying items/spells to account for hit visual effect changes (includes SoD2BG2EE IU mod items/spells if they are present)      //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

COPY_EXISTING ~dtkswd01.itm~ ~override~		//Tongue of Burning Acid +4
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkswd1a.itm~ ~override~		//Tongue of Burning Acid +5
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkbol1.itm~ ~override~		//Bolt of Frostfire +2
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (low) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS
	
	COPY_EXISTING ~dtkstaf1.itm~ ~override~		//Uncursed Staff of Antipode
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (high) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS

COPY_EXISTING_REGEXP GLOB ~^.+\.itm$~ ~override~		//remove old hit visual effects to prevent conflicts
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~ITM ~ = 1) BEGIN
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
			LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do instant poison damage
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do poison over time damage
				END
				BUT_ONLY 
				
COPY_EXISTING_REGEXP GLOB ~^.+\.spl$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~SPL ~ = 1) BEGIN
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do instant poison damage
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do poison over time damage
		END
		BUT_ONLY

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//IWD-style fire, elec visual with BG-style sounds.  IWD-style cold visual + sound.  BG-style acid visual + sound////////						 //////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

BEGIN @1105
REQUIRE_PREDICATE NOT GAME_IS ~iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @14
SUBCOMPONENT @1100
PRINT @11

COPY ~ee_cosmetic_enhancements/hiteff/bam~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/vvc~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/wav~ ~override~

COPY_EXISTING ~dmgtypes.2da~ ~override~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 2 2 2  ~dtkfirh3~
	SET_2DA_ENTRY 2 3 2  ~dtkfirhl~
		SET_2DA_ENTRY 7 1 2  ~*~
		SET_2DA_ENTRY 7 2 2  ~dtkelch3~
		SET_2DA_ENTRY 7 3 2  ~dtkelchl~
			SET_2DA_ENTRY 8 1 2  ~*~
			SET_2DA_ENTRY 8 2 2  ~dtkcldhh~
			SET_2DA_ENTRY 8 3 2  ~dtkcldhl~
				SET_2DA_ENTRY 10 1 2  ~*~
				SET_2DA_ENTRY 10 2 2  ~dtkacih2~
 PRETTY_PRINT_2DA
 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Modifying items/spells to account for hit visual effect changes (includes SoD2BG2EE IU mod items/spells if they are present)      //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

COPY_EXISTING ~dtkswd01.itm~ ~override~		//Tongue of Burning Acid +4
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkswd1a.itm~ ~override~		//Tongue of Burning Acid +5
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkbol1.itm~ ~override~		//Bolt of Frostfire +2
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (low) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS
	
	COPY_EXISTING ~dtkstaf1.itm~ ~override~		//Uncursed Staff of Antipode
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (high) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS

	
COPY_EXISTING_REGEXP GLOB ~^.+\.itm$~ ~override~		//remove old hit visual effects to prevent conflicts
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~ITM ~ = 1) BEGIN
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
			LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do instant poison damage
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do poison over time damage
				END
				BUT_ONLY 
				
COPY_EXISTING_REGEXP GLOB ~^.+\.spl$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~SPL ~ = 1) BEGIN
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do instant poison damage
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do poison over time damage
		END
		BUT_ONLY 
		


/////////////////////////////////////////////////////////////////////////////////
//BG-style fire, elec, acid visual + sound.  IWD-style cold visual + sound.//////
/////////////////////////////////////////////////////////////////////////////////

BEGIN @1106
REQUIRE_PREDICATE NOT GAME_IS ~iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @14
SUBCOMPONENT @1100
PRINT @11

COPY ~ee_cosmetic_enhancements/hiteff/bam~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/vvc~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/wav~ ~override~

COPY_EXISTING ~dmgtypes.2da~ ~override~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 2 2 2  ~dtkfirh2~
	SET_2DA_ENTRY 2 3 2  ~spburn~
		SET_2DA_ENTRY 7 1 2  ~*~
		SET_2DA_ENTRY 7 2 2  ~dtkelch2~
		SET_2DA_ENTRY 7 3 2  ~spsparks~
			SET_2DA_ENTRY 8 1 2  ~*~
			SET_2DA_ENTRY 8 2 2  ~dtkcldhh~
			SET_2DA_ENTRY 8 3 2  ~dtkcldhl~
				SET_2DA_ENTRY 10 1 2  ~*~
				SET_2DA_ENTRY 10 2 2  ~dtkacih2~
 PRETTY_PRINT_2DA
 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Modifying items/spells to account for hit visual effect changes (includes SoD2BG2EE IU mod items/spells if they are present)      //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

COPY_EXISTING ~dtkswd01.itm~ ~override~		//Tongue of Burning Acid +4
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkswd1a.itm~ ~override~		//Tongue of Burning Acid +5
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkbol1.itm~ ~override~		//Bolt of Frostfire +2
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (low) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS
	
	COPY_EXISTING ~dtkstaf1.itm~ ~override~		//Uncursed Staff of Antipode
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (high) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS			

COPY_EXISTING_REGEXP GLOB ~^.+\.itm$~ ~override~		//remove old hit visual effects to prevent conflicts
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~ITM ~ = 1) BEGIN
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
			LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do instant poison damage
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do poison over time damage
				END
				BUT_ONLY 
				
COPY_EXISTING_REGEXP GLOB ~^.+\.spl$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~SPL ~ = 1) BEGIN
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do instant poison damage
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do poison over time damage
		END
		BUT_ONLY		
		
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//IWD-style fire visual + BG-style sound.  IWD-style cold visual + sound.  BG style elec(recolored) visual + sound.  BG style acid visual + sound.//////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

BEGIN @1107
REQUIRE_PREDICATE NOT GAME_IS ~iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @14
SUBCOMPONENT @1100
PRINT @11

COPY ~ee_cosmetic_enhancements/hiteff/bam~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/vvc~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/wav~ ~override~

COPY_EXISTING ~dmgtypes.2da~ ~override~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 2 2 2  ~dtkfirh3~
	SET_2DA_ENTRY 2 3 2  ~dtkfirhl~
		SET_2DA_ENTRY 7 1 2  ~*~
		SET_2DA_ENTRY 7 2 2  ~dtkelch5~
		SET_2DA_ENTRY 7 3 2  ~dtkelchl~
			SET_2DA_ENTRY 8 1 2  ~*~
			SET_2DA_ENTRY 8 2 2  ~dtkcldhh~
			SET_2DA_ENTRY 8 3 2  ~dtkcldhl~
				SET_2DA_ENTRY 10 1 2  ~*~
				SET_2DA_ENTRY 10 2 2  ~dtkacih2~
 PRETTY_PRINT_2DA
 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Modifying items/spells to account for hit visual effect changes (includes SoD2BG2EE IU mod items/spells if they are present)      //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

COPY_EXISTING ~dtkswd01.itm~ ~override~		//Tongue of Burning Acid +4
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkswd1a.itm~ ~override~		//Tongue of Burning Acid +5
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkbol1.itm~ ~override~		//Bolt of Frostfire +2
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (low) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS
	
	COPY_EXISTING ~dtkstaf1.itm~ ~override~		//Uncursed Staff of Antipode
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (high) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS			

COPY_EXISTING_REGEXP GLOB ~^.+\.itm$~ ~override~		//remove old hit visual effects to prevent conflicts
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~ITM ~ = 1) BEGIN
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
			LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do instant poison damage
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do poison over time damage
				END
				BUT_ONLY 
				
COPY_EXISTING_REGEXP GLOB ~^.+\.spl$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~SPL ~ = 1) BEGIN
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do instant poison damage
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do poison over time damage
		END
		BUT_ONLY	

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//IWD-style fire visual + BG-style sound.  IWD-style cold visual + sound.  BG style elec(recolored) visual + sound.  IWD-style acid visual + sound.//////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

BEGIN @1108
REQUIRE_PREDICATE NOT GAME_IS ~iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @14
SUBCOMPONENT @1100
PRINT @11

COPY ~ee_cosmetic_enhancements/hiteff/bam~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/vvc~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/wav~ ~override~

COPY_EXISTING ~dmgtypes.2da~ ~override~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 2 2 2  ~dtkfirh3~
	SET_2DA_ENTRY 2 3 2  ~dtkfirhl~
		SET_2DA_ENTRY 7 1 2  ~*~
		SET_2DA_ENTRY 7 2 2  ~dtkelch5~
		SET_2DA_ENTRY 7 3 2  ~dtkelchl~
			SET_2DA_ENTRY 8 1 2  ~*~
			SET_2DA_ENTRY 8 2 2  ~dtkcldhh~
			SET_2DA_ENTRY 8 3 2  ~dtkcldhl~
				SET_2DA_ENTRY 10 1 2  ~*~
				SET_2DA_ENTRY 10 2 2  ~dtkacihh~
 PRETTY_PRINT_2DA
 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Modifying items/spells to account for hit visual effect changes (includes SoD2BG2EE IU mod items/spells if they are present)      //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

COPY_EXISTING ~dtkswd01.itm~ ~override~		//Tongue of Burning Acid +4
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkswd1a.itm~ ~override~		//Tongue of Burning Acid +5
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkbol1.itm~ ~override~		//Bolt of Frostfire +2
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (low) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS
	
	COPY_EXISTING ~dtkstaf1.itm~ ~override~		//Uncursed Staff of Antipode
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (high) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS			

COPY_EXISTING_REGEXP GLOB ~^.+\.itm$~ ~override~		//remove old hit visual effects to prevent conflicts
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~ITM ~ = 1) BEGIN
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
			LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do instant poison damage
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do poison over time damage
				END
				BUT_ONLY 
				
COPY_EXISTING_REGEXP GLOB ~^.+\.spl$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~SPL ~ = 1) BEGIN
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do instant poison damage
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do poison over time damage
		END
		BUT_ONLY	

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//IWD-style fire, elec visual with BG-style sounds.  IWD-style cold visual + sound.  IWD-style acid visual with BG-style sound////////						 //////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

BEGIN @1109
REQUIRE_PREDICATE NOT GAME_IS ~iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @14
SUBCOMPONENT @1100
PRINT @11

COPY ~ee_cosmetic_enhancements/hiteff/bam~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/vvc~ ~override~
COPY ~ee_cosmetic_enhancements/hiteff/wav~ ~override~

COPY_EXISTING ~dmgtypes.2da~ ~override~
	SET_2DA_ENTRY 2 1 2  ~*~
	SET_2DA_ENTRY 2 2 2  ~dtkfirh3~
	SET_2DA_ENTRY 2 3 2  ~dtkfirhl~
		SET_2DA_ENTRY 7 1 2  ~*~
		SET_2DA_ENTRY 7 2 2  ~dtkelch3~
		SET_2DA_ENTRY 7 3 2  ~dtkelchl~
			SET_2DA_ENTRY 8 1 2  ~*~
			SET_2DA_ENTRY 8 2 2  ~dtkcldhh~
			SET_2DA_ENTRY 8 3 2  ~dtkcldhl~
				SET_2DA_ENTRY 10 1 2  ~*~
				SET_2DA_ENTRY 10 2 2  ~dtkacih3~
 PRETTY_PRINT_2DA
 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Modifying items/spells to account for hit visual effect changes (includes SoD2BG2EE IU mod items/spells if they are present)      //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

COPY_EXISTING ~dtkswd01.itm~ ~override~		//Tongue of Burning Acid +4
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkswd1a.itm~ ~override~		//Tongue of Burning Acid +5
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih2 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacihh END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih3 END // prevents acid hit visual to allow for custom hit visual effect
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkacih4 END // prevents acid hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhh END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirhl END // prevents fire (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh2 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = spburn END // prevents fire (low) hit visual to allow for custom hit visual effect
  		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh3 END // prevents fire (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR resource = dtkfirh4 END // prevents fire (high) hit visual to allow for custom hit visual effect
  BUT_ONLY IF_EXISTS
  
COPY_EXISTING ~dtkbol1.itm~ ~override~		//Bolt of Frostfire +2
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (low) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (low) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS
	
	COPY_EXISTING ~dtkstaf1.itm~ ~override~		//Uncursed Staff of Antipode
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirhh END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh2 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh3 END // prevents fire hit visual (high) to allow for custom
	LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkfirh4 END // prevents fire hit visual (high) to allow for custom
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldhh END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh2 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh3 END // prevents cold (high) hit visual to allow for custom hit visual effect
		LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 215 match_timing = 0 opcode = 296 STR_VAR match_resource = dtkffbl1 resource = dtkcldh4 END // prevents cold (high) hit visual to allow for custom hit visual effect
	BUT_ONLY IF_EXISTS

	
COPY_EXISTING_REGEXP GLOB ~^.+\.itm$~ ~override~		//remove old hit visual effects to prevent conflicts
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~ITM ~ = 1) BEGIN
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
			LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do instant poison damage
				LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to items that do poison over time damage
				END
				BUT_ONLY 
				
COPY_EXISTING_REGEXP GLOB ~^.+\.spl$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~SPL ~ = 1) BEGIN
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = shacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = dtkacid END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
	LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 215 STR_VAR match_resource = poison END // remove manual hit visual to avoid conflict with IWD DMGTYPES.2DA changes
		LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 65536 match_parameter1 = 0 match_dicenumber = 0 match_dicesize = 0  END // remove 0 damage acid to avoid conflict with IWD DMGTYPES.2DA changes
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 12 match_parameter2 = 2097152 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do instant poison damage
			LPF CLONE_EFFECT INT_VAR silent = 1 match_opcode = 25 opcode = 215 parameter2 = 0 parameter1 = 0 timing = 0 duration = 0 dicenumber = 0 dicesize = 0 STR_VAR resource = dtkpoih2  END // adds new hit visual effect for poison to spells that do poison over time damage
		END
		BUT_ONLY 
		

/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////                                                  \\\\\
///// Spell enhancements			                   \\\\\
/////                                                  \\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\


/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\
///// IWD-style spell graphics and sounds  \\\\\
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\

BEGIN @1201
GROUP @1200
REQUIRE_PREDICATE NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @12
PRINT @11

ACTION_IF FILE_EXISTS_IN_GAME ~setup-spell_rev.debug~ THEN BEGIN FAIL @15 END // Spell Revisions check

///////////////////////////////////////
//adding resources for spell visuals///
///////////////////////////////////////

ACTION_IF FILE_EXISTS_IN_GAME ~SETUP-SOD2BG2_IU.DEBUG~ BEGIN // Checks if SoD to BG2 Item Upgrade mod is installed before copying mod-specific files
COPY ~ee_cosmetic_enhancements/mod-specific/sod2bg2iu/bam~ ~override~
END

COPY ~ee_cosmetic_enhancements/iwdspell/bam~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/vvc~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/vef~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/wav~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/2da~ ~override~

//////////////////////////////////////
///////////Projectiles////////////////
//////////////////////////////////////

ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr267.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr318.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr109.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkbhand.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkclig2.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr210.pro~
	COPY_EXISTING ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr210.pro~ ~override~	//setting explosion projectile
	WRITE_SHORT 0x21a ~%dtkclig2%~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr264.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr187.pro~	
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr25.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr212.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr240.pro~	
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr239.pro~	
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr268.pro~	
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr246.pro~	
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkfirb.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr98.pro~		
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkincdb.pro~		
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr214.pro~		
	COPY_EXISTING ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr214.pro~ ~override~	//setting secondary projectile
	WRITE_SHORT 0x214 ~%dtkincdb%~ -1
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr255.pro~		
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr247.pro~		
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr256.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkhold.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkholun.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr241.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr101.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr206.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr40.pro~
	COPY_EXISTING ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr40.pro~ ~override~	//setting secondary projectile
	WRITE_SHORT 0x214 ~%dtkpr206%~ -1
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr40b.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr230.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr232.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr273.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr336.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr278.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr272.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkrmagi.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr242.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtksleep.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr248.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr95.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkwebtr.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkweb.pro~
	COPY_EXISTING ~ee_cosmetic_enhancements/iwdspell/pro/dtkweb.pro~ ~override~	//setting explosion projectile
	WRITE_SHORT 0x21a ~%dtkwebtr%~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkwailb.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkenta.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkfstri.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr67.pro~
	COPY_EXISTING ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr67.pro~ ~override~	//setting secondary projectile
	WRITE_SHORT 0x214 ~%dtkfstri%~ -1
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkglyp.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr216.pro~
COPY_EXISTING ~skybolt.pro~ ~override~	//call lightning
	WRITE_ASCII 0x104 ~dtkclith~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr238.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr250.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr245.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr258.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkfdaw.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr269.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr275.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkpr282.pro~
COPY_EXISTING ~firebtbl.pro~ ~override~	//blue fireball
	WRITE_ASCII 0X104 ~dtkwwlfp~
	WRITE_SHORT 0x100 (BIT1 + BIT2 + BIT6 + BIT7 + BIT9)
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkicebr.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkrdsli.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkd3sli.pro~
ADD_PROJECTILE ~ee_cosmetic_enhancements/iwdspell/pro/dtkd4sli.pro~
COPY_EXISTING ~iceglyp.pro~ ~override~	//symbol-type spells
	WRITE_SHORT 0x100 (BIT3 + BIT5 + BIT7 + BIT8 + BIT9)
///////////////////////////////////////////////////////////
//adding resources for creature animtions if not present///
///////////////////////////////////////////////////////////
ACTION_IF NOT FILE_EXISTS_IN_GAME ~bf_md01.wav~ BEGIN // shared sounds for several animations
COPY ~ee_cosmetic_enhancements/anim/shared/wav~ ~override~
END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~mwi4a1.bam~ BEGIN // bam files required for barrow wights
	COPY ~ee_cosmetic_enhancements/anim/barroww/bam~ ~override~
	END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~barrow01.wav~ BEGIN // sound files required for barrow wights
	COPY ~ee_cosmetic_enhancements/anim/barroww/wav~ ~override~
	END
		ACTION_IF NOT FILE_EXISTS_IN_GAME ~mbbma1.bam~ BEGIN // bam files required for bombardier beetle
		COPY ~ee_cosmetic_enhancements/anim/beetles/bomb/bam~ ~override~
		END
		ACTION_IF NOT FILE_EXISTS_IN_GAME ~bomba01.wav~ BEGIN // wav files required for bombardier beetle
		COPY ~ee_cosmetic_enhancements/anim/beetles/bomb/wav~ ~override~
		END
			ACTION_IF NOT FILE_EXISTS_IN_GAME ~mebeta1.bam~ BEGIN // bam files required for boring beetle
			COPY ~ee_cosmetic_enhancements/anim/beetles/boring/bam~ ~override~
			END
			ACTION_IF NOT FILE_EXISTS_IN_GAME ~beetl01.wav~ BEGIN // wav files required for boring beetle
			COPY ~ee_cosmetic_enhancements/anim/beetles/boring/wav~ ~override~
			END
				ACTION_IF NOT FILE_EXISTS_IN_GAME ~mebfia1.bam~ BEGIN // bam files required for fire beetle
				COPY ~ee_cosmetic_enhancements/anim/beetles/fire/bam~ ~override~
				END
				ACTION_IF NOT FILE_EXISTS_IN_GAME ~bomba01.wav~ BEGIN // wav files required for fire beetle
				COPY ~ee_cosmetic_enhancements/anim/beetles/fire/wav~ ~override~
				END
					ACTION_IF NOT FILE_EXISTS_IN_GAME ~boar01.wav~ BEGIN // wav files required for boars
					COPY ~ee_cosmetic_enhancements/anim/boars/wild/wav~ ~override~
					COPY_EXISTING ~e265.ini~ ~override~
					REPLACE_TEXTUALLY ~worg~ ~boar~
					END
						ACTION_IF NOT FILE_EXISTS_IN_GAME ~mbona1.bam~ BEGIN // bam files required for bonebats
						COPY ~ee_cosmetic_enhancements/anim/bonebat/bam~ ~override~
						END
							ACTION_IF NOT FILE_EXISTS_IN_GAME ~mbu2a1.bam~ BEGIN // bam files required for bugbear captain
							COPY ~ee_cosmetic_enhancements/anim/bugbears/captsham/bam~ ~override~
							END
							ACTION_IF NOT FILE_EXISTS_IN_GAME ~bgcpt01.wav~ BEGIN // wav files required for bugbear captain
							COPY ~ee_cosmetic_enhancements/anim/bugbears/captsham/wav~ ~override~
							END
								ACTION_IF NOT FILE_EXISTS_IN_GAME ~mbuga1.bam~ BEGIN // bam files required for bugbear
								COPY ~ee_cosmetic_enhancements/anim/bugbears/normal/bam~ ~override~
								END
								ACTION_IF NOT FILE_EXISTS_IN_GAME ~bugbr01a.wav~ BEGIN // wav files required for bugbear
								COPY ~ee_cosmetic_enhancements/anim/bugbears/normal/wav~ ~override~
								END
									ACTION_IF NOT FILE_EXISTS_IN_GAME ~mcrda1.bam~ BEGIN // bam files required for iwd creeping doom
									COPY ~ee_cosmetic_enhancements/anim/creep/bam~ ~override~
									END
									ACTION_IF NOT FILE_EXISTS_IN_GAME ~creep01a.wav~ BEGIN // wav files required for iwd creeping doom
									COPY ~ee_cosmetic_enhancements/anim/creep/wav~ ~override~
									END
										ACTION_IF NOT FILE_EXISTS_IN_GAME ~mdrda1.bam~ BEGIN // bam files required for drowned dead
										COPY ~ee_cosmetic_enhancements/anim/drowned/bam~ ~override~
										END
										ACTION_IF NOT FILE_EXISTS_IN_GAME ~drown01.wav~ BEGIN // wav files required for drowned dead
										COPY ~ee_cosmetic_enhancements/anim/drowned/wav~ ~override~
										END
											ACTION_IF NOT FILE_EXISTS_IN_GAME ~mgh3a1.bam~ BEGIN // bam files required for iwd greater ghast
											COPY ~ee_cosmetic_enhancements/anim/ghast/greater/bam~ ~override~
											END
											ACTION_IF NOT FILE_EXISTS_IN_GAME ~dtkgh01.wav~ BEGIN	// wav files required for iwd greater ghast
											COPY ~ee_cosmetic_enhancements/anim/ghast/greater/wav~ ~override~
											COPY_EXISTING ~e320.ini~ ~override~		//updating animation to look for new sound files
											REPLACE_TEXTUALLY ~ghoul~ ~dtkgh~
											END
												ACTION_IF NOT FILE_EXISTS_IN_GAME ~mgh2a1.bam~ BEGIN // bam, wav files required for iwd greater ghoul
												COPY ~ee_cosmetic_enhancements/anim/ghoul/greater/bam~ ~override~
												END
												ACTION_IF NOT FILE_EXISTS_IN_GAME ~dtkgh01.wav~ BEGIN	// wav files required for iwd greater ghoul
												COPY ~ee_cosmetic_enhancements/anim/ghoul/greater/wav~ ~override~
												COPY_EXISTING ~e310.ini~ ~override~		//updating animation to look for new sound files
												REPLACE_TEXTUALLY ~ghoul~ ~dtkgh~
												END
													ACTION_IF NOT FILE_EXISTS_IN_GAME ~mgo5a1.bam~ BEGIN // bam files required for goblin captain
													COPY ~ee_cosmetic_enhancements/anim/goblins/captain/bam~ ~override~
													END
													ACTION_IF NOT FILE_EXISTS_IN_GAME ~capt01.wav~ BEGIN // wav files required for goblin captain
													COPY ~ee_cosmetic_enhancements/anim/goblins/captain/wav~ ~override~
													END
														ACTION_IF NOT FILE_EXISTS_IN_GAME ~mgw0a1.bam~ BEGIN // bam files required for goblin worg rider
														COPY ~ee_cosmetic_enhancements/anim/goblins/gobworg/bam~ ~override~
														END
														ACTION_IF NOT FILE_EXISTS_IN_GAME ~gobwg01a.wav~ BEGIN // wav files required for goblin worg rider
														COPY ~ee_cosmetic_enhancements/anim/goblins/gobworg/wav~ ~override~
														END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~mgw2a1.bam~ BEGIN // bam files required for goblin worg rider captain
COPY ~ee_cosmetic_enhancements/anim/goblins/gobworgcapt/bam~ ~override~
END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~cptwg01a.wav~ BEGIN // wav files required for goblin worg rider captain
COPY ~ee_cosmetic_enhancements/anim/goblins/gobworgcapt/wav~ ~override~
END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~mgoca1.bam~ BEGIN // bam files required for goblin shaman
	COPY ~ee_cosmetic_enhancements/anim/goblins/shaman/bam~ ~override~
	END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~gbcas01a.wav~ BEGIN // wav files required for goblin shaman
	COPY ~ee_cosmetic_enhancements/anim/goblins/shaman/wav~ ~override~
	END
		ACTION_IF NOT FILE_EXISTS_IN_GAME ~mlica1.bam~ BEGIN // bam files required for iwd lich-white (skeletal mage)
		COPY ~ee_cosmetic_enhancements/anim/lichwhite/bam~ ~override~
		END
			ACTION_IF NOT FILE_EXISTS_IN_GAME ~mli2a1.bam~ BEGIN // bam files required for lizardmen (green)
			COPY ~ee_cosmetic_enhancements/anim/lizardmen/normal/bam~ ~override~
			END
				ACTION_IF NOT FILE_EXISTS_IN_GAME ~mwiga1.bam~ BEGIN // bam files required for wight (gray)
				COPY ~ee_cosmetic_enhancements/anim/wights/gray/bam~ ~override~
				END
				ACTION_IF NOT FILE_EXISTS_IN_GAME ~wight01.wav~ BEGIN // wav files required for wight (gray)
				COPY ~ee_cosmetic_enhancements/anim/wights/gray/wav~ ~override~
				END
					ACTION_IF NOT FILE_EXISTS_IN_GAME ~mwi2a1.bam~ BEGIN // bam files required for wight (green)
					COPY ~ee_cosmetic_enhancements/anim/wights/green/bam~ ~override~
					END
					ACTION_IF NOT FILE_EXISTS_IN_GAME ~wight01.wav~ BEGIN // wav files required for wight (green)
					COPY ~ee_cosmetic_enhancements/anim/wights/green/wav~ ~override~
					END
						ACTION_IF NOT FILE_EXISTS_IN_GAME ~mwi3a1.bam~ BEGIN // bam files required for wight (yellow)
						COPY ~ee_cosmetic_enhancements/anim/wights/yellow/bam~ ~override~
						END
						ACTION_IF NOT FILE_EXISTS_IN_GAME ~wig301.wav~ BEGIN // wav files required for wight (yellow)
						COPY ~ee_cosmetic_enhancements/anim/wights/yellow/wav~ ~override~
						END
							ACTION_IF NOT FILE_EXISTS_IN_GAME ~mwora1.bam~ BEGIN // bam files required for iwd worg
							COPY ~ee_cosmetic_enhancements/anim/worg/bam~ ~override~
							END
								ACTION_IF NOT FILE_EXISTS_IN_GAME ~mzo3a1.bam~ BEGIN // bam files required for iwd zombie (blue)
								COPY ~ee_cosmetic_enhancements/anim/zombies/blue/bam~ ~override~
								END
								ACTION_IF NOT FILE_EXISTS_IN_GAME ~zomwor01.wav~ BEGIN // wav files required for iwd zombie (blue)
								COPY ~ee_cosmetic_enhancements/anim/zombies/blue/wav~ ~override~
								END
									ACTION_IF NOT FILE_EXISTS_IN_GAME ~mzo2a1.bam~ BEGIN // bam files required for iwd zombie (yellow)
									COPY ~ee_cosmetic_enhancements/anim/zombies/yellow/bam~ ~override~
									END
									ACTION_IF NOT FILE_EXISTS_IN_GAME ~zomwor01.wav~ BEGIN // wav files required for iwd zombie (blue)
									COPY ~ee_cosmetic_enhancements/anim/zombies/yellow/wav~ ~override~
									END
										ACTION_IF NOT FILE_EXISTS_IN_GAME ~myuha1.bam~ BEGIN // bam files required for iwd2 half yuan-ti 
										COPY ~ee_cosmetic_enhancements/anim/yuantihalf/bam~ ~override~
										END
										ACTION_IF NOT FILE_EXISTS_IN_GAME ~half01a.wav~ BEGIN // wav files required for iwd2 half yuan-ti
										COPY ~ee_cosmetic_enhancements/anim/yuantihalf/wav~ ~override~
										END
											ACTION_IF NOT FILE_EXISTS_IN_GAME ~mhisa1.bam~ BEGIN // bam files required for iwd histachii
											COPY ~ee_cosmetic_enhancements/anim/histachii/bam~ ~override~
											END
											ACTION_IF NOT FILE_EXISTS_IN_GAME ~hista01.wav~ BEGIN // wav files required for iwd histachii
											COPY ~ee_cosmetic_enhancements/anim/histachii/wav~ ~override~
											END
												ACTION_IF NOT FILE_EXISTS_IN_GAME ~mnosa1.bam~ BEGIN // bam files required for orog shaman
												COPY ~ee_cosmetic_enhancements/anim/orogsham/bam~ ~override~
												END
												ACTION_IF NOT FILE_EXISTS_IN_GAME ~orcas01a.wav~ BEGIN // wav files required for orog shaman
												COPY ~ee_cosmetic_enhancements/anim/orogsham/wav~ ~override~
												END

//////////////////////////////////////////////////////////
/// INI animation changes required for spell visuals//////
//////////////////////////////////////////////////////////


COPY_EXISTING ~0410.ini~ ~override~  	//glyph of warding
REPLACE_TEXTUALLY ~glphwrdh~ ~dtkglyph~
BUT_ONLY

//////////////////ITEMS//////////////////////////////////////////////////////////////

COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkbeetl.itm~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkbombb.itm~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkcolwi.itm~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkdiwrg.itm~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkdrded.itm~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkpzom.itm~ ~override~
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4003) END
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkstsnk.itm~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkwspid.itm~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtksskel.itm~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkbobat.itm~ ~override~
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4004) END
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkcdoom.itm~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkelw.itm~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkewax.itm~ ~override~
	SAY NAME1 @8001
	SAY NAME2 @8001
	SAY UNIDENTIFIED_DESC @8002
	SAY DESC @8002
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkewswd.itm~ ~override~
	SAY NAME1 @8003
	SAY NAME2 @8003
	SAY UNIDENTIFIED_DESC @8004
	SAY DESC @8004
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkewssd.itm~ ~override~
	SAY NAME1 @8005
	SAY NAME2 @8005
	SAY UNIDENTIFIED_DESC @8006
	SAY DESC @8006
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkewmac.itm~ ~override~
	SAY NAME1 @8007
	SAY NAME2 @8007
	SAY UNIDENTIFIED_DESC @8008
	SAY DESC @8008
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkpotfb.itm~ ~override~
LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkbhand%" END
	SAY NAME1 @8009
	SAY NAME2 @8009
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkpotib.itm~ ~override~
LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkicebr%" END
	SAY NAME1 @8010
	SAY NAME2 @8010
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkslzom.itm~ ~override~
	SAY NAME1 @8011
	SAY NAME2 @8011
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkslzm2.itm~ ~override~
	SAY NAME1 @8011
	SAY NAME2 @8011
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkgrsli.itm~ ~override~
	SAY NAME1 @8012
	SAY NAME2 @8012
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkrdsli.itm~ ~override~
LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkrdsli%" END
	SAY NAME1 @8013
	SAY NAME2 @8013
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkd3sli.itm~ ~override~
LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkd3sli%" END
	SAY NAME1 @8013
	SAY NAME2 @8013	
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkd4sli.itm~ ~override~
LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkd4sli%" END
	SAY NAME1 @8013
	SAY NAME2 @8013	
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkd4vmp.itm~ ~override~
	SAY NAME1 @8014
	SAY NAME2 @8014	
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkd2iwi.itm~ ~override~
	SAY NAME1 @8015
	SAY NAME2 @8015	
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkm1his.itm~ ~override~
	SAY NAME1 @8016
	SAY NAME2 @8016	
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtkasnk2.itm~ ~override~
	SAY NAME1 @8017
	SAY NAME2 @8017	
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtka2bor.itm~ ~override~
	SAY NAME1 @8018
	SAY NAME2 @8018	
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtka3bor.itm~ ~override~
	SAY NAME1 @8019
	SAY NAME2 @8019
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtka3lio.itm~ ~override~
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4008) END
	SAY NAME1 @8020
	SAY NAME2 @8020
COPY ~ee_cosmetic_enhancements/iwdspell/itm/dtks1-8.itm~ ~override~
	SAY NAME1 @8021
	SAY NAME2 @8021


///Modifying and fixing slime animations - required for new slime creatures added by this component///

COPY_EXISTING ~7900.ini~ ~override~		//green slime
	REPLACE_TEXTUALLY ~personal_space=4~ ~personal_space=3~		//prevents slimes from getting stuck
	REPLACE_TEXTUALLY ~translucent=1~ ~translucent=0~	//allows for custom levels of transluceny using CRE effects
		BUT_ONLY
		
COPY_EXISTING ~7901.ini~ ~override~		//olive slime
	REPLACE_TEXTUALLY ~personal_space=4~ ~personal_space=3~		//prevents slimes from getting stuck
	REPLACE_TEXTUALLY ~translucent=1~ ~translucent=0~	//allows for custom levels of transluceny using CRE effects
		BUT_ONLY
		
COPY_EXISTING ~7902.ini~ ~override~		//mustard jelly
	REPLACE_TEXTUALLY ~personal_space=4~ ~personal_space=3~		//prevents slimes from getting stuck
	REPLACE_TEXTUALLY ~translucent=1~ ~translucent=0~	//allows for custom levels of transluceny using CRE effects
		BUT_ONLY
		
COPY_EXISTING ~7903.ini~ ~override~		//ochre slime
	REPLACE_TEXTUALLY ~personal_space=4~ ~personal_space=3~		//prevents slimes from getting stuck
	REPLACE_TEXTUALLY ~translucent=1~ ~translucent=0~	//allows for custom levels of transluceny using CRE effects
		BUT_ONLY
		
COPY_EXISTING ~7904.ini~ ~override~		//gray ooze
	REPLACE_TEXTUALLY ~personal_space=4~ ~personal_space=3~		//prevents slimes from getting stuck
	REPLACE_TEXTUALLY ~translucent=1~ ~translucent=0~	//allows for custom levels of transluceny using CRE effects
		BUT_ONLY
		
COPY_EXISTING_REGEXP GLOB ~^.+\.cre$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~CRE ~ = 1) BEGIN
		READ_SHORT  0x28 animation
		READ_SHORT	0x08 name1
		READ_SHORT	0x0c name2
			PATCH_IF ((animation = 30980) OR (animation = 30979) OR (animation = 30978) OR (animation = 30977) OR (animation = 30976))  BEGIN	// 
			LPF ADD_CRE_EFFECT INT_VAR opcode = 66 target = 1 parameter1 = 100 parameter2 = 0 timing = 1 probability1 = 100 END
			END
END
BUT_ONLY

/////////////////////CREATURES///////////////////////////////////////////////////////

COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm1fb.cre~ ~override~
	SAY NAME1 @5000
	SAY NAME2 @5000
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm1gba.cre~ ~override~
	SAY NAME1 @5001
	SAY NAME2 @5001
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm1gbm.cre~ ~override~
	SAY NAME1 @5001
	SAY NAME2 @5001
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm2bbt.cre~ ~override~
	SAY NAME1 @5002
	SAY NAME2 @5002
	ADD_CRE_ITEM ~dtkbombb~ #0 #0 #0 ~NONE~ ~RRING~
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm2gbb.cre~ ~override~
	SAY NAME1 @5003
	SAY NAME2 @5003
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm2gbe.cre~ ~override~
	SAY NAME1 @5003
	SAY NAME2 @5003
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm2liz.cre~ ~override~
	SAY NAME1 @5004
	SAY NAME2 @5004
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3bor.cre~ ~override~
	SAY NAME1 @5005
	SAY NAME2 @5005
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3gsp.cre~ ~override~
	SAY NAME1 @5065
	SAY NAME2 @5065
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3oro.cre~ ~override~
	SAY NAME1 @5008
	SAY NAME2 @5008
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3liz.cre~ ~override~
	SAY NAME1 @5009
	SAY NAME2 @5009
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3lz2.cre~ ~override~
	SAY NAME1 @5009
	SAY NAME2 @5009
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtka1bea.cre~ ~override~
	SAY NAME1 @5010
	SAY NAME2 @5010
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtka1wlf.cre~ ~override~
	SAY NAME1 @5011
	SAY NAME2 @5011
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtka1wrg.cre~ ~override~
	SAY NAME1 @5017
	SAY NAME2 @5017
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtka1bor.cre~ ~override~
	SAY NAME1 @5016
	SAY NAME2 @5016
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtka2cav.cre~ ~override~
	SAY NAME1 @5012
	SAY NAME2 @5012
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtka2dir.cre~ ~override~
	SAY NAME1 @5013
	SAY NAME2 @5013
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtka2snk.cre~ ~override~
	SAY NAME1 @5014
	SAY NAME2 @5014
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtka2jag.cre~ ~override~
	SAY NAME1 @5015
	SAY NAME2 @5015
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtka2bor.cre~ ~override~
	SAY NAME1 @5016
	SAY NAME2 @5016
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtka3bor.cre~ ~override~
	SAY NAME1 @5018
	SAY NAME2 @5018
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtka3wrg.cre~ ~override~
	SAY NAME1 @5019
	SAY NAME2 @5019
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtka3snk.cre~ ~override~
	SAY NAME1 @5020
	SAY NAME2 @5020
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3gbc.cre~ ~override~
	SAY NAME1 @5021
	SAY NAME2 @5021
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3gbs.cre~ ~override~
	SAY NAME1 @5022
	SAY NAME2 @5022
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3gbw.cre~ ~override~
	SAY NAME1 @5023
	SAY NAME2 @5023
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3orm.cre~ ~override~
	SAY NAME1 @5024
	SAY NAME2 @5024
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm1hog.cre~ ~override~
	SAY NAME1 @5025
	SAY NAME2 @5025
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd1sk1.cre~ ~override~
	SAY NAME1 @5026
	SAY NAME2 @5026
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd1sk2.cre~ ~override~
	SAY NAME1 @5026
	SAY NAME2 @5026
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd1sk3.cre~ ~override~
	SAY NAME1 @5027
	SAY NAME2 @5027
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd1sk4.cre~ ~override~
	SAY NAME1 @5026
	SAY NAME2 @5026
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd1sk5.cre~ ~override~
	SAY NAME1 @5027
	SAY NAME2 @5027
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd1sk6.cre~ ~override~
	SAY NAME1 @5026
	SAY NAME2 @5026
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd1zm1.cre~ ~override~
	SAY NAME1 @5028
	SAY NAME2 @5028
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd1zm2.cre~ ~override~
	SAY NAME1 @5028
	SAY NAME2 @5028
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd1zm3.cre~ ~override~
	SAY NAME1 @5028
	SAY NAME2 @5028
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd1zm4.cre~ ~override~
	SAY NAME1 @5028
	SAY NAME2 @5028
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd2bat.cre~ ~override~
	SAY NAME1 @5045
	SAY NAME2 @5045
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd2ga1.cre~ ~override~
	SAY NAME1 @5029
	SAY NAME2 @5029
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd2gh1.cre~ ~override~
	SAY NAME1 @5030
	SAY NAME2 @5030
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd2as1.cre~ ~override~
	SAY NAME1 @5031
	SAY NAME2 @5031
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd2as2.cre~ ~override~
	SAY NAME1 @5031
	SAY NAME2 @5031
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd2wi1.cre~ ~override~
	SAY NAME1 @5032
	SAY NAME2 @5032
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd2zm1.cre~ ~override~
	SAY NAME1 @5028
	SAY NAME2 @5028
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd2zm2.cre~ ~override~
	SAY NAME1 @5033
	SAY NAME2 @5033
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd3skm.cre~ ~override~
	SAY NAME1 @5034
	SAY NAME2 @5034
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd3skm.cre~ ~override~
	SAY NAME1 @5034
	SAY NAME2 @5034
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd3sk1.cre~ ~override~
	SAY NAME1 @5035
	SAY NAME2 @5035
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd3sk2.cre~ ~override~
	SAY NAME1 @5035
	SAY NAME2 @5035
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd3sk3.cre~ ~override~
	SAY NAME1 @5027
	SAY NAME2 @5027
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd3spi.cre~ ~override~
	SAY NAME1 @5036
	SAY NAME2 @5036
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd3zm1.cre~ ~override~
	SAY NAME1 @5037
	SAY NAME2 @5037
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd3ghl.cre~ ~override~
	SAY NAME1 @5038
	SAY NAME2 @5038
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4cwi.cre~ ~override~
	SAY NAME1 @5039
	SAY NAME2 @5039
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4bw1.cre~ ~override~
	SAY NAME1 @5040
	SAY NAME2 @5040
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4skw.cre~ ~override~
	SAY NAME1 @5043
	SAY NAME2 @5043
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4drw.cre~ ~override~
	SAY NAME1 @5041
	SAY NAME2 @5041
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4ghl.cre~ ~override~
	SAY NAME1 @5042
	SAY NAME2 @5042
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4ssk.cre~ ~override~
	SAY NAME1 @5044
	SAY NAME2 @5044
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4sk1.cre~ ~override~
	SAY NAME1 @5046
	SAY NAME2 @5046
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4sk2.cre~ ~override~
	SAY NAME1 @5046
	SAY NAME2 @5046
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4sk3.cre~ ~override~
	SAY NAME1 @5046
	SAY NAME2 @5046
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4sk4.cre~ ~override~
	SAY NAME1 @5046
	SAY NAME2 @5046
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4sk5.cre~ ~override~
	SAY NAME1 @5046
	SAY NAME2 @5046
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4sk6.cre~ ~override~
	SAY NAME1 @5046
	SAY NAME2 @5046
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4sk7.cre~ ~override~
	SAY NAME1 @5046
	SAY NAME2 @5046
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4spi.cre~ ~override~
	SAY NAME1 @5047
	SAY NAME2 @5047
COPY_EXISTING ~elairsu1.cre~ ~override~		//remove script for control battle of elemental
	WRITE_LONG 0x248 0
COPY_EXISTING ~elairsu2.cre~ ~override~		//remove script for control battle of elemental
	WRITE_LONG 0x248 0
COPY_EXISTING ~elairsu3.cre~ ~override~		//remove script for control battle of elemental
	WRITE_LONG 0x248 0
COPY_EXISTING ~elairsu4.cre~ ~override~		//remove script for control battle of elemental
	WRITE_LONG 0x248 0
COPY_EXISTING ~elearsuw.cre~ ~override~		//remove script for control battle of elemental
	SAY NAME1 @5048
	SAY NAME2 @5048
	WRITE_LONG 0x248 0
COPY_EXISTING ~elfirsu1.cre~ ~override~		//remove script for control battle of elemental
	SAY NAME1 @5049
	SAY NAME2 @5049
	WRITE_LONG 0x248 0
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkcdoom.cre~ ~override~
	SAY NAME1 @5050
	SAY NAME2 @5050
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkeprc4.cre~ ~override~
	SAY NAME1 @5051
	SAY NAME2 @5051
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkelw16.cre~ ~override~
	SAY NAME1 @5052
	SAY NAME2 @5052
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm1xva.cre~ ~override~
	SAY NAME1 @5053
	SAY NAME2 @5053
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm1xv2.cre~ ~override~
	SAY NAME1 @5054
	SAY NAME2 @5054
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm1kob.cre~ ~override~
	SAY NAME1 @5055
	SAY NAME2 @5055
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm1sli.cre~ ~override~
	SAY NAME1 @5056
	SAY NAME2 @5056
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm1gib.cre~ ~override~
	SAY NAME1 @5057
	SAY NAME2 @5057
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm1spi.cre~ ~override~
	SAY NAME1 @5058
	SAY NAME2 @5058
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd3szm.cre~ ~override~
	SAY NAME1 @5059
	SAY NAME2 @5059
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm1or1.cre~ ~override~
	SAY NAME1 @5060
	SAY NAME2 @5060
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm1or2.cre~ ~override~
	SAY NAME1 @5061
	SAY NAME2 @5061
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd1sli.cre~ ~override~
	SAY NAME1 @5062
	SAY NAME2 @5062
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm2yu1.cre~ ~override~
	SAY NAME1 @5063
	SAY NAME2 @5063
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm2yu2.cre~ ~override~
	SAY NAME1 @5064
	SAY NAME2 @5064
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm2yu3.cre~ ~override~
	SAY NAME1 @5064
	SAY NAME2 @5064
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm2yu4.cre~ ~override~
	SAY NAME1 @5064
	SAY NAME2 @5064
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm2spi.cre~ ~override~
	SAY NAME1 @5007
	SAY NAME2 @5007
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm2sli.cre~ ~override~
	SAY NAME1 @5066
	SAY NAME2 @5066
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm2or1.cre~ ~override~
	SAY NAME1 @5067
	SAY NAME2 @5067
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm2or2.cre~ ~override~
	SAY NAME1 @5068
	SAY NAME2 @5068
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm2or3.cre~ ~override~
	SAY NAME1 @5069
	SAY NAME2 @5069
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3lz3.cre~ ~override~
	SAY NAME1 @5070
	SAY NAME2 @5070
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3bu1.cre~ ~override~
	SAY NAME1 @5071
	SAY NAME2 @5071
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3bu2.cre~ ~override~
	SAY NAME1 @5072
	SAY NAME2 @5072
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3sli.cre~ ~override~
	SAY NAME1 @5073
	SAY NAME2 @5073
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3yu1.cre~ ~override~
	SAY NAME1 @5074
	SAY NAME2 @5074	
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3yu2.cre~ ~override~
	SAY NAME1 @5074
	SAY NAME2 @5074	
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3yu3.cre~ ~override~
	SAY NAME1 @5074
	SAY NAME2 @5074	
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3gib.cre~ ~override~
	SAY NAME1 @5075
	SAY NAME2 @5075	
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd2sli.cre~ ~override~
	SAY NAME1 @5076
	SAY NAME2 @5076	
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd3sli.cre~ ~override~
	SAY NAME1 @5077
	SAY NAME2 @5077	
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4sli.cre~ ~override~
	SAY NAME1 @5078
	SAY NAME2 @5078	
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd3wol.cre~ ~override~
	SAY NAME1 @5079
	SAY NAME2 @5079	
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd4vmp.cre~ ~override~
	SAY NAME1 @5080
	SAY NAME2 @5080
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd1tsk.cre~ ~override~
	SAY NAME1 @5081
	SAY NAME2 @5081
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd2mum.cre~ ~override~
	SAY NAME1 @5082
	SAY NAME2 @5082
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd3mum.cre~ ~override~
	SAY NAME1 @5083
	SAY NAME2 @5083
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkd2iwi.cre~ ~override~
	SAY NAME1 @5084
	SAY NAME2 @5084
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm3yuh.cre~ ~override~
	SAY NAME1 @5085
	SAY NAME2 @5085
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtkm1his.cre~ ~override~
	SAY NAME1 @5086
	SAY NAME2 @5086
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtka3lio.cre~ ~override~
	SAY NAME1 @5087
	SAY NAME2 @5087
COPY ~ee_cosmetic_enhancements/iwdspell/cre/dtka3bea.cre~ ~override~
	SAY NAME1 @5088
	SAY NAME2 @5088

////////////////////////////////////////////////////////////////
///Increase sumon limit to 6 - required for IWD-style summons///
////////////////////////////////////////////////////////////////

COPY_EXISTING ~summlimt.2da~ ~override~
  REPLACE_TEXTUALLY ~NORMAL[ %TAB%]+[0-9]+~ ~NORMAL 6~
  PRETTY_PRINT_2DA
  BUT_ONLY



///////////////////////////////////////////////////////////////////
//adding new spells required for IWD spell effects component    ///
///////////////////////////////////////////////////////////////////
COPY ~ee_cosmetic_enhancements/iwdspell/spl/dtkgresb.spl~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/spl/dtkgresc.spl~ ~override~
COPY ~ee_cosmetic_enhancements/iwdspell/spl/dtksorbb.spl~ ~override~
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4000) END
COPY ~ee_cosmetic_enhancements/iwdspell/spl/dtksorbc.spl~ ~override~
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4000) END

COPY ~ee_cosmetic_enhancements/iwdspell/spl/dtkbombb.spl~ ~override~
ADD_SPELL ~ee_cosmetic_enhancements/iwdspell/spl/dtkbombb.spl~ 3 1 INNATE_BOMBARDIER_BEETLE_CLOUD
	LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr282%" END
	LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4002) END 
	
COPY ~ee_cosmetic_enhancements/iwdspell/spl/dtkcolwi.spl~ ~override~
	SAY NAME1 @4001
	SAY NAME2 @4001
COPY ~ee_cosmetic_enhancements/iwdspell/spl/dtkistrm.spl~ ~override~	//innate spell for Ben-Hadar
	SAY NAME1 @4006
	SAY NAME2 @4006
COPY ~ee_cosmetic_enhancements/iwdspell/spl/dtkewax.spl~ ~override~		//axe spell for enchanted weapon
	SAY NAME1 @7000
	SAY NAME2 @7000
COPY ~ee_cosmetic_enhancements/iwdspell/spl/dtkewswd.spl~ ~override~		//long sword spell for enchanted weapon
	SAY NAME1 @7001
	SAY NAME2 @7001
COPY ~ee_cosmetic_enhancements/iwdspell/spl/dtkewssd.spl~ ~override~		//short sword spell for enchanted weapon
	SAY NAME1 @7002
	SAY NAME2 @7002
COPY ~ee_cosmetic_enhancements/iwdspell/spl/dtkewmac.spl~ ~override~		//mace spell for enchanted weapon
	SAY NAME1 @7003
	SAY NAME2 @7003

	
//////new scripts for summoned creatures - allows automated use of items and abilities//////

COMPILE ~dtksum01.bcs~ ~ee_cosmetic_enhancements/iwdspell/baf/dtksum01.baf~		//fighter script
COMPILE ~dtksum02.bcs~ ~ee_cosmetic_enhancements/iwdspell/baf/dtksum02.baf~		//priest script
COMPILE ~dtksum03.bcs~ ~ee_cosmetic_enhancements/iwdspell/baf/dtksum03.baf~ 	//mage script
COMPILE ~dtkbeetb.bcs~ ~ee_cosmetic_enhancements/iwdspell/baf/dtkbeetb.baf~ 	//bombadier beetle cloud	
COMPILE ~dtkeprc4.bcs~ ~ee_cosmetic_enhancements/iwdspell/baf/dtkeprc4.baf~ 	//Ben-Hadar summon

/////////////////////////
//////Spells/////////////
/////////////////////////

COPY_EXISTING_REGEXP GLOB ~^.+\.spl$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~SPL ~ = 1) BEGIN		
		READ_LONG   0x08 name
		READ_LONG   0x50 desc1
		READ_LONG   0x54 desc2
		READ_BYTE	0x25 type1
		READ_BYTE	0x68 numabilities
		READ_SHORT 0x98 ~proj~
		READ_SHORT 0x1c spell_type
		  PATCH_IF ((name = 12052) OR (name = 25940)) BEGIN	//magic missile
		  LPF ALTER_EFFECT INT_VAR silent = 1 check_headers = 1 match_type = 1 match_opcode = 141 opcode = 215 parameter2 = 0 STR_VAR resource = dtkmagh2 END // change existing lightning effect to new visual
		  END
			PATCH_IF ((name = 12072) OR (name = 26426)) BEGIN		//skull trap
			LPF ALTER_EFFECT INT_VAR silent = 1 check_headers = 1 match_type = 1 match_opcode = 141 opcode = 215 timing = 0 duration = 2 STR_VAR resource = dtknechh END // modify hit visual for skull trap spells
			END
				PATCH_IF ((name = 7917) OR (name = 26562)) BEGIN		//death spell
				LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr267%" END
				SET location = 0
				SET cycle_speed = 45   
				SET r = 76
				SET b = 0
				SET g = 116
				LPF ADD_SPELL_EFFECT INT_VAR opcode = 61 target = 2 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 1 probability1 = 100 END // adding RGB color fade
				LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
				LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkdspl1 END
				END
					PATCH_IF ((name = 7679) OR (name = 26645)) BEGIN		//abi-dalzim's horrid wilting
					LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr318%" END
					LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 parameter2 = 0 resist_dispel = 1 STR_VAR resource = dtkhwilt END
					LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 probability1 = 100 resist_dispel = 1 STR_VAR resource = dtk_e105  END // adding sound effect
					END	
						PATCH_IF ((name = 12058) AND (proj = 109) OR (name = 26105) AND (proj = 109)) BEGIN		//agannazar's scorcher
						LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr109%" END
						END
							PATCH_IF ((name = 12015) AND (proj = 49) OR (name = 26352) AND (proj = 49)) BEGIN		//blindness
							LPF ALTER_SPELL_HEADER INT_VAR projectile = 1 END
							LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = dtk_e105  END
							LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
							LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
							LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 timing = 0 resist_dispel = 1 duration = 3 savingthrow = BIT0 STR_VAR resource = dtkilluh END
							END
								PATCH_IF ((name = 26095) AND (proj = 235) OR (name = 7665) AND (proj = 235)) BEGIN		//finger of death (mage and priest)
								LPF ALTER_SPELL_HEADER INT_VAR projectile = 1 END
								LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
								LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 0 resist_dispel = 3 probability1 = 100 duration = 0 STR_VAR resource = dtk_e07  END
								LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 parameter2 = 0 STR_VAR resource = dtkfod END
								END
									PATCH_IF ((name = 12074) AND (proj = 22) OR (name = 26349) AND (proj = 22)) BEGIN		//burning hands
									LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkbhand%" END
									END
										PATCH_IF ((name = 25939) AND (proj = 213) OR (name = 25797) AND (proj = 213)) BEGIN		//chain lightning
										LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr210%" END
										END
											PATCH_IF ((name = 22610) AND (proj = 170) OR (name = 25871) AND (proj = 170)) BEGIN		//chaos
											LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr264%" END
											END
												PATCH_IF ((name = 12067) OR (name = 26372)) BEGIN		//chill touch
												LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtknechh END
												LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 1 timing = 1 resist_dispel = 3 probability1 = 100 duration = 0 STR_VAR resource = dtk_m07  END
												LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 1 timing = 4 resist_dispel = 3 probability1 = 100 duration = 60 STR_VAR resource = dtk_e04  END
												END
													PATCH_IF ((name = 12065) AND (proj = 187) OR (name = 25927) AND (proj = 187)) BEGIN		//cloudkill
													LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr95%" END
													LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 1 timing = 0 resist_dispel = 0 duration = 3 STR_VAR resource = dtkclokr END
													END
														PATCH_IF ((name = 12066) AND (proj = 250) OR (name = 26492) AND (proj = 250)) BEGIN		//cone of cold
														LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr25%" END
														END
															PATCH_IF ((name = 7621) AND (proj = 277) OR (name = 26575) AND (proj = 277)) BEGIN		//death fog
															LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr212%" END
															LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
															END
																PATCH_IF ((name = 12042) AND (proj = 254) OR (name = 26382) AND (proj = 254)) BEGIN		//detect invisibility
																LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr240%" END
																LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
																LPF ALTER_EFFECT INT_VAR match_opcode = 215 target = 2 timing = 1 STR_VAR resource = dtkdivnh END
																END
																	PATCH_IF ((name = 12041) AND (proj = 274) OR (name = 25811) AND (proj = 274)) BEGIN		//detect evil
																	LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr239%" END
																	LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 STR_VAR resource = dtkdivnh END
																	END
PATCH_IF ((name = 12050) AND (desc1 = 12168) AND (type1 = 4) OR (name = 17392) AND (desc1 = 12168) AND (type1 = 4)) BEGIN		//dire charm
LPF ALTER_SPELL_HEADER INT_VAR projectile = 1 END
LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkenchh END
LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = dtk_e04 END
LPF CLONE_EFFECT INT_VAR match_opcode = 174 duration = 0 timing = 0 STR_VAR resource = dtk_em05 END
END
	PATCH_IF ((name = 12050) AND (type1 = 0) OR (name = 17392) AND (type1 = 0)) BEGIN		//dire charm (NPC version)
	LPF ALTER_SPELL_HEADER INT_VAR projectile = 1 END
	LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 STR_VAR resource = dtkenchh END
	LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = dtk_em05 END
	LPF CLONE_EFFECT INT_VAR match_opcode = 5 opcode = 174 timing = 3 STR_VAR resource = dtk_e04 END
	END
		PATCH_IF ((name = 2628) AND (proj = 219) OR (name = 26102) AND (proj = 219)) BEGIN		//disintegrate
		LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr268%" END
		LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkdisth END
		LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = dtk_em43 END
		END
			PATCH_IF ((name = 12026) AND (proj = 157) AND (desc1 = 12199) OR (name = 12026) AND (proj = 157) AND (desc1 = 45821) OR (name = 12026) AND (proj = 157) AND (desc1 = 103007) OR (name = 25819) AND (proj = 157) AND (desc1 = 26443) OR (name = 25819) AND (proj = 157) AND (desc1 = 25967) OR (name = 25819) AND (proj = 157) AND (desc1 = 26443)) BEGIN		//dispel magic
			LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr246%" END
			LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 probability1 = 100 STR_VAR resource = dtk_em10 END
			LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkabjh END
			LPF DELETE_EFFECT INT_VAR match_opcode = 174 STR_VAR match_resource = eff_m10 END
			END
				PATCH_IF ((name = 25819) AND (proj = 157) AND (desc1 = 32372) OR (name = 12026) AND (proj = 157) AND (desc1 = 12145)) BEGIN		//dispel magic (yeslick)
				LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr246%" END
				LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = dtk_em10 END
				LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkabjh END
				END
					PATCH_IF ((name = 6618) AND (proj = 234) OR (name = 6618) AND (proj = 38) OR (name = 12059) AND (proj = 38) OR (name = 25963) AND (proj = 234) OR (name = 25963) AND (proj = 38) OR (name = 26691) AND (proj = 38)) BEGIN		//fireball
					LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkfirb%" END
					END
						PATCH_IF ((name = 12021) AND (proj = 1) OR (name = 25868) AND (proj = 1)) BEGIN		//improved invisibility
						LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 parameter2 = 0 STR_VAR resource = dtkilluh END
						LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
						LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_em33 END
						END
							PATCH_IF ((name = 12039) AND (proj = 1) OR (name = 26362) AND (proj = 1)) BEGIN		//infravision
							LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 parameter2 = 0 STR_VAR resource = dtkdivnh END
							LPF ALTER_EFFECT INT_VAR match_opcode = 174 match_duration = 0 STR_VAR resource = dtk_em04 END
							END
								PATCH_IF ((name = 12062) AND (proj = 98) OR (name = 26447) AND (proj = 98)) BEGIN		//ice storm
								LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr98%" END
								END
									PATCH_IF ((name = 7663) AND (proj = 278) OR (name = 26642) AND (proj = 278)) BEGIN		//incendiary cloud
									LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr214%" END
									END
										PATCH_IF ((name = 22173) AND (proj = 170) OR (name = 26455) AND (proj = 170)) BEGIN		//emotion:hopelessness
										LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr255%" END
										LPF ALTER_EFFECT INT_VAR match_opcode = 215 parameter2 = 2 STR_VAR resource = paralh END
										LPF CLONE_EFFECT INT_VAR match_opcode = 174 duration = 0 timing = 0 STR_VAR resource = dtk_em05 END
										END
											PATCH_IF ((name = 12080) AND (proj = 158) OR (name = 26018) AND (proj = 158)) BEGIN		//haste
											LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr247%" END
											LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 timing = 0 duration = 3 parameter2 = 0 STR_VAR resource = dtkaltrh END
											LPF ALTER_EFFECT INT_VAR match_opcode = 174 match_duration = 0 STR_VAR resource = dtk_m08 END
											LPF ALTER_EFFECT INT_VAR match_opcode = 174 match_duration = 48 STR_VAR resource = dtk_e01 END
											END
												PATCH_IF ((name = 22185) AND (proj = 170) OR (name = 26457) AND (proj = 170)) BEGIN		//greater malison
												LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr256%" END
												LPF ALTER_EFFECT INT_VAR match_opcode = 215 parameter2 = 0 STR_VAR resource = dtkenchh END
												LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 0 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_em05 END
												END
													PATCH_IF ((name = 12049) AND (proj = 190) OR (name = 26106) AND (proj = 190) OR (name = 22616) AND (proj = 190) OR (name = 26499) AND (proj = 190) OR (name = 26167) AND (proj = 190) OR (name = 12100) AND (proj = 190)) BEGIN		//hold person, animal, monster
													LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkhold%" END
													LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 1 resist_dispel = 1 duration = 0 savingthrow = BIT0 probability1 = 100 STR_VAR resource = paralh END
													END
														PATCH_IF ((name = 32379) AND (proj = 259) OR (name = 25855) AND (proj = 259)) BEGIN		//hold undead
														LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkholun%" END
														END
															PATCH_IF ((name = 12069) AND (proj = 169) OR (name = 25894) AND (proj = 169)) BEGIN		//horror
															LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr241%" END
															LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
															LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
															LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 0 duration = 3 resist_dispel = 1 probability1 = 100 savingthrow = BIT0 STR_VAR resource = dtknechh END
															LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 0 duration = 3 resist_dispel = 1 probability1 = 100 savingthrow = BIT0 STR_VAR resource = dtk_e07 END
															END
																PATCH_IF ((name = 12030) AND (proj = 101) OR (name = 26344) AND (proj = 101)) BEGIN		//grease
																LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr101%" END
																LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
																LPF DELETE_EFFECT INT_VAR match_opcode = 158 END
																LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 2 parameter2 = 13 timing = 0 resist_dispel = 1 duration = 6 probability1 = 100 savingthrow = BIT0 STR_VAR resource = dtkgresb END
																LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 2 parameter2 = 14 timing = 0 resist_dispel = 1 duration = 6 probability1 = 100 savingthrow = BIT0 STR_VAR resource = dtkgresc END
																END
																	PATCH_IF ((name = 23791) AND (proj = 1) OR (name = 26558) AND (proj = 1)) BEGIN		//globe of invulnerability
																	LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
																	LPF DELETE_EFFECT INT_VAR match_opcode = 155 END
																	LPF DELETE_EFFECT INT_VAR match_opcode = 8 END
																	LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 1 parameter2 = 1 timing = 0 resist_dispel = 3 duration = 72 probability1 = 100 STR_VAR resource = dtkglinv END
																	LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 1 timing = 4 resist_dispel = 3 duration = 72 probability1 = 100 STR_VAR resource = dtk_e01 END
																	END
																		PATCH_IF ((name = 12029) AND (proj = 1) OR (name = 26448) AND (proj = 1)) BEGIN		//minor globe of invulnerability
																		LPF DELETE_EFFECT INT_VAR match_opcode = 174 match_duration = 0 END
																		LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = dtk_e01 END
																		LPF ALTER_EFFECT INT_VAR match_opcode = 155 opcode = 215 parameter2 = 1 resist_dispel = 3 STR_VAR resource = dtkmglnv END
																		LPF DELETE_EFFECT INT_VAR match_opcode = 155 END
																		LPF DELETE_EFFECT INT_VAR match_opcode = 8 END
																		END
																			PATCH_IF ((name = 12060) AND (proj = 40) OR (name = 25852) AND (proj = 40)) BEGIN		//lightning bolt
																			LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr40%" END
																			END
PATCH_IF ((name = 12043) AND (proj = 185) OR (name = 26154) AND (proj = 185)) BEGIN		//know alignment
LPF ALTER_SPELL_HEADER INT_VAR projectile = 1 END
LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 parameter2 = 0 timing = 0 duration = 3 STR_VAR resource = dtkdivnh END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_em04 END
END
	PATCH_IF ((name = 12068) AND (proj = 50) OR (name = 25892) AND (proj = 50)) BEGIN		//larloch's minor drain
	LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr230%" END
	END
		PATCH_IF ((name = 12048) AND (proj = 48) OR (name = 26388) AND (proj = 48)) BEGIN		//luck
		LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr232%" END
		LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtkenchh END
		LPF ALTER_EFFECT INT_VAR match_opcode = 174 match_duration = 1 STR_VAR resource = dtk_em05 END
		LPF CLONE_EFFECT INT_VAR match_opcode = 133 opcode = 174 timing = 3 STR_VAR resource = dtk_e03 END
		END
			PATCH_IF ((name = 32427) AND (proj = 158) OR (name = 26623) AND (proj = 158)) BEGIN		//mass invisibility
			LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr273%" END
			LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 parameter2 = 0 timing = 0 duration = 3 STR_VAR resource = dtkilluh END
			LPF ALTER_EFFECT INT_VAR match_opcode = 174 match_duration = 0 STR_VAR resource = dtk_em33 END
			LPF ALTER_EFFECT INT_VAR match_opcode = 174 match_duration = 84 STR_VAR resource = dtk_em10 END
			END
				PATCH_IF ((name = 20963) AND (proj = 47) OR (name = 20963) AND (proj = 53) OR (name = 20963) AND (proj = 155)) BEGIN		//polymorph other
				LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
				LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 0 duration = 3 resist_dispel = 1 probability1 = 100 savingthrow = BIT4 STR_VAR resource = dtkaltrh END
				END
					PATCH_IF ((name = 7783) AND (proj = 263) OR (name = 26647) AND (proj = 263)) BEGIN		//power word:blind
					LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr336%" END
					LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkmtouc END
					END
						PATCH_IF ((name = 22142) AND (proj = 1) OR (name = 26087) AND (proj = 1)) BEGIN		//power word:kill
						LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr278%" END
						LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
						LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtkconjh END
						END
							PATCH_IF ((name = 7778) AND (proj = 1) OR (name = 26342) AND (proj = 1)) BEGIN		//power word:silence
							LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
							LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtkpwsil END
							LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
							LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_em44 END
							END
								PATCH_IF ((name = 22143) AND (proj = 1) OR (name = 26079) AND (proj = 1)) BEGIN		//power word:stun
								LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
								LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtkpwstu END
								LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
								LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_em38 END
								LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
								SET location = 0
								SET cycle_speed = 30
								SET r = 103
								SET b = 0
								SET g = 53
								LPF ADD_SPELL_EFFECT INT_VAR opcode = 61 target = 2 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 1 probability1 = 100 END // adding RGB color fade
								END
									PATCH_IF ((name = 7480) AND (proj = 1) OR (name = 26403) AND (proj = 1)) BEGIN		//power word:sleep
									LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
									LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtkpwsil END
									LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
									LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_em44 END
									END
										PATCH_IF ((name = 25960) AND (proj = 253) OR (name = 26611) AND (proj = 253)) BEGIN		//prismatic spray
										LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr272%" END
										LPF DELETE_EFFECT INT_VAR opcode = 141 END
										LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 1 resist_dispel = 0 probability1 = 100 STR_VAR resource = dtkconjh END
										LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 0 probability1 = 100 STR_VAR resource = dtk_em05 END
										END
											PATCH_IF ((name = 12023) AND (proj = 1) OR (name = 25824) AND (proj = 158) OR (name = 12014) AND (proj = 158)) BEGIN		//protection from evil, protection from evil 10' radius
											LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
											LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
											LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 1 resist_dispel = 2 probability1 = 100 STR_VAR resource = abjurh END
											LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = dtk_e03 END
											LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 duration = 0 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_em02 END
											END
												PATCH_IF ((name = 12028) AND (proj = 55) OR (name = 26333) AND (proj = 55)) BEGIN		//protection from normal missiles
												LPF ALTER_SPELL_HEADER INT_VAR projectile = 1 END
												LPF DELETE_EFFECT INT_VAR match_opcode = 8 END
												LPF ALTER_EFFECT INT_VAR match_opcode = 156 parameter2 = 1 STR_VAR resource = dtkpronm END
												LPF DELETE_EFFECT INT_VAR match_opcode = 174 match_duration = 0 END
												LPF ALTER_EFFECT INT_VAR match_opcode = 174 match_duration = 300 STR_VAR resource = eff_e02 END
												END
													PATCH_IF ((name = 12024) AND (proj = 1) OR (name = 26357) AND (proj = 1)) BEGIN		//protection from petrification
													LPF DELETE_EFFECT INT_VAR match_opcode = 9 END
													LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 duration = 0 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_em02 END
													LPF ALTER_EFFECT INT_VAR match_opcode = 174 match_duration = 300 STR_VAR resource = eff_e02 END
													LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = abjurh END
													END
														PATCH_IF ((name = 22620) AND (proj = 1) OR (name = 26206) AND (proj = 1)) BEGIN		//protection from lightning
														LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
														LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 duration = 0 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_p01 END
														LPF ALTER_EFFECT INT_VAR match_opcode = 174 match_duration = 210 STR_VAR resource = eff_e03 END
														LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = abjurh END
														SET location = 0
														SET cycle_speed = 30
														SET r = 36
														SET b = 109
														SET g = 70
														LPF ADD_SPELL_EFFECT INT_VAR opcode = 61 target = 2 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 1 probability1 = 100 resist_dispel = 3 END // adding RGB color fade
														END
															PATCH_IF ((name = 12086) AND (proj = 1) OR (name = 26169) AND (proj = 1)) BEGIN		//protection from fire
															LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
															LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
															LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 duration = 0 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_p01 END
															LPF CLONE_EFFECT INT_VAR match_opcode = 84 opcode = 174 STR_VAR resource = eff_e03 END
															LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = abjurh END
															SET location = 0
															SET cycle_speed = 30
															SET r = 120
															SET b = 0
															SET g = 58
															LPF ADD_SPELL_EFFECT INT_VAR opcode = 61 target = 2 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 1 probability1 = 100 resist_dispel = 3 END // adding RGB color fade
															END
																PATCH_IF ((name = 7539) AND (proj = 1) OR (name = 26432) AND (proj = 1)) BEGIN		//protection from cold
																LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
																LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
																LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 duration = 0 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_p01 END
																LPF CLONE_EFFECT INT_VAR match_opcode = 85 opcode = 174 STR_VAR resource = eff_e03 END
																LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = abjurh END
																SET location = 0
																SET cycle_speed = 30
																SET r = 106
																SET b = 124
																SET g = 127
																LPF ADD_SPELL_EFFECT INT_VAR opcode = 61 target = 2 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 1 probability1 = 100 resist_dispel = 3 END // adding RGB color fade
																END
																	PATCH_IF ((name = 7563) AND (proj = 1) OR (name = 26532) AND (proj = 1)) BEGIN		//protection from acid
																	LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
																	LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
																	LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 duration = 0 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_p01 END
																	LPF CLONE_EFFECT INT_VAR match_opcode = 27 opcode = 174 STR_VAR resource = eff_e03 END
																	LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = abjurh END
																	SET location = 0
																	SET cycle_speed = 30
																	SET r = 46
																	SET b = 0
																	SET g = 86
																	LPF ADD_SPELL_EFFECT INT_VAR opcode = 61 target = 2 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 1 probability1 = 100 resist_dispel = 3 END // adding RGB color fade
																	END
																		PATCH_IF ((name = 26510) AND (proj = 1) OR (name = 7571) AND (proj = 1)) BEGIN		//protection from electricity
																		LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
																		LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
																		LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 duration = 0 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_p01 END
																		LPF CLONE_EFFECT INT_VAR match_opcode = 29 opcode = 174 STR_VAR resource = eff_e03 END
																		LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = abjurh END
																		SET location = 0
																		SET cycle_speed = 30
																		SET r = 70
																		SET b = 96
																		SET g = 43
																		LPF ADD_SPELL_EFFECT INT_VAR opcode = 61 target = 2 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 1 probability1 = 100 resist_dispel = 3 END // adding RGB color fade
																		END
																			PATCH_IF ((name = 7598) AND (proj = 1) OR (name = 26594) AND (proj = 1)) BEGIN		//protection from the elements
																			LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
																			LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 duration = 0 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_p01 END
																			LPF CLONE_EFFECT INT_VAR match_opcode = 29 opcode = 174 STR_VAR resource = eff_e03 END
																			LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = abjurh END
																			SET location = 0
																			SET cycle_speed = 30
																			SET r = 150
																			SET b = 0
																			SET g = 83
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 61 target = 2 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 1 probability1 = 100 resist_dispel = 3 END // adding RGB color fade
																			END
PATCH_IF ((name = 7930) AND (proj = 1) OR (name = 26564) AND (proj = 1)) BEGIN		//protection from magical energy
LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 duration = 0 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_p01 END
LPF CLONE_EFFECT INT_VAR match_opcode = 31 opcode = 174 STR_VAR resource = eff_e03 END
LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = abjurh END
SET location = 0
SET cycle_speed = 30
SET r = 54
SET b = 105
SET g = 0
LPF ADD_SPELL_EFFECT INT_VAR opcode = 61 target = 2 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 1 probability1 = 100 resist_dispel = 3 END // adding RGB color fade
END
	PATCH_IF ((name = 26627) AND (proj = 1) OR (name = 7600) AND (proj = 1)) BEGIN		//protection from energy
	LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
	LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 duration = 0 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_p01 END
	LPF CLONE_EFFECT INT_VAR match_opcode = 28 opcode = 174 STR_VAR resource = eff_e03 END
	LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = abjurh END
	SET location = 0
	SET cycle_speed = 30
	SET r = 96
	SET b = 96
	SET g = 132
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 61 target = 2 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 1 probability1 = 100 resist_dispel = 3 END // adding RGB color fade
	END
		PATCH_IF ((name = 12087) AND (proj = 1) OR (name = 26172) AND (proj = 1)) BEGIN		//remove curse
		LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
		LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 duration = 0 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_p01 END
		LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = abjurh END
		END
			PATCH_IF ((name = 39853) AND (proj = 177) OR (name = 26417) AND (proj = 177)) BEGIN		//remove magic
			LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkrmagi%" END
			LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
			LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 1 resist_dispel = 0 probability1 = 100 STR_VAR resource = abjurh END
			LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 tsrget = 2 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_em10 END
			END
				PATCH_IF ((name = 12025) AND (proj = 168) OR (name = 26391) AND (proj = 168)) BEGIN		//resist fear
				LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr242%" END
				LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = abjurh END
				LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = eff_e02 END
				LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_em02 END
				END
					PATCH_IF ((name = 12053) AND (proj = 1) OR (name = 26366) AND (proj = 1)) BEGIN		//shield
					LPF ALTER_EFFECT INT_VAR match_opcode = 215 parameter2 = 0 STR_VAR resource = dtkinvoh END
					LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_em06 END
					SET location = 6
					SET cycle_speed = 20
					SET r = 96
					SET b = 142
					SET g = 0
					LPF ADD_SPELL_EFFECT INT_VAR opcode = 9 target = 1 timing = 0 duration = 300 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location probability1 = 100 resist_dispel = 3 END // adding pulse glow
					SET location = 0
					SET cycle_speed = 20
					SET r = 96
					SET b = 142
					SET g = 0
					LPF ADD_SPELL_EFFECT INT_VAR opcode = 9 target = 1 timing = 0 duration = 300 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location probability1 = 100 resist_dispel = 3 END // adding pulse glow
					SET location = 1
					SET cycle_speed = 20
					SET r = 96
					SET b = 142
					SET g = 0
					LPF ADD_SPELL_EFFECT INT_VAR opcode = 9 target = 1 timing = 0 duration = 300 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location probability1 = 100 resist_dispel = 3 END // adding pulse glow
					SET location = 2
					SET cycle_speed = 20
					SET r = 96
					SET b = 142
					SET g = 0
					LPF ADD_SPELL_EFFECT INT_VAR opcode = 9 target = 1 timing = 0 duration = 300 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location probability1 = 100 resist_dispel = 3 END // adding pulse glow
					SET location = 3
					SET cycle_speed = 20
					SET r = 96
					SET b = 142
					SET g = 0
					LPF ADD_SPELL_EFFECT INT_VAR opcode = 9 target = 1 timing = 0 duration = 300 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location probability1 = 100 resist_dispel = 3 END // adding pulse glow
					SET location = 4
					SET cycle_speed = 20
					SET r = 96
					SET b = 142
					SET g = 0
					LPF ADD_SPELL_EFFECT INT_VAR opcode = 9 target = 1 timing = 0 duration = 300 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location probability1 = 100 resist_dispel = 3 END // adding pulse glow
					SET location = 5
					SET cycle_speed = 20
					SET r = 96
					SET b = 142
					SET g = 0
					LPF ADD_SPELL_EFFECT INT_VAR opcode = 9 target = 1 timing = 0 duration = 300 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location probability1 = 100 resist_dispel = 3 END // adding pulse glow
					END
						PATCH_IF ((name = 12047) AND (proj = 42) OR (name = 26040) AND (proj = 42)) BEGIN		//sleep
						LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtksleep%" END
						LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkenchh END
						LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = dtk_em05 END
						END
							PATCH_IF ((name = 12081) AND (proj = 159) OR (name = 26103) AND (proj = 159)) BEGIN		//slow
							LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr248%" END
							LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
							LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 215 parameter2 = 0 timing = 1 resist_dispel = 1 duration = 0 STR_VAR resource = dtkaltrh END  
							LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
							LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 174 timing = 4 STR_VAR resource = eff_e02 END
							LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 174 duration = 0 timing = 1 STR_VAR resource = dtk_em08 END
							END
								PATCH_IF ((name = 12056) AND (proj = 95) OR (name = 26074) AND (proj = 95)) BEGIN		//stinking cloud
								LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr187%" END
								END
									PATCH_IF ((name = 12077) AND (proj = 47) OR (name = 26014) AND (proj = 47)) BEGIN		//strength
									LPF ALTER_SPELL_HEADER INT_VAR projectile = 1 END
									LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkstren END
									LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
									LPF CLONE_EFFECT INT_VAR match_opcode = 44 opcode = 174 timing = 3 STR_VAR resource = eff_e03 END
									LPF CLONE_EFFECT INT_VAR match_opcode = 44 opcode = 174 duration = 0 STR_VAR resource = eff_m41 END
									LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
									SET location = 0
									SET cycle_speed = 30
									SET r = 132
									SET b = 0
									SET g = 73
									LPF ADD_SPELL_EFFECT INT_VAR opcode = 61 target = 2 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location timing = 1 probability1 = 100 resist_dispel = 3 END // adding RGB color fade
									END
										PATCH_IF ((name = 12057) AND (proj = 64) OR (name = 25864) AND (proj = 64)) BEGIN		//web
										LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkweb%" END
										LPF ALTER_EFFECT INT_VAR match_opcode = 157 parameter2 = 1 STR_VAR resource = dtkwebc END
										END
											PATCH_IF ((name = 25938) AND (proj = 260) OR (name = 2963) AND (proj = 260) OR (name = 70321) AND (proj = 260) OR (name = 25918) AND (proj = 260)) BEGIN		//web tangle, mimic web
											LPF ALTER_EFFECT INT_VAR match_opcode = 157 parameter2 = 1 STR_VAR resource = dtkwebc END
											END
												PATCH_IF ((name = 12079) AND (proj = 1) OR (name = 26400) AND (proj = 1)) BEGIN		//vocalize
												LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkaltrh END
												END
													PATCH_IF ((name = 7710) AND (proj = 159) OR (name = 25934) AND (proj = 159)) BEGIN		//wail of the banshee
													LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkwailb%" END
													END
														PATCH_IF ((name = 6620) AND (proj = 1) OR (name = 25886) AND (proj = 1)) BEGIN		//Cure Light Wounds
														LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
														LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 1 timing = 0 resist_dispel = 3 duration = 2 probability1 = 100 STR_VAR resource = dtkclwou END
														LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 3 duration = 2 probability1 = 100 STR_VAR resource = dtk_ep26 END
														END
															PATCH_IF ((name = 3350) AND (proj = 1) OR (name = 26191) AND (proj = 1)) BEGIN		//Cure Medium Wounds
															LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
															LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 1 timing = 0 resist_dispel = 3 duration = 2 probability1 = 100 STR_VAR resource = dtkcmwou END
															LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 3 duration = 2 probability1 = 100 STR_VAR resource = dtk_ep26 END
															END
																PATCH_IF ((name = 12114) AND (proj = 1) OR (name = 26092) AND (proj = 1)) BEGIN		//Cure Serious Wounds
																LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
																LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 1 timing = 0 resist_dispel = 3 duration = 2 probability1 = 100 STR_VAR resource = dtkcswou END
																LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 3 duration = 2 probability1 = 100 STR_VAR resource = dtk_ep34 END
																END
																	PATCH_IF ((name = 12116) AND (proj = 1) OR (name = 26230) AND (proj = 1)) BEGIN		//Cure Critical Wounds
																	LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
																	LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 1 timing = 0 resist_dispel = 3 duration = 2 probability1 = 100 STR_VAR resource = dtkccwou END
																	LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 3 duration = 2 probability1 = 100 STR_VAR resource = dtk_ep46 END
																	END
																		PATCH_IF ((name = 25931) AND (proj = 1) OR (name = 8786) AND (proj = 1)) BEGIN		//Heal
																		LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
																		LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 1 timing = 0 resist_dispel = 3 duration = 2 probability1 = 100 STR_VAR resource = dtkhealh END
																		LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 3 duration = 2 probability1 = 100 STR_VAR resource = dtk_ep37 END
																		END
																			PATCH_IF ((name = 2624) AND (proj = 1) OR (name = 26104) AND (proj = 1)) BEGIN		//Cause Serious Wounds
																			SAY DESC  @3000
																			SAY UNIDENTIFIED_DESC @3000
																			LPF DELETE_EFFECT INT_VAR match_opcode = 111 END
																			LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
																			LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
																			LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
																			LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
																			LPF DELETE_EFFECT INT_VAR match_opcode = 12 END
																			WRITE_BYTE 0x7e 1
																			WRITE_SHORT 0x84 5
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 12 parameter1 = 17 parameter2 = 4194304 target = 2 timing = 1 resist_dispel = 1 probability1 = 100 savingthrow = BIT0 special = BIT8 END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtkcsdam END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_p103 END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 169 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr414 END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 159 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr414 END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 158 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr414 END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 157 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr414 END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 156 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr414 END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 153 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr414 END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 147 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr414 END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 145 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr414 END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 139 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr414 END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 121 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr414 END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter2 = 55 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr414 END
																			END
PATCH_IF ((name = 11193) AND (proj = 1) OR (name = 26243) AND (proj = 1)) BEGIN		//Cause Critical Wounds
SAY DESC @3001
SAY UNIDENTIFIED_DESC @3001
LPF DELETE_EFFECT INT_VAR match_opcode = 111 END
LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
LPF DELETE_EFFECT INT_VAR match_opcode = 12 END
WRITE_BYTE 0x7e 1
WRITE_SHORT 0x84 8
LPF ADD_SPELL_EFFECT INT_VAR opcode = 12 parameter1 = 27 parameter2 = 4194304 target = 2 timing = 1 resist_dispel = 1 probability1 = 100 savingthrow = BIT0 special = BIT8 END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtkccdam END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_p103 END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 169 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr510 END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 159 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr510 END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 158 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr510 END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 157 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr510 END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 156 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr510 END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 153 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr510 END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 147 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr510 END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 145 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr510 END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 139 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr510 END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 121 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr510 END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter2 = 55 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr510 END
END
	PATCH_IF ((name = 11200) AND (proj = 1) OR (name = 26272) AND (proj = 1)) BEGIN		//Harm
	SAY DESC @3002
	SAY UNIDENTIFIED_DESC @3002
	LPF DELETE_EFFECT INT_VAR match_opcode = 111 END
	LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
	LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
	LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
	LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
	LPF DELETE_EFFECT INT_VAR match_opcode = 12 END
	WRITE_BYTE 0x7e 1	//spell target type
	WRITE_SHORT 0x84 9	//casting speed
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 12 parameter1 = 1 parameter2 = 4194305 target = 2 timing = 1 resist_dispel = 1 probability1 = 25 savingthrow = BIT0 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 12 parameter1 = 2 parameter2 = 4194305 target = 2 timing = 1 resist_dispel = 1 probability1 = 50 probability2 = 26 savingthrow = BIT0 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 12 parameter1 = 3 parameter2 = 4194305 target = 2 timing = 1 resist_dispel = 1 probability1 = 75 probability2 = 51 savingthrow = BIT0 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 12 parameter1 = 4 parameter2 = 4194305 target = 2 timing = 1 resist_dispel = 1 probability1 = 76 probability2 = 100 savingthrow = BIT0 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 1 resist_dispel = 1 probability1 = 100 savingthrow = BIT0 STR_VAR resource = dtkharmh END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_p103 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 169 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr608 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 159 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr608 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 158 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr608 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 157 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr608 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 156 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr608 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 153 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr608 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 147 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr608 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 145 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr608 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 139 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr608 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter1 = 121 parameter2 = 104 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr608 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter2 = 55 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr608 END
	END
    	PATCH_IF ((name = 14262) AND (desc1 = 25743) AND (proj = 1) OR (name = 26263) AND (desc1 = 26264) AND (proj = 1)) BEGIN		//Blade Barrier
	    LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR match_resource = spbldtop resource = dtkbbar1 END
		LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR match_resource = spbldbtm resource = dtkbbar2 END
		LPF ALTER_EFFECT INT_VAR match_opcode = 174 duration = 0 STR_VAR resource = dtk_ap20 END
		END
			PATCH_IF ((name = 2445) AND (proj = 1) OR (name = 26193) AND (proj = 1)) BEGIN		//cure disease
			LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtknpois END
			LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_p41 END
			END
				PATCH_IF ((name = 12119) AND (proj = 243) OR (name = 26127) AND (proj = 243)) BEGIN		//entangle
				LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkenta%" END
				LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
				LPF CLONE_EFFECT INT_VAR match_opcode = 154 opcode = 174 STR_VAR resource = dtk_cp01 END
				END	
					PATCH_IF ((name = 12109) AND (proj = 1) OR (name = 26004) AND (proj = 1)) BEGIN		//flame strike
					LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr67%" END
					LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
					END
						PATCH_IF ((name = 12085) AND (proj = 100) OR (name = 26165) AND (proj = 100)) BEGIN		//glyph of warding
						LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkglyp%" END
						END
							PATCH_IF ((name = 45050) AND (proj = 228) OR (name = 26257) AND (proj = 228)) BEGIN		//insect plague
							WRITE_ASCII 0x3a dtkp517c
							SAY DESC @3003
							SAY UNIDENTIFIED_DESC @3003
							LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr216%" END
							LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp517b END
							WRITE_BYTE 0x7e 4	//spell target type
							WRITE_SHORT 0x84 9	//casting speed
							LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter2 = 55 timing = 0 resist_dispel = 2 duration = 1 probability1 = 100 STR_VAR resource = sppr517 END
							LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter2 = 9 timing = 0 resist_dispel = 2 duration = 1 probability1 = 100 STR_VAR resource = sppr517 END
							END
								PATCH_IF ((name = 12115) AND (proj = 1) OR (name = 26202) AND (proj = 1)) BEGIN		//neutralize poison
								LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtknpois END
								LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_p41 END
								END
									PATCH_IF ((name = 12083) AND (proj = 168) OR (name = 25816) AND (proj = 168)) BEGIN		//remove fear
									LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr238%" END
									LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 target = 2 parameter2 = 0 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = abjurh END
									LPF ALTER_EFFECT INT_VAR match_opcode = 174 match_duration = 0 STR_VAR resource = dtk_p01 END
									LPF ALTER_EFFECT INT_VAR match_opcode = 174 match_duration = 300 STR_VAR resource = eff_e03 END
									END
										PATCH_IF ((name = 12088) AND (proj = 168) OR (name = 26175) AND (proj = 168)) BEGIN		//remove paralysis
										LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr250%" END
										LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkrpara END
										LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_ep33 END
										END
											PATCH_IF ((name = 25765) AND (proj = 1) OR (name = 26308) AND (proj = 1)) BEGIN		//remove paralysis
											LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkresur END
											LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_ep18 END
											END
												PATCH_IF ((name = 12112) AND (proj = 1) OR (name = 25887) AND (proj = 1)) BEGIN		//slow poison
												LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 parameter2 = 0 STR_VAR resource = dtkspois END
												LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = dtk_ep17 END
												END
													PATCH_IF ((name = 12097) AND (proj = 1) OR (name = 26125) AND (proj = 1)) BEGIN		//command
													LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
													LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
													LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtkenchh END
													LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_ep04 END
													END
														PATCH_IF ((name = 12084) AND (proj = 1) OR (name = 26132) AND (proj = 1)) BEGIN		//command
														LPF ALTER_EFFECT INT_VAR match_opcode = 153 parameter2 = 1 STR_VAR resource = dtksanct END
														END
															PATCH_IF ((name = 12099) AND (proj = 48) OR (name = 12910) AND (proj = 48)) BEGIN		//charm person or mammal
															LPF ALTER_SPELL_HEADER INT_VAR projectile = 1 END
															LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkenchh END
															LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
															LPF CLONE_EFFECT INT_VAR match_opcode = 5 match_parameter1 = 2 opcode = 174 timing = 1 resist_dispel = 4 STR_VAR resource = dtk_e04 END
															LPF CLONE_EFFECT INT_VAR match_opcode = 5 match_parameter1 = 2 opcode = 174 timing = 1 duration = 0 resist_dispel = 1 STR_VAR resource = dtk_ep04 END
															END
																PATCH_IF ((name = 12095) AND (proj = 254) OR (name = 26177) AND (proj = 254)) BEGIN		//invisibility purge
																LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr240%" END
																LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
																LPF ALTER_EFFECT INT_VAR match_opcode = 215 target = 2 timing = 1 STR_VAR resource = dtkdivnh END
																LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 2 probability1 = 100 STR_VAR resource = dtk_ep03 END 
																END
																	PATCH_IF ((name = 22833) AND (proj = 47) OR (name = 26236) AND (proj = 47)) BEGIN		//champion's strength
																	LPF ALTER_SPELL_HEADER INT_VAR projectile = 1 END
																	LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkcstre END
																	LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = dtk_em41 END
																	LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 2 probability1 = 100 STR_VAR resource = dtk_e01 END 
																	END
																		PATCH_IF ((name = 12123) AND (proj = 149) OR (name = 25951) AND (proj = 149)) BEGIN		//silence 15' radius
																		LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr245%" END
																		LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
																		LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
																		LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
																		LPF CLONE_EFFECT INT_VAR match_opcode = 38 opcode = 174 timing = 4 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_e05 END 
																		LPF CLONE_EFFECT INT_VAR match_opcode = 38 opcode = 174 duration = 0 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_ep07 END 
																		LPF CLONE_EFFECT INT_VAR match_opcode = 38 opcode = 215 parameter2 = 0 duration = 0 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtkaltrh END 
																		END
																			PATCH_IF ((name = 12101) AND (proj = 48) OR (name = 26182) AND (proj = 48)) BEGIN		//rigid thinking
																			LPF ALTER_SPELL_HEADER INT_VAR projectile = 1 END
																			LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
																			LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
																			LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
																			LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
																			LPF CLONE_EFFECT INT_VAR match_opcode = 128 opcode = 174 timing = 4 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_e05 END 
																			LPF CLONE_EFFECT INT_VAR match_opcode = 128 opcode = 174 duration = 0 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_ep04 END 
																			LPF CLONE_EFFECT INT_VAR match_opcode = 128 opcode = 215 parameter2 = 0 duration = 0 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtkenchh END 
																			LPF CLONE_EFFECT INT_VAR match_opcode = 128 opcode = 215 parameter2 = 1 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = spconfus END 
																			END
PATCH_IF ((name = 22618) AND (proj = 48) OR (name = 26204) AND (proj = 48)) BEGIN		//mental domination
LPF ALTER_SPELL_HEADER INT_VAR projectile = 1 END
LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
LPF CLONE_EFFECT INT_VAR match_opcode = 5 opcode = 174 timing = 4 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_e04 END 
LPF CLONE_EFFECT INT_VAR match_opcode = 5 opcode = 174 duration = 0 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_ep04 END 
LPF CLONE_EFFECT INT_VAR match_opcode = 5 opcode = 215 parameter2 = 0 duration = 0 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtkenchh END 
END
	PATCH_IF ((name = 12014) AND (proj = 158) OR (name = 25824) AND (proj = 158)) BEGIN		//protection from evil 10' (projectile)
	LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr258%" END
	LPF DELETE_EFFECT INT_VAR match_opcode = 174 match_duration = 0 END
	END
		PATCH_IF ((name = 38569) AND (proj = 212) OR (name = 26274) AND (proj = 212)) BEGIN		//false dawn
		SAY DESC @3004
		SAY UNIDENTIFIED_DESC @3004
		LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkfdaw%" END
		LPF DELETE_EFFECT INT_VAR match_opcode = 177 END
		LPF DELETE_EFFECT INT_VAR match_opcode = 146 END
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 318 target = 2 parameter2 = 43 timing = 0 resist_dispel = 0 probability1 = 100 STR_VAR resource = sppr609 END
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 target = 2 parameter2 = 2 duration = 1 timing = 0 resist_dispel = 0 probability1 = 100 STR_VAR resource = sppr609 END
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 12 target = 2 parameter2 = 524288 timing = 1 resist_dispel = 0 probability1 = 100 savingthrow = BIT24 dicesize = 6 dicenumber = 6 END
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 0 probability1 = 100 STR_VAR resource = dtk_p108 END
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 74 target = 2 timing = 0 resist_dispel = 0 duration = 6 END
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 142 target = 2 parameter2 = 8 timing = 0 resist_dispel = 0 duration = 6 probability1 = 100 END
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 139 target = 2 parameter1 = RESOLVE_STR_REF(@4000) timing = 1 resist_dispel = 0 probability1 = 100 END
		END
			PATCH_IF ((name = 38579) AND (proj = 1) OR (name = 26284) AND (proj = 1)) BEGIN		//sol's searing orb
			SAY DESC @3005
			SAY UNIDENTIFIED_DESC @3005
			LPF ALTER_SPELL_HEADER INT_VAR match_header_type = 1 new_header_type = 2 END
			WRITE_BYTE 0x7e 1	//spell target type
			WRITE_BYTE 0x80 100  //spell range
			LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr269%" END
			LPF DELETE_EFFECT INT_VAR match_opcode = 111 END
			LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 0 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtksorbh END
			LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_ep38 END
			LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 2 parameter2 = 2 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtksorbb END
			LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 2 parameter2 = 1 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtksorbc END
			END
				PATCH_IF ((name = 12051) AND (proj = 170) OR (name = 25968) AND (proj = 170)) BEGIN		//confusion - priest and wiz
				LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr275%" END
				LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
				LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
				LPF CLONE_EFFECT INT_VAR match_opcode = 128 opcode = 215 parameter2 = 1 STR_VAR resource = spconfus END
				LPF CLONE_EFFECT INT_VAR match_opcode = 128 opcode = 215 parameter2 = 0 timing = 1 duration = 0 STR_VAR resource = dtkconfh END
				LPF CLONE_EFFECT INT_VAR match_opcode = 128 opcode = 174 timing = 4 STR_VAR resource = dtk_e05 END
				LPF CLONE_EFFECT INT_VAR match_opcode = 128 opcode = 174 timing = 1 duration = 0 STR_VAR resource = dtk_m16 END
				END
					PATCH_IF ((name = 22903) AND (proj = 47) OR (name = 26238) AND (proj = 47)) BEGIN		//chaotic commands
					LPF ALTER_SPELL_HEADER INT_VAR projectile = 1 END
					LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkccom END
					LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = dtk_e03 END
					LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 3 probability1 = 100 STR_VAR resource = dtk_ep47 END
					END
						PATCH_IF ((name = 5805) AND (proj = 235) OR (name = 26215) AND (proj = 235)) BEGIN		//poison
						LPF ALTER_SPELL_HEADER INT_VAR projectile = 1 END
						LPF ALTER_EFFECT INT_VAR match_opcode = 215 resist_dispel = 1 savingthrow = BIT2 STR_VAR resource = dtkpoish END
						LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
						LPF CLONE_EFFECT INT_VAR match_opcode = 12 opcode = 174 timing = 1 duration = 0 STR_VAR resource = dtk_p108 END
						SET location = 255
						SET cycle_speed = 25
						LPF ALTER_EFFECT INT_VAR match_opcode = 9 parameter2 = (cycle_speed BLSL 16) + location END
						END
							PATCH_IF ((name = 6928) AND (desc1 = 6930) OR (name = 26245) AND (desc1 = 26246)) BEGIN		//slay living
							SAY DESC @3006
							SAY UNIDENTIFIED_DESC @3006
							WRITE_SHORT 0x1e BIT2	//exclusion flags
							WRITE_BYTE 0x7e 1	//spell target type
							WRITE_BYTE 0x80 1  //spell range
							LPF DELETE_EFFECT INT_VAR match_opcode = 111 END
							LPF DELETE_EFFECT INT_VAR match_opcode = 50 END
							LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
							LPF ADD_SPELL_EFFECT INT_VAR opcode = 13 target = 2 parameter1 = 0 parameter2 = 2 timing = 1 resist_dispel = 1 probability1 = 100 savingthrow = BIT2 END
							LPF ADD_SPELL_EFFECT INT_VAR opcode = 215 target = 2 parameter2 = 1 timing = 1 resist_dispel = 1 probability1 = 100 savingthrow = BIT2 STR_VAR resource = dtkslivi END
							LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 1 probability1 = 100 STR_VAR resource = dtk_p109 END
							LPF ADD_SPELL_EFFECT INT_VAR opcode = 12 target = 2 parameter1 = 1 parameter2 = 4194304 timing = 1 resist_dispel = 1 probability1 = 100 dicenumber = 2 dicesize = 8 END
							LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 parameter2 = 1 timing = 0 resist_dispel = 3  duration = 1 probability1 = 100 STR_VAR resource = sppr511 END
							LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 parameter2 = 27 timing = 0 resist_dispel = 3  duration = 1 probability1 = 100 STR_VAR resource = sppr511 END
							LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 parameter2 = 9 timing = 0 resist_dispel = 3  duration = 1 probability1 = 100 STR_VAR resource = sppr511 END
							END
								PATCH_IF ((name = 6928) AND (numabilities = 12) OR (name = 26245) AND (numabilities = 12)) BEGIN		//slay living (NPC)
								LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 parameter2 = 0 target = 2 STR_VAR resource = dtkslivi END
								END
									PATCH_IF ((name = 12060) AND (proj = 207) OR (name = 25852) AND (proj = 207)) BEGIN		//lightning bolt (no bounce)
									LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr40b%" END
									END
										PATCH_IF ((name = 77510) AND (spell_type = 4) OR (name = 28304) AND (spell_type = 4)) BEGIN		//absorb health
										LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkpr230%" END
										END
									

///summons begin here///

PATCH_IF ((name = 26336) AND (desc1 = 26422) OR (name = 12035) AND (desc1 = 12156)) BEGIN		//monster summoning 1
WRITE_ASCII 0x3a dtkw309c
SAY DESC @3007
SAY UNIDENTIFIED_DESC @3007
LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw309b END
LPF DELETE_EFFECT INT_VAR match_opcode = 177 match_probability1 = 100 END
LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 2 dicesize = 3 probability1 = 100 STR_VAR resource = dtkmsum1 END
END
	PATCH_IF ((name = 12037) AND (desc1 = 12157) OR (name = 26339) AND (desc1 = 26450)) BEGIN		//monster summoning 2
	SAY DESC @3008
	SAY UNIDENTIFIED_DESC @3008
	WRITE_ASCII 0x3a dtkw407c
	LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw407b END
	LPF DELETE_EFFECT INT_VAR match_opcode = 177 match_probability1 = 100 END
	LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 1 dicesize = 6 probability1 = 100 STR_VAR resource = dtkmsum2 END
	END
		PATCH_IF ((name = 12038) AND (desc1 = 12158) OR (name = 26494) AND (desc1 = 26495)) BEGIN		//monster summoning 3
		SAY DESC @3009
		SAY UNIDENTIFIED_DESC @3009
		WRITE_ASCII 0x3a dtkw504c
		LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw504b END
		LPF DELETE_EFFECT INT_VAR match_opcode = 177 match_probability1 = 100 END
		LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 1 dicesize = 4 probability1 = 100 STR_VAR resource = dtkmsum3 END
		END
			PATCH_IF ((name = 26199) AND (desc1 = 25984) OR (name = 12091) AND (desc1 = 12214)) BEGIN		//animal summoning 1
			SAY DESC @3010
			SAY UNIDENTIFIED_DESC @3010
			WRITE_ASCII 0x3a dtkp402c
			LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
			LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp402b END
			LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 3 dicesize = 2 duration = 300 probability1 = 100 STR_VAR resource = dtkasum1 END
			END
				PATCH_IF ((desc1 = 26229) AND (spell_type = 2) OR (desc1 = 12215) AND (spell_type = 2)) BEGIN		//animal summoning 2
				SAY DESC @3011
				SAY UNIDENTIFIED_DESC @3011
				WRITE_ASCII 0x3a dtkp501c
				LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
				LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp501b END
				LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 2 dicesize = 3 duration = 300 probability1 = 100 STR_VAR resource = dtkasum2 END
				END
					PATCH_IF ((desc1 = 26262) AND (spell_type = 2) OR (desc1 = 16362) AND (spell_type = 2)) BEGIN		//animal summoning 3
					SAY DESC @3012
					SAY UNIDENTIFIED_DESC @3012
					WRITE_ASCII 0x3a dtkp602c
					LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
					LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp602b END
					LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 2 dicesize = 2 duration = 300 probability1 = 100 STR_VAR resource = dtkasum3 END
					END
						PATCH_IF ((name = 12073) AND (spell_type = 2) OR (name = 26161) AND (spell_type = 2)) BEGIN		//animate dead (priest)
						SAY DESC @3013
						SAY UNIDENTIFIED_DESC @3013
						WRITE_ASCII 0x3a dtkadedc
						LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
						LPF ALTER_SPELL_HEADER STR_VAR icon = dtkadedb END
						LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 1 dicesize = 6 duration = 2400 probability1 = 100 STR_VAR match_resource = spande01 resource = dtkaded1 END
						LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 1 dicesize = 5 duration = 2400 probability1 = 100 STR_VAR match_resource = spande07 resource = dtkaded2 END
						LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 1 dicesize = 4 duration = 2400 probability1 = 100 STR_VAR match_resource = spande11 resource = dtkaded3 END
						LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 1 dicesize = 3 duration = 2400 probability1 = 100 STR_VAR match_resource = spandl15 resource = dtkaded4 END
						END
							PATCH_IF ((name = 12073) AND (spell_type = 1) OR (name = 26161) AND (spell_type = 1) OR (name = 26489) AND (spell_type = 1)) BEGIN		//animate dead (wizard)
							SAY DESC @3013
							SAY UNIDENTIFIED_DESC @3013
							WRITE_ASCII 0x3a dtkadedc
							LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
							LPF ALTER_SPELL_HEADER STR_VAR icon = dtkadedb END
							LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 1 dicesize = 6 duration = 2400 probability1 = 100 STR_VAR match_resource = spande01 resource = dtkaded1 END
							LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 1 dicesize = 5 duration = 2400 probability1 = 100 STR_VAR match_resource = spande07 resource = dtkaded2 END
							LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 1 dicesize = 4 duration = 2400 probability1 = 100 STR_VAR match_resource = spande11 resource = dtkaded3 END
							LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 1 dicesize = 3 duration = 2400 probability1 = 100 STR_VAR match_resource = spandl15 resource = dtkaded4 END
							END
								PATCH_IF ((name = 15211) AND (spell_type = 1) OR (name = 26267) AND (spell_type = 1)) BEGIN		//conjure fire elemental (wizard)
								SAY DESC @3014
								SAY UNIDENTIFIED_DESC @3014
								WRITE_ASCII 0x3a dtkw620c
								LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
								LPF DELETE_EFFECT INT_VAR match_opcode = 142 END
								LPF DELETE_EFFECT INT_VAR match_opcode = 165 END
								LPF DELETE_EFFECT INT_VAR match_opcode = 177 match_probability1 = 95 match_probability2 = 61 END
								LPF DELETE_EFFECT INT_VAR match_opcode = 177 match_probability1 = 100 match_probability2 = 96 END
								LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw620b END
								LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 parameter1 = 1 dicenumber = 0 dicesize = 0 probability1 = 100 probability2 = 0 STR_VAR resource = dtkesum1 END
								END
									PATCH_IF ((name = 15211) AND (spell_type = 2) OR (name = 26267) AND (spell_type = 2)) BEGIN		//conjure fire elemental (priest)
									SAY DESC @3014
									SAY UNIDENTIFIED_DESC @3014
									WRITE_ASCII 0x3a dtkw620c
									LPF DELETE_EFFECT INT_VAR match_opcode = 177 match_probability1 = 95 match_probability2 = 61 END
									LPF DELETE_EFFECT INT_VAR match_opcode = 177 match_probability1 = 100 match_probability2 = 96 END
									LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw620b END
									LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 parameter1 = 1 dicenumber = 0 dicesize = 0 probability1 = 100 probability2 = 0 STR_VAR resource = dtkesum1 END
									END
										PATCH_IF ((name = 15180) AND (spell_type = 1) OR (name = 26289) AND (spell_type = 1)) BEGIN		//conjure earth elemental (wizard)
										SAY DESC @3015
										SAY UNIDENTIFIED_DESC @3015
										WRITE_ASCII 0x3a dtkw622c
										LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
										LPF DELETE_EFFECT INT_VAR match_opcode = 142 END
										LPF DELETE_EFFECT INT_VAR match_opcode = 165 END
										LPF DELETE_EFFECT INT_VAR match_opcode = 177 match_probability1 = 95 match_probability2 = 61 END
										LPF DELETE_EFFECT INT_VAR match_opcode = 177 match_probability1 = 100 match_probability2 = 96 END
										LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw622b END
										LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 parameter1 = 1 dicenumber = 0 dicesize = 0 probability1 = 100 probability2 = 0 STR_VAR resource = dtkesum2 END
										END
											PATCH_IF ((name = 15180) AND (spell_type = 2) OR (name = 26289) AND (spell_type = 2)) BEGIN		//conjure earth elemental (priest)
											SAY DESC @3016
											SAY UNIDENTIFIED_DESC @3016
											WRITE_ASCII 0x3a dtkw622c
											LPF DELETE_EFFECT INT_VAR match_opcode = 177 match_probability1 = 95 match_probability2 = 61 END
											LPF DELETE_EFFECT INT_VAR match_opcode = 177 match_probability1 = 100 match_probability2 = 96 END
											LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw622b END
											LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 parameter1 = 1 dicenumber = 0 dicesize = 0 probability1 = 100 probability2 = 0 STR_VAR resource = dtkesum2 END
											END
												PATCH_IF ((name = 24839) AND (spell_type = 1) OR (name = 26582) AND (spell_type = 1)) BEGIN		//conjure air elemental (wizard)
												SAY DESC @3017
												SAY UNIDENTIFIED_DESC @3017
												WRITE_ASCII 0x3a dtkw621c
												LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
												LPF DELETE_EFFECT INT_VAR match_opcode = 142 END
												LPF DELETE_EFFECT INT_VAR match_opcode = 165 END
												LPF DELETE_EFFECT INT_VAR match_opcode = 177 match_probability1 = 95 match_probability2 = 61 END
												LPF DELETE_EFFECT INT_VAR match_opcode = 177 match_probability1 = 100 match_probability2 = 96 END
												LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw621b END
												LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 parameter1 = 1 dicenumber = 0 dicesize = 0 probability1 = 100 probability2 = 0 STR_VAR resource = dtkesum3 END
												END
													PATCH_IF ((name = 24827) AND (spell_type = 1) OR (name = 26540) AND (spell_type = 1)) BEGIN		//conjure lesser air elemental (wizard)
													SAY DESC @3018
													SAY UNIDENTIFIED_DESC @3018
													WRITE_ASCII 0x3a dtkw520c
													LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
													LPF DELETE_EFFECT INT_VAR match_opcode = 142 END
													LPF DELETE_EFFECT INT_VAR match_opcode = 165 END
													LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw520b END
													LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 parameter1 = 1 dicenumber = 0 dicesize = 0 probability1 = 100 probability2 = 0 STR_VAR resource = dtkesum4 END
													END
														PATCH_IF ((name = 24829) AND (spell_type = 1) OR (name = 26542) AND (spell_type = 1)) BEGIN		//conjure lesser earth elemental (wizard)
														SAY DESC @3019
														SAY UNIDENTIFIED_DESC @3019
														WRITE_ASCII 0x3a dtkw521c
														LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
														LPF DELETE_EFFECT INT_VAR match_opcode = 142 END
														LPF DELETE_EFFECT INT_VAR match_opcode = 165 END
														LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw521b END
														LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 parameter1 = 1 dicenumber = 0 dicesize = 0 probability1 = 100 probability2 = 0 STR_VAR resource = dtkesum5 END
														END
															PATCH_IF ((name = 24830) AND (spell_type = 1) OR (name = 26530) AND (spell_type = 1)) BEGIN		//conjure lesser fire elemental (wizard)
															SAY DESC @3020
															SAY UNIDENTIFIED_DESC @3020
															WRITE_ASCII 0x3a dtkw516c
															LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
															LPF DELETE_EFFECT INT_VAR match_opcode = 142 END
															LPF DELETE_EFFECT INT_VAR match_opcode = 165 END
															LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw516b END
															LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 parameter1 = 1 dicenumber = 0 dicesize = 0 probability1 = 100 probability2 = 0 STR_VAR resource = dtkesum6 END
															END
																PATCH_IF ((name = 12118) AND (spell_type = 2) OR (name = 26134) AND (spell_type = 2)) BEGIN		//shillelagh
																WRITE_ASCII 0x3a dtkp110c
																LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp110b END
																LPF ALTER_EFFECT INT_VAR match_opcode = 215 parameter2 = 0 STR_VAR resource = dtkaltrh END
																LPF CLONE_EFFECT INT_VAR match_opcode = 111 opcode = 174 target = 1 timing = 4 resist_dispel = 3 probability1 = 100 STR_VAR resource = eff_e02 END
																END
																	PATCH_IF ((name = 12105) AND (spell_type = 2) OR (name = 25922) AND (spell_type = 2)) BEGIN		//flame blade
																	WRITE_ASCII 0x3a dtkp206c
																	LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp206b END
																	END
																		PATCH_IF ((name = 12107) AND (spell_type = 2) OR (name = 25900) AND (spell_type = 2)) BEGIN		//spiritual hammer
																		WRITE_ASCII 0x3a dtkp213c
																		LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp213b END
																		LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkinvoh END
																		END
																			PATCH_IF ((name = 45045) AND (proj = 227) OR (name = 25948) AND (proj = 227)) BEGIN		//summon insects
																			WRITE_ASCII 0x3a dtkp319c
																			SAY DESC @3022
																			SAY UNIDENTIFIED_DESC @3022
																			LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp319b END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 parameter2 = 55 target = 2 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr319 END
																			LPF ADD_SPELL_EFFECT INT_VAR opcode = 324 parameter2 = 9 target = 2 timing = 0 resist_dispel = 0 duration = 1 probability1 = 100 STR_VAR resource = sppr319 END
																			END
PATCH_IF ((name = 25613) AND (spell_type = 2) OR (name = 26213) AND (spell_type = 2)) BEGIN		//call woodland beings
WRITE_ASCII 0x3a dtkp410c
SAY DESC @3023
SAY UNIDENTIFIED_DESC @3023
LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp410b END
END
	PATCH_IF ((name = 14263) AND (spell_type = 2) OR (name = 26259) AND (spell_type = 2)) BEGIN		//aerial servant
	WRITE_ASCII 0x3a dtkp601c
	SAY DESC @3025
	SAY UNIDENTIFIED_DESC @3025
	LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp601b END
	END
		PATCH_IF ((name = 16163) AND (spell_type = 2) OR (name = 26265) AND (spell_type = 2)) BEGIN		//conjure animals
		WRITE_ASCII 0x3a dtkp604c
		SAY DESC @3024
		SAY UNIDENTIFIED_DESC @3024
		LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp604b END
		LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 parameter1 = 2 dicenumber = 0 dicesize = 0 probability1 = 100 probability2 = 0 STR_VAR resource = dtkconja END
		END
			PATCH_IF ((name = 14260) AND (spell_type = 2) OR (name = 26291) AND (spell_type = 2)) BEGIN		//gate
			WRITE_ASCII 0x3a dtkp703c
			WRITE_SHORT 0x1e (BIT2 + BIT3 + BIT31)
			SAY DESC @3026
			SAY UNIDENTIFIED_DESC @3026
			LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp703b END
			END
				PATCH_IF ((name = 25750) AND (spell_type = 2) OR (name = 26314) AND (spell_type = 2)) BEGIN		//creeping doom
				WRITE_ASCII 0x3a dtkp717c
				SAY DESC @3027
				SAY UNIDENTIFIED_DESC @3027
				LPF ALTER_SPELL_HEADER INT_VAR match_header_type = 2 new_header_type = 1 projectile = 1 range = 30 speed = 9 END
				LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp717b END
				LPF DELETE_EFFECT INT_VAR match_opcode = 142 END
				LPF DELETE_EFFECT INT_VAR match_opcode = 272 END
				LPF DELETE_EFFECT INT_VAR match_opcode = 60 END
				LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
				LPF DELETE_EFFECT INT_VAR match_opcode = 146 END
				LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
				LPF ADD_SPELL_EFFECT INT_VAR opcode = 331 target = 1 timing = 0 resist_dispel = 3 duration = 60 parameter1 = 3 dicenumber = 1 dicesize = 3 probability1 = 100 probability2 = 0 STR_VAR resource = dtkcdoom END
				END
					PATCH_IF ((name = 8072) AND (spell_type = 1) OR (name = 25831) AND (spell_type = 1)) BEGIN		//find familliar
					WRITE_ASCII 0x3a dtkw123c
					LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw123b END
					END
						PATCH_IF ((name = 25904) AND (spell_type = 1) OR (name = 26465) AND (spell_type = 1)) BEGIN		//enchanted weapon
						WRITE_ASCII 0x3a dtkw417c
						SAY DESC @3030
						SAY UNIDENTIFIED_DESC @3030
						LPF ALTER_SPELL_HEADER INT_VAR header_type = 1 target = 5 STR_VAR icon = dtkw417b END
						LPF DELETE_EFFECT INT_VAR match_opcode = 345 END
						LPF DELETE_EFFECT INT_VAR match_opcode = 328 END
						LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
						LPF DELETE_EFFECT INT_VAR match_opcode = 142 END
						LPF DELETE_EFFECT INT_VAR match_opcode = 321 END
						LPF ADD_SPELL_EFFECT INT_VAR opcode = 214 target = 1 parameter1 = 0 timing = 1 resist_dispel = 2 probability1 = 100 STR_VAR resource = dtkw417 END
						END
							PATCH_IF ((name = 29207) AND (spell_type = 1) OR (name = 26475) AND (spell_type = 1)) BEGIN		//spider spawn
							WRITE_ASCII 0x3a dtkw423c
							LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw423b END
							END
								PATCH_IF ((name = 23790) AND (spell_type = 1) OR (name = 26556) AND (spell_type = 1)) BEGIN		//invisible stalker
								WRITE_ASCII 0x3a dtkw601c
								LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw601b END
								LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 parameter1 = 1 dicenumber = 0 dicesize = 0 probability1 = 100 probability2 = 0 STR_VAR resource = dtkstalk END
								END
									PATCH_IF ((name = 24785) AND (spell_type = 1) OR (name = 26579) AND (spell_type = 1)) BEGIN		//wyvern call
									WRITE_ASCII 0x3a dtkw619c
									LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw619b END
									END
										PATCH_IF ((name = 26585) AND (spell_type = 1) OR (name = 29211) AND (spell_type = 1)) BEGIN		//carrion summons
										WRITE_ASCII 0x3a dtkw623c
										LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw623b END
										END
											PATCH_IF ((name = 29213) AND (spell_type = 1) OR (name = 26587) AND (spell_type = 1)) BEGIN		//summon nishruu
											WRITE_ASCII 0x3a dtkw624c
											LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw624b END
											END
												PATCH_IF ((name = 17320) AND (spell_type = 1) OR (name = 26601) AND (spell_type = 1)) BEGIN		//cacofiend
												WRITE_ASCII 0x3a dtkw707c
												LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw707b END
												END
													PATCH_IF ((name = 7831) AND (spell_type = 1) OR (name = 26613) AND (spell_type = 1)) BEGIN		//mordenkainen's sword
													WRITE_ASCII 0x3a dtkw716c
													LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw716b END
													END
														PATCH_IF ((name = 29215) AND (spell_type = 1) OR (name = 26615) AND (spell_type = 1)) BEGIN		//summon efreeti
														WRITE_ASCII 0x3a dtkw717c
														LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw717b END
														END
															PATCH_IF ((name = 29217) AND (spell_type = 1) OR (name = 26617) AND (spell_type = 1)) BEGIN		//summon djinni
															WRITE_ASCII 0x3a dtkw718c
															LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw718b END
															END
																PATCH_IF ((name = 29219) AND (spell_type = 1) OR (name = 26619) AND (spell_type = 1)) BEGIN		//summon hakeashar
																WRITE_ASCII 0x3a dtkw719c
																LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw719b END
																END
																	PATCH_IF ((name = 17360) AND (spell_type = 1) OR (name = 26635) AND (spell_type = 1)) BEGIN		//summon fiend
																	WRITE_ASCII 0x3a dtkw807c
																	LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw807b END
																	END
																		PATCH_IF ((name = 26291) AND (spell_type = 1) OR (name = 14260) AND (spell_type = 1)) BEGIN		//gate (wizard)
																		WRITE_ASCII 0x3a dtkw905c
																		LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw905b END
																		END
																			PATCH_IF ((name = 7851) AND (spell_type = 1) OR (name = 26668) AND (spell_type = 1)) BEGIN		//black blade of disaster
																			WRITE_ASCII 0x3a dtkw915c
																			LPF ALTER_SPELL_HEADER STR_VAR icon = dtkw915b END
																			END

END
BUT_ONLY

///////////////////////////////////////////////////////////////////////
//Spells modified individually - due to nesting or other reasons///////
///////////////////////////////////////////////////////////////////////

COPY_EXISTING ~spwi413a.spl~ ~override~	//otiluke's resilient sphere
	LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkorsph END
	BUT_ONLY IF_EXISTS
	
COPY_EXISTING ~spin853.spl~ ~override~	//otiluke's resilient sphere
	LPF ALTER_EFFECT INT_VAR match_opcode = 155 opcode = 215 parameter2 = 1 timing = 0 resist_dispel = 3 STR_VAR resource = dtkorsph END
	BUT_ONLY IF_EXISTS

COPY_EXISTING ~spwi853.spl~ ~override~	//otiluke's resilient sphere
	LPF ALTER_EFFECT INT_VAR match_opcode = 155 opcode = 215 parameter2 = 1 timing = 0 resist_dispel = 3 STR_VAR resource = dtkorsph END
	BUT_ONLY IF_EXISTS
	
COPY_EXISTING ~spwi523d.spl~ ~override~	//sunfire
	LPF ALTER_SPELL_HEADER INT_VAR projectile = EVAL "%dtkfirb%" END		
	BUT_ONLY IF_EXISTS

COPY_EXISTING ~spcl106.spl~ ~override~	//animate dead (blackguard)
	SAY UNIDENTIFIED_DESC @3013
	WRITE_ASCII 0x3a dtkadedc
	LPF ALTER_SPELL_HEADER STR_VAR icon = dtkadedb END
	LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 1 dicesize = 6 duration = 2400 probability1 = 100 STR_VAR match_resource = spande01 resource = dtkaded1 END
	LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 1 dicesize = 5 duration = 2400 probability1 = 100 STR_VAR match_resource = spande07 resource = dtkaded2 END
	LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 1 dicesize = 4 duration = 2400 probability1 = 100 STR_VAR match_resource = spande11 resource = dtkaded3 END
	LPF ALTER_EFFECT INT_VAR match_opcode = 177 opcode = 331 dicenumber = 1 dicesize = 3 duration = 2400 probability1 = 100 STR_VAR match_resource = spandl15 resource = dtkaded4 END
	BUT_ONLY IF_EXISTS

COPY_EXISTING ~sppr207.spl~ ~override~	//goodberry
	SAY UNIDENTIFIED_DESC @3021
	WRITE_ASCII 0x3a dtkp207c
	LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp207b END
	LPF ALTER_EFFECT INT_VAR match_opcode = 122 opcode = 255 target = 1 timing = 0 resist_dispel = 3 duration = 3 END
	LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = dtk_ep07 END
	BUT_ONLY IF_EXISTS

COPY_EXISTING ~sppr723.spl~ ~override~	//elemental summoning
	SAY UNIDENTIFIED_DESC @3028
	WRITE_ASCII 0x3a dtkp723c
	LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp723b END
	LPF DELETE_EFFECT INT_VAR match_opcode = 177 END
	LPF DELETE_EFFECT INT_VAR match_opcode = 206 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 331 target = 1 timing = 0 resist_dispel = 3 duration = 60 parameter1 = 2 dicenumber = 0 dicesize = 0 probability1 = 90 probability2 = 0 STR_VAR resource = dtkesum7 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 331 target = 1 timing = 0 resist_dispel = 3 duration = 60 parameter1 = 1 dicenumber = 0 dicesize = 0 probability1 = 100 probability2 = 91 STR_VAR resource = dtkesum8 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 3 timing = 0 resist_dispel = 2 duration = 60 probability1 = 100 parameter1 = RESOLVE_STR_REF(@4007) STR_VAR resource = sppr724 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 3 timing = 0 resist_dispel = 2 duration = 60 probability1 = 100 parameter1 = RESOLVE_STR_REF(@4007) STR_VAR resource = sppr723 END
	BUT_ONLY IF_EXISTS

COPY_EXISTING ~sppr724.spl~ ~override~	//greater elemental summoning
	SAY UNIDENTIFIED_DESC @3029
	WRITE_ASCII 0x3a dtkp724c
	LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp724b END
	LPF DELETE_EFFECT INT_VAR match_opcode = 177 END
	LPF DELETE_EFFECT INT_VAR match_opcode = 206 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 331 target = 1 timing = 0 resist_dispel = 3 duration = 60 parameter1 = 1 dicenumber = 0 dicesize = 0 probability1 = 100 probability2 = 0 STR_VAR resource = dtkesum8 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 3 timing = 0 resist_dispel = 2 duration = 60 probability1 = 100 parameter1 = RESOLVE_STR_REF(@4007) STR_VAR resource = sppr724 END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 3 timing = 0 resist_dispel = 2 duration = 60 probability1 = 100 parameter1 = RESOLVE_STR_REF(@4007) STR_VAR resource = sppr723 END
	BUT_ONLY IF_EXISTS	
	
COPY_EXISTING ~sppr726.spl~ ~override~	//summon deva
	WRITE_ASCII 0x3a dtkp726c
	LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp726b END
	BUT_ONLY IF_EXISTS
	
COPY_EXISTING ~sppr727.spl~ ~override~	//summon fallen deva
	WRITE_ASCII 0x3a dtkp726c
	LPF ALTER_SPELL_HEADER STR_VAR icon = dtkp727b END
	BUT_ONLY IF_EXISTS
	
COPY_EXISTING ~spdn01a.spl~ ~override~	//absorb health
	LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkclwou END
	LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 parameter2 = 0 STR_VAR resource = 1wdcldam END
	SET location = 0
	SET cycle_speed = 30
	SET r = 252
	SET b = 98
	SET g = 116
	LPF CLONE_EFFECT INT_VAR match_opcode = 50 target = 2 timing = 0 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = (cycle_speed BLSL 16) + location END
	BUT_ONLY IF_EXISTS
			
/////////////////////////////////////////////////////
///Items with spell effects, ex: wands and scrolls///
/////////////////////////////////////////////////////

////////////wands//////////////
COPY_EXISTING ~wand12_.itm~ ~override~  //Wand of Magic Missiles
	LPF ALTER_EFFECT INT_VAR silent = 1 check_headers = 1 match_type = 1 match_opcode = 141 opcode = 215 parameter2 = 0 STR_VAR resource = dtkinvoh END
		BUT_ONLY IF_EXISTS

COPY_EXISTING ~wand03.itm~ ~override~  //Wand of Magic Missiles
	LPF ALTER_EFFECT INT_VAR silent = 1 check_headers = 1 match_type = 1 match_opcode = 141 opcode = 215 parameter2 = 0 STR_VAR resource = dtkinvoh END
		BUT_ONLY IF_EXISTS

COPY_EXISTING ~wand12.itm~ ~override~  //Wand of Magic Missiles (second version in BG1)
  READ_LONG   0x0c name
	  PATCH_IF (name = 6689) BEGIN
	LPF ALTER_EFFECT INT_VAR silent = 1 check_headers = 1 match_type = 1 match_opcode = 141 opcode = 215 parameter2 = 0 STR_VAR resource = dtkinvoh END
		END
		BUT_ONLY IF_EXISTS
		
COPY_EXISTING ~wand11.itm~ ~override~  //Wand of the Heavens
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkpr67%" END
	LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
		BUT_ONLY IF_EXISTS
		
COPY_EXISTING ~ttwand.itm~ ~override~  //Wand of the Heavens
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkpr67%" END
	LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
		BUT_ONLY IF_EXISTS
		
COPY_EXISTING ~wand02.itm~ ~override~  //Wand of Fear
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkpr241%" END
	LPF DELETE_EFFECT INT_VAR match_opcode = 141 END
	LPF DELETE_EFFECT INT_VAR match_opcode = 215 END
	LPF CLONE_EFFECT INT_VAR match_opcode = 24 opcode = 215 parameter2 = 0 timing = 1 duration = 0 STR_VAR resource = dtknechh END
	LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = dtk_e07 END
		BUT_ONLY IF_EXISTS
		
COPY_EXISTING ~wand04.itm~ ~override~  //Wand of Paralyzation
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkpr230%" END
	LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 parameter2 = 0 timing = 1 STR_VAR resource = paralh END
		BUT_ONLY IF_EXISTS
		
COPY_EXISTING ~wand07.itm~ ~override~  //Wand of Lightning
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkpr40%" END
		BUT_ONLY IF_EXISTS
		
COPY_EXISTING ~misc7n.itm~ ~override~  //Wand of Lightning
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkpr40%" END
		BUT_ONLY IF_EXISTS
		
COPY_EXISTING ~wand08.itm~ ~override~  //Wand of Sleep
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtksleep%" END
	LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 parameter2 = 0 timing = 1 STR_VAR resource = dtkenchh END
	LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = dtk_em05 END
		BUT_ONLY IF_EXISTS
		
COPY_EXISTING ~wand05.itm~ ~override~  //Wand of Fire
	WRITE_SHORT 0x9c EVAL "%dtkfirb%"  	//write to projectile manually (item has multiple projectiles)
	WRITE_SHORT 0xd4 EVAL "%dtkpr109%" 
		BUT_ONLY IF_EXISTS
		
COPY_EXISTING ~wand13.itm~ ~override~  //Wand of Cloudkill
	LPF ALTER_ITEM_HEADER INT_VAR projectile = EVAL "%dtkpr95%" END
		BUT_ONLY IF_EXISTS
		
COPY_EXISTING ~wand19.itm~ ~override~  //Wand of Cursing
	LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = dtkpwsil END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 174 target = 2 timing = 1 resist_dispel = 1 savingthrow = BIT0 probability1 = 100 STR_VAR resource = dtk_em44 END
		BUT_ONLY IF_EXISTS
		
COPY_EXISTING ~wand09.itm~ ~override~  //Wand of Polymorphing
	LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 parameter2 = 0 savingthrow = BIT3 STR_VAR resource = dtkaltrh END
	LPF ALTER_EFFECT INT_VAR match_opcode = 174 savingthrow = BIT3 END	
		BUT_ONLY IF_EXISTS
		
COPY_EXISTING ~wand10.itm~ ~override~  //Wand of Monster Summoning
	LPF ALTER_EFFECT INT_VAR match_opcode = 127 opcode = 331 dicenumber = 1 dicesize = 6 probability1 = 100 STR_VAR resource = dtkmsum2 END
	LPF DELETE_EFFECT INT_VAR match_opcode = 174 END
		BUT_ONLY IF_EXISTS
		
///////scrolls//////

COPY_EXISTING_REGEXP GLOB ~^.+\.itm$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~ITM ~ = 1) BEGIN		
		READ_LONG   0x08 name1
		READ_LONG	0x0c name2	
		READ_LONG   0x50 desc1
		READ_LONG   0x54 desc2
		READ_BYTE	0x68 numabilities
			PATCH_IF ((name2 = 13058) OR (name2 = 7246)) BEGIN		// scroll of monster summoning 1
			SAY DESC @3007
			WRITE_ASCII 0x3a dtkw309a
			LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw309a END
			END
				PATCH_IF (name2 = 13074) BEGIN		// scroll of monster summoning 2
				SAY DESC @3008
				WRITE_ASCII 0x3a dtkw407a
				LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw407a END
				END
					PATCH_IF (name2 = 13080) BEGIN		// scroll of monster summoning 3
					SAY DESC @3009
					WRITE_ASCII 0x3a dtkw504a
					LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw504a END
					END
						PATCH_IF (name2 = 13077) BEGIN		// scroll of animate dead
						SAY DESC @3013
						WRITE_ASCII 0x3a dtkadeda
						LPF ALTER_ITEM_HEADER STR_VAR icon = dtkadeda END
						END
							PATCH_IF ((name2 = 26267) OR (name2 = 34589)) BEGIN		// scroll of conjure fire elemental
							SAY DESC @3014
							WRITE_ASCII 0x3a dtkw620a
							LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw620a END
							END
								PATCH_IF ((name2 = 34591) OR (name2 = 26289)) BEGIN		// scroll of conjure earth elemental
								SAY DESC @3015
								WRITE_ASCII 0x3a dtkw622a
								LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw622a END
								END
									PATCH_IF ((name2 = 34590) OR (name2 = 26582)) BEGIN		// scroll of conjure air elemental
									SAY DESC @3017
									WRITE_ASCII 0x3a dtkw621a
									LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw621a END
									END
										PATCH_IF ((name2 = 34573) OR (name2 = 30248)) BEGIN		// scroll of conjure lesser air elemental
										SAY DESC @3018
										WRITE_ASCII 0x3a dtkw520a
										LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw520a END
										END
											PATCH_IF ((name2 = 30250) OR (name2 = 34574)) BEGIN		// scroll of conjure lesser earth elemental
											SAY DESC @3019
											WRITE_ASCII 0x3a dtkw521a
											LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw521a END
											END
												PATCH_IF ((name2 = 30242) OR (name2 = 34551)) BEGIN		// scroll of conjure lesser fire elemental
												SAY DESC @3020
												WRITE_ASCII 0x3a dtkw516a
												LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw516a END
												END
													PATCH_IF ((name2 = 5010) OR (name2 = 30222)) BEGIN		// scroll of enchanted weapon
													SAY DESC @3030
													WRITE_ASCII 0x3a dtkw417a
													LPF ALTER_ITEM_HEADER INT_VAR header_type = 3 target = 5 STR_VAR icon = dtkw417a END
													END
														PATCH_IF ((name2 = 5016) OR (name2 = 30230)) BEGIN		// scroll of spider spawn
														WRITE_ASCII 0x3a dtkw423a
														LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw423a END
														END
															PATCH_IF ((name2 = 34645) OR (name2 = 26556)) BEGIN		// scroll of invisible stalker
															WRITE_ASCII 0x3a dtkw601a
															LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw601a END
															END
																PATCH_IF ((name2 = 34588) OR (name2 = 26579)) BEGIN		// scroll of wyvern call
																WRITE_ASCII 0x3a dtkw619a
																LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw619a END
																END
																	PATCH_IF ((name2 = 34592) OR (name2 = 26585)) BEGIN		// scroll of carrion summons
																	WRITE_ASCII 0x3a dtkw623a
																	LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw623a END
																	END
																		PATCH_IF ((name2 = 26587) OR (name2 = 34593)) BEGIN		// scroll of summon nishruu
																		WRITE_ASCII 0x3a dtkw624a
																		LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw624a END
																		END
																			PATCH_IF (name2 = 34599) BEGIN		// scroll of cacofiend
																			WRITE_ASCII 0x3a dtkw707a
																			LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw707a END
																			END
																				PATCH_IF ((name1 = 7222) AND (name2 = 7850)) BEGIN		// scroll of mordenkainen's sword
																				WRITE_ASCII 0x3a dtkw716a
																				LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw716a END
																				END
																					PATCH_IF ((name1 = 7222) AND (name2 = 34609)) BEGIN		// scroll of summon efreeti
																					WRITE_ASCII 0x3a dtkw717a
																					LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw717a END
																					END
PATCH_IF ((name1 = 7222) AND (name2 = 34610)) BEGIN		// scroll of summon djinni
WRITE_ASCII 0x3a dtkw718a
LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw718a END
END
	PATCH_IF ((name1 = 7222) AND (name2 = 34611)) BEGIN		// scroll of summon hakeashar
	WRITE_ASCII 0x3a dtkw719a
	LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw719a END
	END
		PATCH_IF ((name1 = 7222) AND (name2 = 34618)) BEGIN		// scroll of summon fiend
		WRITE_ASCII 0x3a dtkw807a
		LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw807a END
		END
			PATCH_IF ((name1 = 7222) AND (name2 = 34631)) BEGIN		// scroll of gate
			WRITE_ASCII 0x3a dtkw905a
			LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw905a END
			END
				PATCH_IF ((name1 = 7222) AND (name2 = 7854)) BEGIN		// scroll of black blade of disaster
				WRITE_ASCII 0x3a dtkw915a
				LPF ALTER_ITEM_HEADER STR_VAR icon = dtkw915a END
				END
END
BUT_ONLY


///////Items created by spells///////////////////////////////////////////////////////

COPY_EXISTING ~gberry.itm~ ~override~  //goodberries
	SAY DESC @8000
	SAY UNIDENTIFIED_DESC @8000
		LPF ALTER_EFFECT INT_VAR match_opcode = 17 duration = 0 parameter1 = 5   END
		LPF ALTER_EFFECT INT_VAR match_opcode = 174 STR_VAR resource = dtk_ep26 END
		LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@4005) END
		LPF ALTER_EFFECT INT_VAR match_opcode = 141 opcode = 215 target = 2 parameter2 = 1 timing = 0 resist_dispel = 3 duration = 2 probability1 = 100 STR_VAR resource = dtkclwou END
			BUT_ONLY IF_EXISTS
			
COPY_EXISTING ~morsword.itm~ ~override~		//mordenkainen's sword
	WRITE_ASCII 0x3a dtkmswrd
	LPF ALTER_ITEM_HEADER STR_VAR icon = dtkmswrd END
		BUT_ONLY IF_EXISTS



//////////////////////////////////////////////////////////
/// Lightning bolts don't bounce                    //////
//////////////////////////////////////////////////////////

///////////bolt stops when it hits target/////////////////

BEGIN @1203
GROUP @1200
REQUIRE_PREDICATE NOT GAME_IS ~iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @12
SUBCOMPONENT @1202
PRINT @11

COPY_EXISTING ~idpro40.pro~ ~override~ // iwdee lightning bolt
			  ~lightb.pro~  ~override~ // bgee/bg2ee lightning bolt
			  ~dtkpr40.pro~  ~override~ // new lightning bolt from spell graphics component
    WRITE_LONG  0x02c (THIS BAND `BIT0)  // remove bounce from walls flag
    WRITE_SHORT 0x200 (THIS BAND `BIT4)  // remove secondary projectile flag
    WRITE_SHORT 0x214 0                  // blank secondary projectile reference
    BUT_ONLY IF_EXISTS
	
///////////bolt stops when it hits wall (passes through targets)/////////////////

BEGIN @1204
GROUP @1200
REQUIRE_PREDICATE NOT GAME_IS ~iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @12
SUBCOMPONENT @1202
PRINT @11

COPY_EXISTING ~idpro40.pro~ ~override~ // iwdee lightning bolt
			  ~lightb.pro~  ~override~ // bgee/bg2ee lightning bolt
			  ~dtkpr40.pro~  ~override~ // new lightning bolt from spell graphics component
    WRITE_LONG  0x02c (THIS BAND `BIT0)  // remove bounce from walls flag
	WRITE_LONG  0x02c BIT1  // add pass target flag
	WRITE_SHORT 0x200 (THIS BAND `BIT4)  // remove secondary projectile flag
    WRITE_SHORT 0x214 0                  // blank secondary projectile reference
    BUT_ONLY IF_EXISTS

/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\////////////
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\////////////
/////                                                  			   \\\\\
///// Enhanced Creature Animations            					   \\\\\
/////                                                              /////
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\////////////
/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\/////\\\\\////////////
BEGIN @1301
GROUP @1300
REQUIRE_PREDICATE NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @12
PRINT @11


COPY_EXISTING_REGEXP GLOB ~^.+\.cre$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~CRE ~ = 1) BEGIN		
		READ_SHORT  0x28 animation
		READ_SHORT	0x08 name1
		READ_SHORT	0x0c name2
			PATCH_IF ((animation = 32565) AND (name1 = 35968) OR (animation = 32565) AND (name1 = 25726))  BEGIN	//nishruu
				WRITE_SHORT 0x28 32592
				END
					PATCH_IF ((animation = 32565) AND (name1 = 25684) OR (animation = 32565) AND (name1 = 46137))  BEGIN	//hakeashar	
					WRITE_SHORT 0x28 32593
					END
END
BUT_ONLY

BEGIN @1303
GROUP @1300
REQUIRE_PREDICATE NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @12
SUBCOMPONENT @1302
PRINT @11

ACTION_IF NOT FILE_EXISTS_IN_GAME ~melwa1.bam~ BEGIN // files required for water elementals
COPY ~ee_cosmetic_enhancements/anim/elementals/water/bam~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~watere01.wav~ BEGIN
COPY ~ee_cosmetic_enhancements/anim/elementals/water/wav~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bf_md01.wav~ BEGIN // sound files required for animation
COPY ~ee_cosmetic_enhancements/anim/shared/wav~ ~override~
END

COPY ~ee_cosmetic_enhancements/anim/elementals/earth/bam~ ~override~
COPY ~ee_cosmetic_enhancements/anim/elementals/earth/wav~ ~override~
COPY ~ee_cosmetic_enhancements/anim/elementals/fire/bam~ ~override~
COPY ~ee_cosmetic_enhancements/anim/elementals/fire/wav~ ~override~

COPY_EXISTING ~e24b.ini~ ~override~		//updating animation to use new sounds
REPLACE_TEXTUALLY ~earth~ ~dtkear~

COPY_EXISTING ~e24c.ini~ ~override~		//updating animation to use new sounds
REPLACE_TEXTUALLY ~fire~ ~dtkf~

COPY_EXISTING_REGEXP GLOB ~^.+\.cre$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~CRE ~ = 1) BEGIN		
		READ_SHORT  0x28 animation
		READ_SHORT	0x08 name1
		READ_SHORT	0x0c name2
			PATCH_IF (animation = 29457)  BEGIN	// Fire Elemental - small
			WRITE_SHORT 0x28 57932
			END
				PATCH_IF (animation = 29456)  BEGIN	// Fire Elemental
				WRITE_SHORT 0x28 57932
				END
					PATCH_IF (animation = 61200)  BEGIN	// Water Elemental
					WRITE_SHORT 0x28 57933
					END
						PATCH_IF (animation = 29441)  BEGIN	// Earth Elemental - small
						WRITE_SHORT 0x28 57931
						END
							PATCH_IF (animation = 29440)  BEGIN	// Earth Elemental
							WRITE_SHORT 0x28 57931
							END
END
BUT_ONLY

BEGIN @1304
GROUP @1300
REQUIRE_PREDICATE NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @12
SUBCOMPONENT @1302
PRINT @11

ACTION_IF NOT FILE_EXISTS_IN_GAME ~melwa1.bam~ BEGIN // files required for water elementals
COPY ~ee_cosmetic_enhancements/anim/elementals/water/bam~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~watere01.wav~ BEGIN
COPY ~ee_cosmetic_enhancements/anim/elementals/water/wav~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bf_md01.wav~ BEGIN // sound files required for animation
COPY ~ee_cosmetic_enhancements/anim/shared/wav~ ~override~
END

COPY ~ee_cosmetic_enhancements/anim/elementals/earth/bam~ ~override~
COPY ~ee_cosmetic_enhancements/anim/elementals/earth/wav~ ~override~
COPY ~ee_cosmetic_enhancements/anim/elementals/fire/bam~ ~override~
COPY ~ee_cosmetic_enhancements/anim/elementals/fire/wav~ ~override~

COPY_EXISTING ~e24b.ini~ ~override~		//updating animation to use new sounds
REPLACE_TEXTUALLY ~earth~ ~dtkear~

COPY_EXISTING ~e24c.ini~ ~override~		//updating animation to use new sounds
REPLACE_TEXTUALLY ~fire~ ~dtkf~


COPY_EXISTING_REGEXP GLOB ~^.+\.cre$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~CRE ~ = 1) BEGIN		
		READ_SHORT  0x28 animation
		READ_SHORT	0x08 name1
		READ_SHORT	0x0c name2
			PATCH_IF ((animation = 29456) AND (name1 = 2876) OR (animation = 29457) AND (name1 = 2879) OR (animation = 29456) AND (name1 = 2873) OR (animation = 29457) AND (name1 = 25569) OR (animation = 29456) AND (name1 = 26732) OR (animation = 29456) AND (name1 = 32373) OR (animation = 29457) AND (name1 = 2873) OR (animation = 29465) AND (name1 = 2878) OR (animation = 29457) AND (name1 = 2878) OR (animation = 29456) AND (name1 = 2878) OR (animation = 29456) AND (name1 = 25569) OR (animation = 29457) AND (name1 = 26705) OR (animation = 29456) AND (name1 = 26705)) BEGIN	// Fire Elemental
			WRITE_SHORT 0x28 57932
			END
				PATCH_IF ((animation = 61200) AND (name1 = 73479)) BEGIN	// Water Elemental
				WRITE_SHORT 0x28 57933
				END
					PATCH_IF ((animation = 29440) AND (name1 = 2867) OR (animation = 29440) AND (name1 = 2853) OR (animation = 29441) AND (name1 = 2850) OR (animation = 29440) AND (name1 = 25620) OR (animation = 29440) AND (name1 = 25622) OR (animation = 29440) AND (name1 = 32376) OR (animation = 29441) AND (name1 = 26703) OR (animation = 29441) AND (name1 = 2867) OR (animation = 29441) AND (name1 = 2851) OR (animation = 29440) AND (name1 = 2850))  BEGIN	// Earth Elemental
					WRITE_SHORT 0x28 57931
					END
END
BUT_ONLY

BEGIN @1305
GROUP @1300
REQUIRE_PREDICATE NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @12
PRINT @11

ACTION_IF NOT FILE_EXISTS_IN_GAME ~mgira1.bam~ BEGIN // files required for iwd iron golems
COPY ~ee_cosmetic_enhancements/anim/golem/bam~ ~override~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~bf_md01.wav~ BEGIN // sound files required for animation
COPY ~ee_cosmetic_enhancements/anim/shared/wav~ ~override~
END

COPY_EXISTING_REGEXP GLOB ~^.+\.cre$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~CRE ~ = 1) BEGIN		
		READ_SHORT  0x28 animation
		READ_SHORT	0x08 name1
		READ_SHORT	0x0c name2
			PATCH_IF (animation = 32516)  BEGIN	// Iron, Adamantite Golem
			WRITE_SHORT 0x28 57936
			END
END
BUT_ONLY

BEGIN @1306
GROUP @1300
REQUIRE_PREDICATE NOT GAME_IS ~iwdee iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @12
PRINT @11

ACTION_IF NOT FILE_EXISTS_IN_GAME ~mumba1.bam~ BEGIN // files required for iwd umber hulk elder (normal)
COPY ~ee_cosmetic_enhancements/anim/umberhulk/elder/bam~ ~override~
END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~dtkum01.wav~ BEGIN // sound files required for iwd umber hulk elder (normal)
COPY ~ee_cosmetic_enhancements/anim/umberhulk/elder/wav~ ~override~
COPY_EXISTING ~e0d0.ini~ ~override~
REPLACE_TEXTUALLY ~umber~ ~dtkum~
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~mum2a1.bam~ BEGIN // files required for iwd umber hulk vodyanoi (elder)
COPY ~ee_cosmetic_enhancements/anim/umberhulk/vodyanoi/bam~ ~override~
END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~vodya01.wav~ BEGIN // sound files required for iwd umber hulk vodyanoi (elder)
COPY ~ee_cosmetic_enhancements/anim/umberhulk/elder/wav~ ~override~
END


COPY_EXISTING_REGEXP GLOB ~^.+\.cre$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~CRE ~ = 1) BEGIN		
		READ_SHORT  0x28 animation
		READ_SHORT	0x08 name1
		READ_SHORT	0x0c name2
			PATCH_IF ((animation = 32529) AND (name1 = 3020) OR (animation = 32529) AND (name1 = 26761))  BEGIN	// Umber Hulk
			WRITE_SHORT 0x28 57552
			END
				PATCH_IF ((animation = 32529) AND (name1 = 71646))  BEGIN	// Umber Hulk Elder
				WRITE_SHORT 0x28 57947
				END
END
BUT_ONLY

BEGIN @1307
GROUP @1300
REQUIRE_PREDICATE NOT GAME_IS ~iwd how totlm iwd_in_bg2 iwd2 pst pstee~ @12
PRINT @11

ACTION_IF NOT FILE_EXISTS_IN_GAME ~dtkd1sli.cre~ BEGIN 	//checks to see if animation fix component already installed

COPY_EXISTING ~7900.ini~ ~override~		//green slime
	REPLACE_TEXTUALLY ~personal_space=4~ ~personal_space=3~		//prevents slimes from getting stuck
	REPLACE_TEXTUALLY ~translucent=1~ ~translucent=0~	//allows for custom levels of transluceny using CRE effects
		BUT_ONLY IF_EXISTS

COPY_EXISTING ~7901.ini~ ~override~		//olive slime
	REPLACE_TEXTUALLY ~personal_space=4~ ~personal_space=3~		//prevents slimes from getting stuck
	REPLACE_TEXTUALLY ~translucent=1~ ~translucent=0~	//allows for custom levels of transluceny using CRE effects
		BUT_ONLY IF_EXISTS

COPY_EXISTING ~7902.ini~ ~override~		//mustard jelly
	REPLACE_TEXTUALLY ~personal_space=4~ ~personal_space=3~		//prevents slimes from getting stuck
	REPLACE_TEXTUALLY ~translucent=1~ ~translucent=0~	//allows for custom levels of transluceny using CRE effects
		BUT_ONLY IF_EXISTS	
	
COPY_EXISTING ~7903.ini~ ~override~		//ochre slime
	REPLACE_TEXTUALLY ~personal_space=4~ ~personal_space=3~		//prevents slimes from getting stuck
	REPLACE_TEXTUALLY ~translucent=1~ ~translucent=0~	//allows for custom levels of transluceny using CRE effects
		BUT_ONLY IF_EXISTS
	
COPY_EXISTING ~7904.ini~ ~override~		//gray ooze
	REPLACE_TEXTUALLY ~personal_space=4~ ~personal_space=3~		//prevents slimes from getting stuck
	REPLACE_TEXTUALLY ~translucent=1~ ~translucent=0~	//allows for custom levels of transluceny using CRE effects
		BUT_ONLY IF_EXISTS
		
COPY_EXISTING_REGEXP GLOB ~^.+\.cre$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~CRE ~ = 1) BEGIN
		READ_SHORT  0x28 animation
		READ_SHORT	0x08 name1
		READ_SHORT	0x0c name2
			PATCH_IF ((animation = 30980) OR (animation = 30979) OR (animation = 30978) OR (animation = 30977) OR (animation = 30976))  BEGIN	// 
			LPF ADD_CRE_EFFECT INT_VAR opcode = 66 target = 1 parameter1 = 75 parameter2 = 0 timing = 9 probability1 = 100 END
				PATCH_IF (animation = 30978)  BEGIN
					WRITE_SHORT 0x28 30980
					SET r = 235
					SET b = 0
					SET g = 247
					LPF ADD_CRE_EFFECT INT_VAR opcode = 51 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 255 timing = 9 probability1 = 100 END // Sets animation to nuetral color gray ooze, then recolors using character tint effect
					END
					END
					END
END ELSE BEGIN

COPY_EXISTING_REGEXP GLOB ~^.+\.cre$~ ~override~
	READ_ASCII 0x0 sg (4) //Signature
	PATCH_IF (~%sg%~ STRING_EQUAL_CASE ~CRE ~ = 1) BEGIN
		READ_SHORT  0x28 animation
		READ_SHORT	0x08 name1
		READ_SHORT	0x0c name2
			PATCH_IF ((animation = 30980) OR (animation = 30979) OR (animation = 30978) OR (animation = 30977) OR (animation = 30976))  BEGIN	// 
			LPF ALTER_EFFECT INT_VAR match_opcode = 66 target = 1 parameter1 = 75 parameter2 = 0 timing = 9 probability1 = 100 END
				PATCH_IF (animation = 30978)  BEGIN
					WRITE_SHORT 0x28 30980
					SET r = 235
					SET b = 0
					SET g = 247
					LPF ADD_CRE_EFFECT INT_VAR opcode = 51 target = 1 parameter1 = (b BLSL 24) + (g BLSL 16) + (r BLSL 8) parameter2 = 255 timing = 9 probability1 = 100 END // Sets animation to nuetral color gray ooze, then recolors using character tint effect
					END
END					
END
END
